function t(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];return n.map((function(n){return n.split(" ").map((function(n){return n?""+t+n:""})).join(" ")})).join(" ")}function n(t,n){return function(e){e&&(t[n]=e)}}function e(t,n,e){return function(r){r&&(t[n][e]=r)}}function r(t,n){return function(e){var r=e.prototype;t.forEach((function(t){n(r,t)}))}}var i=function(){function t(){this.keys=[],this.values=[]}var n=t.prototype;return n.get=function(t){return this.values[this.keys.indexOf(t)]},n.set=function(t,n){var e=this.keys,r=this.values,i=e.indexOf(t),o=-1===i?e.length:i;e[o]=t,r[o]=n},t}(),o=function(){function t(){this.object={}}var n=t.prototype;return n.get=function(t){return this.object[t]},n.set=function(t,n){this.object[t]=n},t}(),a="function"==typeof Map,s=function(){function t(){}var n=t.prototype;return n.connect=function(t,n){this.prev=t,this.next=n,t&&(t.next=this),n&&(n.prev=this)},n.disconnect=function(){var t=this.prev,n=this.next;t&&(t.next=n),n&&(n.prev=t)},n.getIndex=function(){for(var t=this,n=-1;t;)t=t.prev,++n;return n},t}();var u=function(){function t(t,n,e,r,i,o,a,s){this.prevList=t,this.list=n,this.added=e,this.removed=r,this.changed=i,this.maintained=o,this.changedBeforeAdded=a,this.fixed=s}var n=t.prototype;return Object.defineProperty(n,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(n,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),n.caculateOrdered=function(){var t=function(t,n){var e=[],r=[];return t.forEach((function(t){var n=t[0],i=t[1],o=new s;e[n]=o,r[i]=o})),e.forEach((function(t,n){t.connect(e[n-1])})),t.filter((function(t,e){return!n[e]})).map((function(t,n){var i=t[0],o=t[1];if(i===o)return[0,0];var a=e[i],s=r[o-1],u=a.getIndex();return a.disconnect(),s?a.connect(s,s.next):a.connect(void 0,e[0]),[u,a.getIndex()]}))}(this.changedBeforeAdded,this.fixed),n=this.changed,e=[];this.cacheOrdered=t.filter((function(t,r){var i=t[0],o=t[1],a=n[r],s=a[0],u=a[1];if(i!==o)return e.push([s,u]),!0})),this.cachePureChanged=e},t}();function c(t,n,e){var r=a?Map:e?o:i,s=e||function(t){return t},c=[],l=[],f=[],p=t.map(s),d=n.map(s),h=new r,v=new r,g=[],m=[],b={},x=[],y=0,E=0;return p.forEach((function(t,n){h.set(t,n)})),d.forEach((function(t,n){v.set(t,n)})),p.forEach((function(t,n){var e=v.get(t);void 0===e?(++E,l.push(n)):b[e]=E})),d.forEach((function(t,n){var e=h.get(t);void 0===e?(c.push(n),++y):(f.push([e,n]),E=b[n]||0,g.push([e-E,n-y]),m.push(n===e),e!==n&&x.push([e,n]))})),l.reverse(),new u(t,n,c,l,x,f,g,m)}var l=function(){function t(t,n){void 0===t&&(t=[]),this.findKeyCallback=n,this.list=[].slice.call(t)}return t.prototype.update=function(t){var n=[].slice.call(t),e=c(this.list,n,this.findKeyCallback);return this.list=n,e},t}(),f="undefined"!=typeof window,p=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],d={cm:function(t){return 96*t/2.54},mm:function(t){return 96*t/254},in:function(t){return 96*t},pt:function(t){return 96*t/72},pc:function(t){return 96*t/6},"%":function(t,n){return t*n/100},vw:function(t,n){return void 0===n&&(n=window.innerWidth),t/100*n},vh:function(t,n){return void 0===n&&(n=window.innerHeight),t/100*n},vmax:function(t,n){return void 0===n&&(n=Math.max(window.innerWidth,window.innerHeight)),t/100*n},vmin:function(t,n){return void 0===n&&(n=Math.min(window.innerWidth,window.innerHeight)),t/100*n}};function h(t){return void 0===t}function v(t){return t&&"object"==typeof t}function g(t){return Array.isArray(t)}function m(t){return"string"==typeof t}function b(t){return"number"==typeof t}function x(t){return"function"==typeof t}function y(t,n,e,r,i){return E(t,n,e)?e:function(t,n,e,r,i){for(var o,a=function(e){var a=n[e].trim();if(a===t.close&&!E(t,n,e))return{value:e};var s=e,u=_(i,(function(t){return t.open===a}));if(u&&(s=y(u,n,e,r,i)),-1===s)return o=e,"break";o=e=s},s=e;s<r;++s){var u=a(s);if(s=o,"object"==typeof u)return u.value;if("break"===u)break}return-1}(t,n,e+1,r,i)}function E(t,n,e){if(!t.ignore)return null;var r=n.slice(Math.max(e-3,0),e+3).join("");return new RegExp(t.ignore).exec(r)}function S(t,n){var e=m(n)?{separator:n}:n,r=e.separator,i=void 0===r?",":r,o=e.isSeparateFirst,a=e.isSeparateOnlyOpenClose,s=e.isSeparateOpenClose,u=void 0===s?a:s,c=e.openCloseCharacters,l=void 0===c?p:c,f=l.map((function(t){var n=t.open,e=t.close;return n===e?n:n+"|"+e})).join("|"),d=new RegExp("(\\s*"+i+"\\s*|"+f+"|\\s+)","g"),h=t.split(d).filter(Boolean),v=h.length,g=[],b=[];function x(){return!!b.length&&(g.push(b.join("")),b=[],!0)}for(var S,M=function(t){var n=h[t].trim(),e=t,r=_(l,(function(t){return t.open===n})),s=_(l,(function(t){return t.close===n}));if(r){if(-1!==(e=y(r,h,t,v,l))&&u)return x()&&o?(S=t,"break"):(g.push(h.slice(t,e+1).join("")),t=e,o?(S=t,"break"):(S=t,"continue"))}else{if(s&&!E(s,h,t))throw new Error("invalid format: "+s.close);if(function(t,n){return(""===n||" "==n)&&(""===t||" "==t)||t===n}(n,i)&&!a)return x(),o?(S=t,"break"):(S=t,"continue")}-1===e&&(e=v-1),b.push(h.slice(t,e+1).join("")),S=t=e},w=0;w<v;++w){var C=M(w);if(w=S,"break"===C)break}return b.length&&g.push(b.join("")),g}function M(t){return S(t,"")}function w(t){return S(t,",")}function C(t){var n=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!n||n.length<4?{}:{prefix:n[1],value:n[2],suffix:n[3]}}function D(t){var n=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!n)return{prefix:"",unit:"",value:NaN};var e=n[1],r=n[2];return{prefix:e,unit:n[3],value:parseFloat(r)}}function R(t,n){return void 0===n&&(n="-"),t.replace(/([a-z])([A-Z])/g,(function(t,e,r){return""+e+n+r.toLowerCase()}))}function O(){return Date.now?Date.now():(new Date).getTime()}function P(t,n,e){void 0===e&&(e=-1);for(var r=t.length,i=0;i<r;++i)if(n(t[i],i,t))return i;return e}function _(t,n,e){var r=P(t,n);return r>-1?t[r]:e}var z=function(){var t=O(),n=f&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return n?n.bind(window):function(n){var e=O();return window.setTimeout((function(){n(e-t)}),1e3/60)}}(),B=function(){var t=f&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return t?t.bind(window):function(t){clearTimeout(t)}}();function G(t){if(Object.keys)return Object.keys(t);var n=[];for(var e in n)n.push(e);return n}function T(t,n){var e=D(t),r=e.value,i=e.unit;if(v(n)){var o=n[i];if(o){if(x(o))return o(r);if(d[i])return d[i](r,o)}}else if("%"===i)return r*n/100;return d[i]?d[i](r):r}function k(t,n,e,r){return void 0===r&&(r=t[0]/t[1]),[[Y(n[0],1e-7),Y(n[0]/r,1e-7)],[Y(n[1]*r,1e-7),Y(n[1],1e-7)]].filter((function(t){return t.every((function(t,r){var i=n[r],o=Y(i,1e-7);return e?t<=i||t<=o:t>=i||t>=o}))}))[0]||t}function A(t,n,e,r){if(!r)return t.map((function(t,r){return function(t,n,e){return Math.max(n,Math.min(t,e))}(t,n[r],e[r])}));var i=t[0],o=t[1],a=!0===r?i/o:r,s=k(t,n,!1,a),u=s[0],c=s[1],l=k(t,e,!0,a),f=l[0],p=l[1];return i<u||o<c?(i=u,o=c):(i>f||o>p)&&(i=f,o=p),[i,o]}function F(t){for(var n=t.length,e=0,r=n-1;r>=0;--r)e+=t[r];return n?e/n:0}function I(t,n){var e=n[0]-t[0],r=n[1]-t[1],i=Math.atan2(r,e);return i>=0?i:i+2*Math.PI}function j(t){var n=function(t){return[0,1].map((function(n){return F(t.map((function(t){return t[n]})))}))}(t),e=I(n,t[0]),r=I(n,t[1]);return e<r&&r-e<Math.PI||e>r&&r-e<-Math.PI?1:-1}function N(t,n){return Math.sqrt(Math.pow((n?n[0]:0)-t[0],2)+Math.pow((n?n[1]:0)-t[1],2))}function Y(t,n){if(!n)return t;var e=1/n;return Math.round(t/n)/e}function X(t,n){return t.forEach((function(e,r){t[r]=Y(t[r],n)})),t}function W(t,n){return t.classList?t.classList.contains(n):!!t.className.match(new RegExp("(\\s|^)"+n+"(\\s|$)"))}function q(t,n,e,r){t.addEventListener(n,e,r)}function L(t,n,e,r){t.removeEventListener(n,e,r)}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var H=function(t,n){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};function V(t,n){function e(){this.constructor=t}H(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}var U=function(){return U=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t},U.apply(this,arguments)};function $(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]])}return e}function Z(t,n){if(t===n)return!1;for(var e in t)if(!(e in n))return!0;for(var e in n)if(t[e]!==n[e])return!0;return!1}function K(t,n){var e=Object.keys(t),r=Object.keys(n),i=c(e,r,(function(t){return t})),o={},a={},s={};return i.added.forEach((function(t){var e=r[t];o[e]=n[e]})),i.removed.forEach((function(n){var r=e[n];a[r]=t[r]})),i.maintained.forEach((function(r){var i=r[0],o=e[i],a=[t[o],n[o]];t[o]!==n[o]&&(s[o]=a)})),{added:o,removed:a,changed:s}}function J(t){t.forEach((function(t){t()}))}function Q(t){var n=0;return t.map((function(t){return null==t?"$compat"+ ++n:""+t}))}function tt(t,n,e,r){return m(t)||b(t)?new st("text_"+t,n,e,r,null,{}):new("string"==typeof t.type?ut:t.type.prototype.render?dt:ft)(t.type,n,e,r,t.ref,t.props)}function nt(t){var n=[];return t.forEach((function(t){n=n.concat(g(t)?nt(t):t)})),n}function et(t){var n=t.className,e=$(t,["className"]);return null!=n&&(e.class=n),delete e.style,delete e.children,e}function rt(t,n){if(!n)return t;for(var e in n)h(t[e])&&(t[e]=n[e]);return t}function it(t,n){for(var e=[],r=2;r<arguments.length;r++)e[r-2]=arguments[r];var i=n||{},o=i.key,a=i.ref,s=$(i,["key","ref"]);return{type:t,key:o,ref:a,props:U(U({},s),{children:nt(e).filter((function(t){return null!=t&&!1!==t}))})}}var ot=function(){function t(t,n,e,r,i,o){void 0===o&&(o={}),this.type=t,this.key=n,this.index=e,this.container=r,this.ref=i,this.props=o,this._providers=[]}var n=t.prototype;return n._should=function(t,n){return!0},n._update=function(t,n,e,r){if(this.base&&!m(n)&&!r&&!this._should(n.props,e))return!1;this.original=n,this._setState(e);var i=this.props;return m(n)||(this.props=n.props,this.ref=n.ref),this._render(t,this.base?i:{},e),!0},n._mounted=function(){var t=this.ref;t&&t(this.base)},n._setState=function(t){},n._updated=function(){var t=this.ref;t&&t(this.base)},n._destroy=function(){var t=this.ref;t&&t(null)},t}();function at(t){var n={},e={};for(var r in t)0===r.indexOf("on")?e[r.replace("on","").toLowerCase()]=t[r]:n[r]=t[r];return{attributes:n,events:e}}var st=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}V(n,t);var e=n.prototype;return e._render=function(t){var n=this,e=!this.base;return e&&(this.base=document.createTextNode(this.type.replace("text_",""))),t.push((function(){e?n._mounted():n._updated()})),!0},e._unmount=function(){this.base.parentNode.removeChild(this.base)},n}(ot),ut=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.events={},n._isSVG=!1,n}V(n,t);var e=n.prototype;return e.addEventListener=function(t,n){var e=this.events;e[t]=function(t){t.nativeEvent=t,n(t)},this.base.addEventListener(t,e[t])},e.removeEventListener=function(t){var n=this.events;this.base.removeEventListener(t,n[t]),delete n[t]},e._should=function(t){return Z(this.props,t)},e._render=function(t,n){var e=this,r=!this.base;if(r){var i=this._hasSVG();this._isSVG=i;var o=this.props.portalContainer;if(!o){var a=this.type;o=i?document.createElementNS("http://www.w3.org/2000/svg",a):document.createElement(a)}this.base=o}bt(this,this._providers,this.props.children,t,null);var s=this.base,u=at(n),c=u.attributes,l=u.events,f=at(this.props),p=f.attributes,d=f.events;return function(t,n,e){var r=K(t,n),i=r.added,o=r.removed,a=r.changed;for(var s in i)e.setAttribute(s,i[s]);for(var s in a)e.setAttribute(s,a[s][1]);for(var s in o)e.removeAttribute(s)}(et(c),et(p),s),function(t,n,e){var r=K(t,n),i=r.added,o=r.removed,a=r.changed;for(var s in o)e.removeEventListener(s);for(var s in i)e.addEventListener(s,i[s]);for(var s in a)e.removeEventListener(s),e.addEventListener(s,a[s][1]);for(var s in o)e.removeEventListener(s)}(l,d,this),function(t,n,e){var r=e.style,i=K(t,n),o=i.added,a=i.removed,s=i.changed;for(var u in o){var c=R(u,"-");r.setProperty?r.setProperty(c,o[u]):r[c]=o[u]}for(var u in s)c=R(u,"-"),r.setProperty?r.setProperty(c,s[u][1]):r[c]=s[u][1];for(var u in a)c=R(u,"-"),r.removeProperty?r.removeProperty(c):r[c]=""}(n.style||{},this.props.style||{},s),t.push((function(){r?e._mounted():e._updated()})),!0},e._unmount=function(){var t=this.events,n=this.base;for(var e in t)n.removeEventListener(e,t[e]);this._providers.forEach((function(t){t._unmount()})),this.events={},this.props.portalContainer||n.parentNode.removeChild(n)},e._hasSVG=function(){if(this._isSVG||"svg"===this.type)return!0;var t=ct(this.container);return t&&"ownerSVGElement"in t},n}(ot);function ct(t){if(!t)return null;var n=t.base;return n instanceof Node?n:ct(t.container)}function lt(t){if(!t)return null;if(t instanceof Node)return t;var n=t.$_provider._providers;return n.length?lt(n[0].base):null}var ft=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}V(n,t);var e=n.prototype;return e._render=function(t){var n=this.type(this.props);return bt(this,this._providers,n?[n]:[],t),!0},e._unmount=function(){this._providers.forEach((function(t){t._unmount()}))},n}(ot),pt=function(t){function n(n){var e=t.call(this,"container","container",0,null)||this;return e.base=n,e}V(n,t);var e=n.prototype;return e._render=function(){return!0},e._unmount=function(){},n}(ot),dt=function(t){function n(n,e,r,i,o,a){return void 0===a&&(a={}),t.call(this,n,e,r,i,o,rt(a,n.defaultProps))||this}V(n,t);var e=n.prototype;return e._should=function(t,n){return this.base.shouldComponentUpdate(rt(t,this.type.defaultProps),n||this.base.state)},e._render=function(t,n,e){var r=this;this.props=rt(this.props,this.type.defaultProps);var i=!this.base;i?(this.base=new this.type(this.props),this.base.$_provider=this):this.base.props=this.props;var o=this.base,a=o.state,s=o.render();s&&s.props&&!s.props.children.length&&(s.props.children=this.props.children),bt(this,this._providers,s?[s]:[],t,e,null),t.push((function(){i?(r._mounted(),o.componentDidMount()):(r._updated(),o.componentDidUpdate(n,a))}))},e._setState=function(t){var n=this.base;n&&t&&(n.state=t)},e._unmount=function(){this._providers.forEach((function(t){t._unmount()})),clearTimeout(this.base.$_timer),this.base.componentWillUnmount()},n}(ot),ht=function(){function t(t){void 0===t&&(t={}),this.props=t,this.state={},this.$_timer=0,this.$_state={}}var n=t.prototype;return n.shouldComponentUpdate=function(t,n){return!0},n.render=function(){return null},n.setState=function(t,n,e){var r=this;this.$_timer||(this.$_state={}),clearTimeout(this.$_timer),this.$_timer=0,this.$_state=U(U({},this.$_state),t),e?this.$_setState(n,e):this.$_timer=setTimeout((function(){r.$_timer=0,r.$_setState(n,e)}))},n.forceUpdate=function(t){this.setState({},t,!0)},n.componentDidMount=function(){},n.componentDidUpdate=function(t,n){},n.componentWillUnmount=function(){},n.$_setState=function(t,n){var e=[],r=this.$_provider;bt(r.container,[r],[r.original],e,U(U({},this.state),this.$_state),n)&&(t&&e.push(t),J(e))},t}(),vt=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return V(n,t),n.prototype.shouldComponentUpdate=function(t,n){return Z(this.props,t)||Z(this.state,n)},n}(ht),gt=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}V(n,t);var e=n.prototype;return e.componentDidMount=function(){var t=this.props,n=t.element,e=t.container;this._portalProvider=new pt(e),xt(n,e,this._portalProvider)},e.componentDidUpdate=function(){var t=this.props;xt(t.element,t.container,this._portalProvider)},e.componentWillUnmount=function(){xt(null,this.props.container,this._portalProvider),this._portalProvider=null},n}(vt);function mt(t,n,e){var r=e.map((function(t){return m(t)?null:t.key})),i=c(Q(n.map((function(t){return t.key}))),Q(r),(function(t){return t}));i.removed.forEach((function(t){n.splice(t,1)[0]._unmount()})),i.ordered.forEach((function(t){var e=t[0],r=t[1],i=n.splice(e,1)[0];n.splice(r,0,i);var o=lt(i.base),a=lt(n[r+1]&&n[r+1].base);o&&o.parentNode.insertBefore(o,a)})),i.added.forEach((function(i){n.splice(i,0,tt(e[i],r[i],i,t))}));var o=i.maintained.filter((function(i){i[0];var o=i[1],a=e[o],s=n[o];return(m(a)?"text_"+a:a.type)!==s.type?(s._unmount(),n.splice(o,1,tt(a,r[o],o,t)),!0):(s.index=o,!1)}));return function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;var r=Array(t),i=0;for(n=0;n<e;n++)for(var o=arguments[n],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}(i.added,o.map((function(t){return t[0],t[1]})))}function bt(t,n,e,r,i,o){var a=mt(t,n,e),s=n.filter((function(t,n){return t._update(r,e[n],i,o)})),u=ct(t);return u&&a.reverse().forEach((function(e){var r=n[e],i=lt(r.base);if(i&&u!==i&&!i.parentNode){var o=function(t,n){for(var e=t._providers,r=e.length,i=n.index+1;i<r;++i){var o=lt(e[i].base);if(o)return o}return null}(t,r);u.insertBefore(i,o)}})),s.length>0}function xt(t,n,e){void 0===e&&(e=n.__REACT_COMPAT__);var r=!!e;return e||(e=new pt(n)),function(t,n,e){var r=[];bt(t,t._providers,n,r,e),J(r)}(e,t?[t]:[]),r||(n.__REACT_COMPAT__=e),e}function yt(t,n,e){var r=n.__REACT_COMPAT__;t&&!r&&(n.innerHTML=""),xt(t,n,r),e&&e()}function Et(t,n){for(var e=t.length,r=0;r<e;++r)if(n(t[r],r))return!0;return!1}function St(t,n){for(var e=t.length,r=0;r<e;++r)if(n(t[r],r))return t[r];return null}function Mt(t){var n=t;if(void 0===n){if("undefined"==typeof navigator||!navigator)return"";n=navigator.userAgent||""}return n.toLowerCase()}function wt(t,n){try{return new RegExp(t,"g").exec(n)}catch(e){return null}}function Ct(t){return t.replace(/_/g,".")}function Dt(t,n){var e=null,r="-1";return Et(t,(function(t){var i=wt("("+t.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",n);return!(!i||t.brand)&&(e=t,r=i[3]||"-1",t.versionAlias?r=t.versionAlias:t.versionTest&&(r=function(t,n){var e=wt("("+t+")((?:\\/|\\s|:)([0-9|\\.|_]+))",n);return e?e[3]:""}(t.versionTest.toLowerCase(),n)||r),r=Ct(r),!0)})),{preset:e,version:r}}function Rt(t,n){var e={brand:"",version:"-1"};return Et(t,(function(t){var r=Ot(n,t);return!!r&&(e.brand=t.id,e.version=t.versionAlias||r.version,"-1"!==e.version)})),e}function Ot(t,n){return St(t,(function(t){var e=t.brand;return wt(""+n.test,e.toLowerCase())}))}var Pt=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],_t=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],zt=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],Bt=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],Gt=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function Tt(t){return!!Dt(Bt,t).preset}function kt(t,n,e,r,i,o){for(var a=0;a<i;++a){var s=e+a*i,u=r+a*i;t[s]+=t[u]*o,n[s]+=n[u]*o}}function At(t,n,e,r,i){for(var o=0;o<i;++o){var a=e+o*i,s=r+o*i,u=t[a],c=n[a];t[a]=t[s],t[s]=u,n[a]=n[s],n[s]=c}}function Ft(t,n,e,r,i){for(var o=0;o<r;++o){var a=e+o*r;t[a]/=i,n[a]/=i}}function It(t,n,e){void 0===e&&(e=Math.sqrt(t.length));for(var r=t.slice(),i=0;i<e;++i)r[i*e+n-1]=0,r[(n-1)*e+i]=0;return r[(n-1)*(e+1)]=1,r}function jt(t,n){void 0===n&&(n=Math.sqrt(t.length));for(var e=t.slice(),r=en(n),i=0;i<n;++i){var o=n*i+i;if(!Y(e[o],1e-7))for(var a=i+1;a<n;++a)if(e[n*i+a]){At(e,r,i,a,n);break}if(!Y(e[o],1e-7))return[];Ft(e,r,i,n,e[o]);for(a=0;a<n;++a){var s=a,u=e[a+i*n];Y(u,1e-7)&&i!==a&&kt(e,r,s,i,n,-u)}}return r}function Nt(t,n){for(var e=t.slice(),r=t.length;r<n-1;++r)e[r]=0;return e[n-1]=1,e}function Yt(t,n,e){if(void 0===n&&(n=Math.sqrt(t.length)),n===e)return t;for(var r=en(e),i=Math.min(n,e),o=0;o<i-1;++o){for(var a=0;a<i-1;++a)r[o*e+a]=t[o*n+a];r[(o+1)*e-1]=t[(o+1)*n-1],r[(e-1)*e+o]=t[(n-1)*n+o]}return r[e*e-1]=t[n*n-1],r}function Xt(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];var r=en(t);return n.forEach((function(n){r=Wt(r,n,t)})),r}function Wt(t,n,e){void 0===e&&(e=Math.sqrt(t.length));var r=[],i=t.length/e,o=n.length/i;if(!i)return n;if(!o)return t;for(var a=0;a<e;++a)for(var s=0;s<o;++s){r[s*e+a]=0;for(var u=0;u<i;++u)r[s*e+a]+=t[u*e+a]*n[s*i+u]}return r}function qt(t,n){for(var e=Math.min(t.length,n.length),r=t.slice(),i=0;i<e;++i)r[i]=r[i]+n[i];return r}function Lt(t,n){for(var e=Math.min(t.length,n.length),r=t.slice(),i=0;i<e;++i)r[i]=r[i]-n[i];return r}function Ht(t,n){return void 0===n&&(n=9===t.length),n?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function Vt(t,n,e){void 0===e&&(e=n.length);var r=Wt(t,n,e),i=r[e-1];return r.map((function(t){return t/i}))}function Ut(t,n){return Wt(t,[1,0,0,0,0,Math.cos(n),Math.sin(n),0,0,-Math.sin(n),Math.cos(n),0,0,0,0,1],4)}function $t(t,n){return Wt(t,[Math.cos(n),0,-Math.sin(n),0,0,1,0,0,Math.sin(n),0,Math.cos(n),0,0,0,0,1],4)}function Zt(t,n){return Wt(t,nn(n,4))}function Kt(t,n){var e=n[0],r=void 0===e?1:e,i=n[1],o=void 0===i?1:i,a=n[2];return Wt(t,[r,0,0,0,0,o,0,0,0,0,void 0===a?1:a,0,0,0,0,1],4)}function Jt(t,n){return Vt(nn(n,3),Nt(t,3))}function Qt(t,n){var e=n[0],r=void 0===e?0:e,i=n[1],o=void 0===i?0:i,a=n[2];return Wt(t,[1,0,0,0,0,1,0,0,0,0,1,0,r,o,void 0===a?0:a,1],4)}function tn(t,n){return Wt(t,n,4)}function nn(t,n){var e=Math.cos(t),r=Math.sin(t),i=en(n);return i[0]=e,i[1]=r,i[n]=-r,i[n+1]=e,i}function en(t){for(var n=t*t,e=[],r=0;r<n;++r)e[r]=r%(t+1)?0:1;return e}function rn(t,n){for(var e=en(n),r=Math.min(t.length,n-1),i=0;i<r;++i)e[(n+1)*i]=t[i];return e}function on(t,n){for(var e=en(n),r=Math.min(t.length,n-1),i=0;i<r;++i)e[n*(n-1)+i]=t[i];return e}function an(t,n,e,r,i,o,a,s){var u=t[0],c=t[1],l=n[0],f=n[1],p=e[0],d=e[1],h=r[0],v=r[1],g=i[0],m=i[1],b=o[0],x=o[1],y=a[0],E=a[1],S=s[0],M=s[1],w=jt([u,0,l,0,p,0,h,0,c,0,f,0,d,0,v,0,1,0,1,0,1,0,1,0,0,u,0,l,0,p,0,h,0,c,0,f,0,d,0,v,0,1,0,1,0,1,0,1,-g*u,-m*u,-b*l,-x*l,-y*p,-E*p,-S*h,-M*h,-g*c,-m*c,-b*f,-x*f,-y*d,-E*d,-S*v,-M*v],8);if(!w.length)return[];var C=Wt(w,[g,m,b,x,y,E,S,M],8);return C[8]=1,Yt(function(t,n){void 0===n&&(n=Math.sqrt(t.length));for(var e=[],r=0;r<n;++r)for(var i=0;i<n;++i)e[i*n+r]=t[n*r+i];return e}(C),3,4)}function sn(t){return un(cn(t))}function un(t){var n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return t.forEach((function(t){var e=t.matrixFunction,r=t.functionValue;e&&(n=e(n,r))})),n}function cn(t){return(g(t)?t:M(t)).map((function(t){var n=C(t),e=n.prefix,r=n.value,i=null,o=e,a="";if("translate"===e||"translateX"===e||"translate3d"===e){var s=w(r).map((function(t){return parseFloat(t)})),u=s[0],c=s[1],l=void 0===c?0:c,f=s[2];i=Qt,a=[u,l,void 0===f?0:f]}else if("translateY"===e){i=Qt,a=[0,l=parseFloat(r),0]}else if("translateZ"===e){i=Qt,a=[0,0,parseFloat(r)]}else if("scale"===e||"scale3d"===e){var p=w(r).map((function(t){return parseFloat(t)})),d=p[0],h=p[1],v=void 0===h?d:h,g=p[2];i=Kt,a=[d,v,void 0===g?1:g]}else if("scaleX"===e){i=Kt,a=[d=parseFloat(r),1,1]}else if("scaleY"===e){i=Kt,a=[1,v=parseFloat(r),1]}else if("scaleZ"===e){i=Kt,a=[1,1,parseFloat(r)]}else if("rotate"===e||"rotateZ"===e||"rotateX"===e||"rotateY"===e){var m=D(r),b=m.unit,x=m.value;"rotate"===e||"rotateZ"===e?(o="rotateZ",i=Zt):"rotateX"===e?i=Ut:"rotateY"===e&&(i=$t),a="rad"===b?x:x*Math.PI/180}else if("matrix3d"===e)i=tn,a=w(r).map((function(t){return parseFloat(t)}));else if("matrix"===e){var y=w(r).map((function(t){return parseFloat(t)}));i=tn,a=[y[0],y[1],0,0,y[2],y[3],0,0,0,0,1,0,y[4],y[5],0,1]}else o="";return{name:e,functionName:o,value:r,matrixFunction:i,functionValue:a}}))}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var ln=function(t,n){return(ln=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};var fn,pn="function"==typeof Map?void 0:(fn=0,function(t){return t.__DIFF_KEY__||(t.__DIFF_KEY__=++fn)});const dn=function(t){function n(n){return void 0===n&&(n=[]),t.call(this,n,pn)||this}return function(t,n){function e(){this.constructor=t}ln(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}(n,t),n}(l);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function hn(t){return Y(t,1e-7)}function vn(t){return t.length<3?0:Math.abs(function(t){for(var n=0,e=t.length-1;e>=0;--e)n+=t[e];return n}(t.map((function(n,e){var r=t[e+1]||t[0];return n[0]*r[1]-r[0]*n[1]}))))/2}function gn(t,n){var e=n.width,r=n.height,i=n.left,o=n.top,a=mn(t),s=a.minX,u=a.minY,c=a.maxX,l=a.maxY,f=e/(c-s),p=r/(l-u);return t.map((function(t){return[i+(t[0]-s)*f,o+(t[1]-u)*p]}))}function mn(t){var n=t.map((function(t){return t[0]})),e=t.map((function(t){return t[1]}));return{minX:Math.min.apply(Math,n),minY:Math.min.apply(Math,e),maxX:Math.max.apply(Math,n),maxY:Math.max.apply(Math,e)}}function bn(t,n,e){var r=t[0],i=t[1],o=mn(n),a=o.minX,s=o.maxX,u=[[a,i],[s,i]],c=xn(u[0],u[1]),l=Sn(n),f=[];if(l.forEach((function(n){var e,r=xn(n[0],n[1]),o=n[0];(e=r,c.every((function(t,n){return 0===hn(t-e[n])})))?f.push({pos:t,line:n,type:"line"}):En(yn(c,r),[u,n]).forEach((function(t){n.some((function(n){return r=t,!hn((e=n)[0]-r[0])&&!hn(e[1]-r[1]);var e,r}))?f.push({pos:t,line:n,type:"point"}):0!==hn(o[1]-i)&&f.push({pos:t,line:n,type:"intersection"})}))})),!e&&_(f,(function(t){return t[0]===r})))return!0;var p=0,d={};return f.forEach((function(t){var n=t.pos,e=t.type,o=t.line;if(!(n[0]>r))if("intersection"===e)++p;else{if("line"===e)return;if("point"===e){var a=_(o,(function(t){return t[1]!==i})),s=d[n[0]],u=a[1]>i?1:-1;s?s!==u&&++p:d[n[0]]=u}}})),p%2==1}function xn(t,n){var e=t[0],r=t[1],i=n[0]-e,o=n[1]-r;Math.abs(i)<1e-7&&(i=0),Math.abs(o)<1e-7&&(o=0);var a=0,s=0,u=0;return i?o?(s=1,u=-(a=-o/i)*e-r):(s=1,u=-r):o&&(a=-1,u=e),[a,s,u]}function yn(t,n){var e=t[0],r=t[1],i=t[2],o=n[0],a=n[1],s=n[2],u=0===e&&0===o,c=0===r&&0===a,l=[];if(u&&c)return[];if(u){var f=-i/r;return f!==-s/a?[]:[[-1/0,f],[1/0,f]]}if(c){var p=-i/e;return p!==-s/o?[]:[[p,-1/0],[p,1/0]]}if(0===e)l=[[d=-(a*(h=-i/r)+s)/o,h]];else if(0===o){l=[[d=-(r*(h=-s/a)+i)/e,h]]}else if(0===r){l=[[d=-i/e,h=-(o*d+s)/a]]}else if(0===a){l=[[d=-s/o,h=-(e*d+i)/r]]}else{var d,h;l=[[d=(r*s-a*i)/(a*e-r*o),h=-(e*d+i)/r]]}return l.map((function(t){return[t[0],t[1]]}))}function En(t,n){var e=n.map((function(t){return[0,1].map((function(n){return[Math.min(t[0][n],t[1][n]),Math.max(t[0][n],t[1][n])]}))})),r=[];if(2===t.length){var i=t[0],o=i[0],a=i[1];if(hn(o-t[1][0])){if(!hn(a-t[1][1])){var s=Math.max.apply(Math,e.map((function(t){return t[0][0]}))),u=Math.min.apply(Math,e.map((function(t){return t[0][1]})));if(hn(s-u)>0)return[];r=[[s,a],[u,a]]}}else{var c=Math.max.apply(Math,e.map((function(t){return t[1][0]}))),l=Math.min.apply(Math,e.map((function(t){return t[1][1]})));if(hn(c-l)>0)return[];r=[[o,c],[o,l]]}}return r.length||(r=t.filter((function(t){var n=t[0],r=t[1];return e.every((function(t){return 0<=hn(n-t[0][0])&&0<=hn(t[0][1]-n)&&0<=hn(r-t[1][0])&&0<=hn(t[1][1]-r)}))}))),r.map((function(t){return[hn(t[0]),hn(t[1])]}))}function Sn(t){return function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;var r=Array(t),i=0;for(n=0;n<e;n++)for(var o=arguments[n],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}(t.slice(1),[t[0]]).map((function(n,e){return[t[e],n]}))}function Mn(t,n){var e=function(t,n){var e=t.slice(),r=n.slice();-1===j(e)&&e.reverse(),-1===j(r)&&r.reverse();var i=Sn(e),o=Sn(r),a=i.map((function(t){return xn(t[0],t[1])})),s=o.map((function(t){return xn(t[0],t[1])})),u=[];a.forEach((function(t,n){var e=i[n],a=[];s.forEach((function(r,i){var s=En(yn(t,r),[e,o[i]]);a.push.apply(a,s.map((function(t){return{index1:n,index2:i,pos:t,type:"intersection"}})))})),a.sort((function(t,n){return N(e[0],t.pos)-N(e[0],n.pos)})),u.push.apply(u,a),bn(e[1],r)&&u.push({index1:n,index2:-1,pos:e[1],type:"inside"})})),o.forEach((function(t,n){if(bn(t[1],e)){var r=!1,i=P(u,(function(t){return t.index2===n?(r=!0,!1):!!r}));-1===i&&(r=!1,i=P(u,(function(t){var e=t.index1,i=t.index2;return-1===e&&i+1===n?(r=!0,!1):!!r}))),-1===i?u.push({index1:-1,index2:n,pos:t[1],type:"inside"}):u.splice(i,0,{index1:-1,index2:n,pos:t[1],type:"inside"})}}));var c={};return u.filter((function(t){var n=t.pos,e=n[0]+"x"+n[1];return!c[e]&&(c[e]=!0,!0)}))}(t,n);return e.map((function(t){return t.pos}))}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var wn=function(){return wn=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t},wn.apply(this,arguments)};const Cn=function(){function t(){this._events={}}var n=t.prototype;return n.on=function(t,n){if(v(t))for(var e in t)this.on(e,t[e]);else this._addEvent(t,n,{});return this},n.off=function(t,n){if(t)if(v(t))for(var e in t)this.off(e);else if(n){var r=this._events[t];if(r){var i=P(r,(function(t){return t.listener===n}));i>-1&&r.splice(i,1)}}else this._events[t]=[];else this._events={};return this},n.once=function(t,n){var e=this;return n&&this._addEvent(t,n,{once:!0}),new Promise((function(n){e._addEvent(t,n,{once:!0})}))},n.emit=function(t,n){var e=this;void 0===n&&(n={});var r=this._events[t];if(!t||!r)return!0;var i=!1;return n.eventType=t,n.stop=function(){i=!0},n.currentTarget=this,function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;var r=Array(t),i=0;for(n=0;n<e;n++)for(var o=arguments[n],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}(r).forEach((function(r){r.listener(n),r.once&&e.off(t,r.listener)})),!i},n.trigger=function(t,n){return void 0===n&&(n={}),this.emit(t,n)},n._addEvent=function(t,n,e){var r=this._events;r[t]=r[t]||[],r[t].push(wn({listener:n},e))},t}();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var Dn=function(t,n){return(Dn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};var Rn=function(){return Rn=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t},Rn.apply(this,arguments)};function On(t){var n=t.container;return n===document.body?[n.scrollLeft||document.documentElement.scrollLeft,n.scrollTop||document.documentElement.scrollTop]:[n.scrollLeft,n.scrollTop]}const Pn=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n._startRect=null,n._startPos=[],n._prevTime=0,n._timer=0,n._prevScrollPos=[0,0],n._isWait=!1,n}!function(t,n){function e(){this.constructor=t}Dn(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}(n,t);var e=n.prototype;return e.dragStart=function(t,n){var e=n.container,r=0,i=0,o=0,a=0;if(e===document.body)o=window.innerWidth,a=window.innerHeight;else{var s=e.getBoundingClientRect();r=s.top,i=s.left,o=s.width,a=s.height}this._startPos=[t.clientX,t.clientY],this._startRect={top:r,left:i,width:o,height:a},this._prevScrollPos=this._getScrollPosition([0,0],n)},e.drag=function(t,n){var e=t.clientX,r=t.clientY,i=n.threshold,o=void 0===i?0:i,a=this._startRect,s=this._startPos,u=[0,0];return a.top>r-o?(s[1]>a.top||r<s[1])&&(u[1]=-1):a.top+a.height<r+o&&(s[1]<a.top+a.height||r>s[1])&&(u[1]=1),a.left>e-o?(s[0]>a.left||e<s[0])&&(u[0]=-1):a.left+a.width<e+o&&(s[0]<a.left+a.width||e>s[0])&&(u[0]=1),clearTimeout(this._timer),!(!u[0]&&!u[1])&&this._continueDrag(Rn(Rn({},n),{direction:u,inputEvent:t,isDrag:!0}))},e.checkScroll=function(t){var n=this;if(this._isWait)return!1;var e=t.prevScrollPos,r=void 0===e?this._prevScrollPos:e,i=t.direction,o=t.throttleTime,a=void 0===o?0:o,s=t.inputEvent,u=t.isDrag,c=this._getScrollPosition(i||[0,0],t),l=c[0]-r[0],f=c[1]-r[1],p=i||[l?Math.abs(l)/l:0,f?Math.abs(f)/f:0];return this._prevScrollPos=c,!(!l&&!f)&&(this.trigger("move",{offsetX:p[0]?l:0,offsetY:p[1]?f:0,inputEvent:s}),a&&u&&(this._timer=window.setTimeout((function(){n._continueDrag(t)}),a)),!0)},e.dragEnd=function(){clearTimeout(this._timer)},e._getScrollPosition=function(t,n){var e=n.container,r=n.getScrollPosition;return(void 0===r?On:r)({container:e,direction:t})},e._continueDrag=function(t){var n=this,e=t.container,r=t.direction,i=t.throttleTime,o=t.useScroll,a=t.isDrag,s=t.inputEvent;if(!a||!this._isWait){var u=Date.now?Date.now():(new Date).getTime(),c=Math.max(i+this._prevTime-u,0);if(c>0)return this._timer=window.setTimeout((function(){n._continueDrag(t)}),c),!1;this._prevTime=u;var l=this._getScrollPosition(r,t);return this._prevScrollPos=l,a&&(this._isWait=!0),this.trigger("scroll",{container:e,direction:r,inputEvent:s}),this._isWait=!1,o||this.checkScroll(Rn(Rn({},t),{prevScrollPos:l,direction:r,inputEvent:s}))}},n}(Cn);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var _n=function(t,n){return(_n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};var zn=function(){return zn=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t},zn.apply(this,arguments)};function Bn(t){return 180*(n=[t[0].clientX,t[0].clientY],e=[t[1].clientX,t[1].clientY],r=e[0]-n[0],i=e[1]-n[1],((o=Math.atan2(i,r))>=0?o:o+2*Math.PI)/Math.PI);var n,e,r,i,o}function Gn(t){return t?t.touches?function(t){for(var n=Math.min(t.length,2),e=[],r=0;r<n;++r)e.push(An(t[r]));return e}(t.touches):[An(t)]:[]}function Tn(t,n,e){var r=e.length,i=Fn(t,r),o=i.clientX,a=i.clientY,s=i.originalClientX,u=i.originalClientY,c=Fn(n,r),l=c.clientX,f=c.clientY,p=Fn(e,r);return{clientX:s,clientY:u,deltaX:o-l,deltaY:a-f,distX:o-p.clientX,distY:a-p.clientY}}function kn(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function An(t){return{clientX:t.clientX,clientY:t.clientY}}function Fn(t,n){void 0===n&&(n=t.length);for(var e={clientX:0,clientY:0,originalClientX:0,originalClientY:0},r=0;r<n;++r){var i=t[r];e.originalClientX+="originalClientX"in i?i.originalClientX:i.clientX,e.originalClientY+="originalClientY"in i?i.originalClientY:i.clientY,e.clientX+=i.clientX,e.clientY+=i.clientY}return n?{clientX:e.clientX/n,clientY:e.clientY/n,originalClientX:e.originalClientX/n,originalClientY:e.originalClientY/n}:e}var In=function(){function t(t){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=t,this.prevClients=t,this.length=t.length}var n=t.prototype;return n.getAngle=function(t){return void 0===t&&(t=this.prevClients),Bn(t)},n.getRotation=function(t){return void 0===t&&(t=this.prevClients),Bn(t)-Bn(this.startClients)},n.getPosition=function(t,n){void 0===t&&(t=this.prevClients);var e=Tn(t||this.prevClients,this.prevClients,this.startClients),r=e.deltaX,i=e.deltaY;return this.movement+=Math.sqrt(r*r+i*i),this.prevClients=t,e},n.getPositions=function(t){void 0===t&&(t=this.prevClients);var n=this.prevClients;return this.startClients.map((function(e,r){return Tn([t[r]],[n[r]],[e])}))},n.getMovement=function(t){var n=this.movement;if(!t)return n;var e=Fn(t,this.length),r=Fn(this.prevClients,this.length),i=e.clientX-r.clientX,o=e.clientY-r.clientY;return Math.sqrt(i*i+o*o)+n},n.getDistance=function(t){return void 0===t&&(t=this.prevClients),kn(t)},n.getScale=function(t){return void 0===t&&(t=this.prevClients),kn(t)/kn(this.startClients)},n.move=function(t,n){this.startClients.forEach((function(e){e.clientX-=t,e.clientY-=n}))},t}(),jn=["textarea","input"];const Nn=function(t){function n(n,e){void 0===e&&(e={});var r=t.call(this)||this;r.options={},r.flag=!1,r.pinchFlag=!1,r.datas={},r.isDrag=!1,r.isPinch=!1,r.isMouse=!1,r.isTouch=!1,r.clientStores=[],r.targets=[],r.prevTime=0,r.doubleFlag=!1,r._dragFlag=!1,r.onDragStart=function(t,n){if(void 0===n&&(n=!0),r.flag||!1!==t.cancelable){var e=r.options,i=e.container,o=e.pinchOutside,a=e.preventWheelClick,s=e.preventRightClick,u=e.preventDefault,c=e.checkInput,l=r.isTouch,f=!r.flag;if(a&&(2===t.which||1===t.button)||s&&(3===t.which||2===t.button))return r.initDrag(),!1;if(f){var p=document.activeElement,d=t.target,h=d.tagName.toLowerCase(),v=jn.indexOf(h)>-1,g=d.isContentEditable;if(v||g){if(c||p===d)return!1;if(p&&g&&p.isContentEditable&&p.contains(d))return!1}else if((u||"touchstart"===t.type)&&p){var m=p.tagName;(p.isContentEditable||jn.indexOf(m)>-1)&&p.blur()}r.clientStores=[new In(Gn(t))],r.flag=!0,r.isDrag=!1,r._dragFlag=!0,r.datas={},r.doubleFlag=O()-r.prevTime<200,!1===r.emit("dragStart",zn(zn({datas:r.datas,inputEvent:t,isTrusted:n,isDouble:r.doubleFlag},r.getCurrentStore().getPosition()),{preventDefault:function(){t.preventDefault()},preventDrag:function(){r._dragFlag=!1}}))&&r.initDrag(),r.flag&&u&&t.preventDefault()}if(!r.flag)return!1;var b=0;if(f&&l&&o&&(b=setTimeout((function(){q(i,"touchstart",r.onDragStart,{passive:!1})}))),!f&&l&&o&&L(i,"touchstart",r.onDragStart),r.flag&&function(t){return t.touches&&t.touches.length>=2}(t)){if(clearTimeout(b),f&&t.touches.length!==t.changedTouches.length)return;r.pinchFlag||r.onPinchStart(t)}}},r.onDrag=function(t,n){if(r.flag){var e=Gn(t),i=r.moveClients(e,t,!1);if(r._dragFlag){if(r.pinchFlag||i.deltaX||i.deltaY)if(!1===r.emit("drag",zn(zn({},i),{isScroll:!!n,inputEvent:t})))return void r.stop();r.pinchFlag&&r.onPinch(t,e)}r.getCurrentStore().getPosition(e,!0)}},r.onDragEnd=function(t){if(r.flag){var n=r.options,e=n.pinchOutside,i=n.container;r.isTouch&&e&&L(i,"touchstart",r.onDragStart),r.pinchFlag&&r.onPinchEnd(t);var o=(null==t?void 0:t.touches)?Gn(t):[];0!==o.length&&r.options.keepDragging?r._addStore(new In(o)):r.flag=!1;var a=r._getPosition(),s=O(),u=!r.isDrag&&r.doubleFlag;r.prevTime=r.isDrag||u?0:s,r.flag||(r.emit("dragEnd",zn({datas:r.datas,isDouble:u,isDrag:r.isDrag,isClick:!r.isDrag,inputEvent:t},a)),r.clientStores=[])}},r.onBlur=function(){r.onDragEnd()};var i=[].concat(n);r.options=zn({checkInput:!1,container:i.length>1?window:i[0],preventRightClick:!0,preventWheelClick:!0,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},e);var o=r.options,a=o.container,s=o.events,u=o.checkWindowBlur;if(r.isTouch=s.indexOf("touch")>-1,r.isMouse=s.indexOf("mouse")>-1,r.targets=i,r.isMouse&&(i.forEach((function(t){q(t,"mousedown",r.onDragStart)})),q(a,"mousemove",r.onDrag),q(a,"mouseup",r.onDragEnd),q(a,"contextmenu",r.onDragEnd)),u&&q(window,"blur",r.onBlur),r.isTouch){var c={passive:!1};i.forEach((function(t){q(t,"touchstart",r.onDragStart,c)})),q(a,"touchmove",r.onDrag,c),q(a,"touchend",r.onDragEnd,c),q(a,"touchcancel",r.onDragEnd,c)}return r}!function(t,n){function e(){this.constructor=t}_n(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}(n,t);var e=n.prototype;return e.stop=function(){this.isDrag=!1,this.flag=!1,this.clientStores=[],this.datas={}},e.getMovement=function(t){return this.getCurrentStore().getMovement(t)+this.clientStores.slice(1).reduce((function(t,n){return t+n.movement}),0)},e.isDragging=function(){return this.isDrag},e.isFlag=function(){return this.flag},e.isPinchFlag=function(){return this.pinchFlag},e.isDoubleFlag=function(){return this.doubleFlag},e.isPinching=function(){return this.isPinch},e.scrollBy=function(t,n,e,r){void 0===r&&(r=!0),this.flag&&(this.clientStores[0].move(t,n),r&&this.onDrag(e,!0))},e.move=function(t,n){var e=t[0],r=t[1],i=this.getCurrentStore().prevClients;return this.moveClients(i.map((function(t){var n=t.clientX,i=t.clientY;return{clientX:n+e,clientY:i+r,originalClientX:n,originalClientY:i}})),n,!0)},e.triggerDragStart=function(t){this.onDragStart(t,!1)},e.setEventDatas=function(t){var n=this.datas;for(var e in t)n[e]=t[e];return this},e.getCurrentEvent=function(t){return zn(zn({datas:this.datas},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:t})},e.getEventDatas=function(){return this.datas},e.unset=function(){var t=this,n=this.targets,e=this.options.container;this.off(),L(window,"blur",this.onBlur),this.isMouse&&(n.forEach((function(n){L(n,"mousedown",t.onDragStart)})),L(e,"mousemove",this.onDrag),L(e,"mouseup",this.onDragEnd),L(e,"contextmenu",this.onDragEnd)),this.isTouch&&(n.forEach((function(n){L(n,"touchstart",t.onDragStart)})),L(e,"touchstart",this.onDragStart),L(e,"touchmove",this.onDrag),L(e,"touchend",this.onDragEnd),L(e,"touchcancel",this.onDragEnd))},e.onPinchStart=function(t){var n=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>n)){var e=new In(Gn(t));this.pinchFlag=!0,this._addStore(e),!1===this.emit("pinchStart",zn(zn({datas:this.datas,angle:e.getAngle(),touches:this.getCurrentStore().getPositions()},e.getPosition()),{inputEvent:t}))&&(this.pinchFlag=!1)}},e.onPinch=function(t,n){if(this.flag&&this.pinchFlag&&!(n.length<2)){var e=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",zn(zn({datas:this.datas,movement:this.getMovement(n),angle:e.getAngle(n),rotation:e.getRotation(n),touches:e.getPositions(n),scale:e.getScale(n),distance:e.getDistance(n)},e.getPosition(n)),{inputEvent:t}))}},e.onPinchEnd=function(t){if(this.pinchFlag){var n=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var e=this.getCurrentStore();this.emit("pinchEnd",zn(zn({datas:this.datas,isPinch:n,touches:e.getPositions()},e.getPosition()),{inputEvent:t}))}},e.initDrag=function(){this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1},e.getCurrentStore=function(){return this.clientStores[0]},e.moveClients=function(t,n,e){var r=this._getPosition(t,e);return(r.deltaX||r.deltaY)&&(this.isDrag=!0),zn(zn({datas:this.datas},r),{movement:this.getMovement(t),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:n})},e._addStore=function(t){this.clientStores.splice(0,0,t)},e._getPosition=function(t,n){var e=this.getCurrentStore().getPosition(t,n),r=this.clientStores.slice(1).reduce((function(t,n){var e=n.getPosition();return t.distX+=e.distX,t.distY+=e.distY,t}),e),i=r.distX,o=r.distY;return zn(zn({},e),{distX:i,distY:o})},n}(Cn);var Yn=function(t){for(var n=5381,e=t.length;e;)n=33*n^t.charCodeAt(--e);return n>>>0};function Xn(t,n,e,r){var i=document.createElement("style");return i.setAttribute("type","text/css"),i.setAttribute("data-styled-id",t),e.nonce&&i.setAttribute("nonce",e.nonce),i.innerHTML=function(t,n,e){return e.original?n:n.replace(/([^};{\s}][^};{]*|^\s*){/gm,(function(n,e){var r=e.trim();return(r?w(r):[""]).map((function(n){var e=n.trim();return 0===e.indexOf("@")?e:e.indexOf(":global")>-1?e.replace(/\:global/g,""):e.indexOf(":host")>-1?""+e.replace(/\:host/g,"."+t):e?"."+t+" "+e:"."+t})).join(", ")+" {"}))}(t,n,e),(r||document.head||document.body).appendChild(i),i}function Wn(t){var n,e="rCS"+Yn(t).toString(36),r=0;return{className:e,inject:function(i,o){void 0===o&&(o={});var a,s=function(t){if(t&&t.getRootNode){var n=t.getRootNode();if(11===n.nodeType)return n}}(i),u=0===r;return(s||u)&&(a=Xn(e,t,o,s)),u&&(n=a),s||++r,{destroy:function(){s?(i.removeChild(a),a=null):(r>0&&--r,0===r&&n&&(n.parentNode.removeChild(n),n=null))}}}}}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var qn=function(t,n){return(qn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};function Ln(t,n){function e(){this.constructor=t}qn(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}var Hn=function(){return Hn=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t},Hn.apply(this,arguments)};var Vn=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.injectResult=null,n.tag="div",n}Ln(e,t);var r=e.prototype;return r.render=function(){var t=this.props,e=t.className,r=void 0===e?"":e;t.cspNonce;var i=t.portalContainer,o=function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]])}return e}(t,["className","cspNonce","portalContainer"]),a=this.injector.className,s=this.tag,u={};return"simple-1.1.0".indexOf("simple")>-1&&i&&(u={portalContainer:i}),it(s,Hn({ref:n(this,"element"),"data-styled-id":a,className:r+" "+a},u,o))},r.componentDidMount=function(){this.injectResult=this.injector.inject(this.element,{nonce:this.props.cspNonce})},r.componentWillUnmount=function(){this.injectResult.destroy(),this.injectResult=null},r.getElement=function(){return this.element},e}(ht);function Un(t,n){var e=Wn(n);return function(n){function r(){var r=null!==n&&n.apply(this,arguments)||this;return r.injector=e,r.tag=t,r}return Ln(r,n),r}(Vn)}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var $n=function(){return $n=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t},$n.apply(this,arguments)};var Zn=function(){function t(){this._events={}}var n=t.prototype;return n.on=function(t,n){if(v(t))for(var e in t)this.on(e,t[e]);else this._addEvent(t,n,{});return this},n.off=function(t,n){if(t)if(v(t))for(var e in t)this.off(e);else if(n){var r=this._events[t];if(r){var i=P(r,(function(t){return t.listener===n}));i>-1&&r.splice(i,1)}}else this._events[t]=[];else this._events={};return this},n.once=function(t,n){var e=this;return n&&this._addEvent(t,n,{once:!0}),new Promise((function(n){e._addEvent(t,n,{once:!0})}))},n.emit=function(t,n){var e=this;void 0===n&&(n={});var r=this._events[t];if(!t||!r)return!0;var i=!1;return n.eventType=t,n.stop=function(){i=!0},n.currentTarget=this,function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;var r=Array(t),i=0;for(n=0;n<e;n++)for(var o=arguments[n],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}(r).forEach((function(r){r.listener(n),r.once&&e.off(t,r.listener)})),!i},n.trigger=function(t,n){return void 0===n&&(n={}),this.emit(t,n)},n._addEvent=function(t,n,e){var r=this._events;r[t]=r[t]||[],r[t].push($n({listener:n},e))},t}(),Kn=function(t,n){return(Kn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])})(t,n)};function Jn(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function e(){this.constructor=t}Kn(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}var Qn=function(){return Qn=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t},Qn.apply(this,arguments)};function te(t,n,e){if(e||2===arguments.length)for(var r,i=0,o=n.length;i<o;i++)!r&&i in n||(r||(r=Array.prototype.slice.call(n,0,i)),r[i]=n[i]);return t.concat(r||Array.prototype.slice.call(n))}function ne(t,n){var e;return Qn({events:{},props:(e={},e[t]=Boolean,e),name:t},n)}var ee,re,ie,oe=void 0===ee&&function(){if("undefined"==typeof navigator||!navigator||!navigator.userAgentData)return!1;var t=navigator.userAgentData,n=t.brands||t.uaList;return!(!n||!n.length)}()?function(t){var n=navigator.userAgentData,e=(n.uaList||n.brands).slice(),r=t&&t.fullVersionList,i=n.mobile||!1,o=e[0],a=(t&&t.platform||n.platform||navigator.platform).toLowerCase(),s={name:o.brand,version:o.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!Rt(Bt,e).brand||Tt(Mt())},u={name:"unknown",version:"-1",majorVersion:-1};s.webkit=!s.chromium&&Et(zt,(function(t){return Ot(e,t)}));var c=Rt(_t,e);if(s.chromium=!!c.brand,s.chromiumVersion=c.version,!s.chromium){var l=Rt(zt,e);s.webkit=!!l.brand,s.webkitVersion=l.version}var f=St(Gt,(function(t){return new RegExp(""+t.test,"g").exec(a)}));if(u.name=f?f.id:"",t&&(u.version=t.platformVersion),r&&r.length){var p=Rt(Pt,r);s.name=p.brand||s.name,s.version=p.version||s.version}else{var d=Rt(Pt,e);s.name=d.brand||s.name,s.version=d.brand&&t?t.uaFullVersion:d.version}return s.webkit&&(u.name=i?"ios":"mac"),"ios"===u.name&&s.webview&&(s.version="-1"),u.version=Ct(u.version),s.version=Ct(s.version),u.majorVersion=parseInt(u.version,10),s.majorVersion=parseInt(s.version,10),{browser:s,os:u,isMobile:i,isHints:!0}}():function(t){var n=Mt(t),e=!!/mobi/g.exec(n),r={name:"unknown",version:"-1",majorVersion:-1,webview:Tt(n),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},i={name:"unknown",version:"-1",majorVersion:-1},o=Dt(Pt,n),a=o.preset,s=o.version,u=Dt(Gt,n),c=u.preset,l=u.version,f=Dt(_t,n);if(r.chromium=!!f.preset,r.chromiumVersion=f.version,!r.chromium){var p=Dt(zt,n);r.webkit=!!p.preset,r.webkitVersion=p.version}return c&&(i.name=c.id,i.version=l,i.majorVersion=parseInt(l,10)),a&&(r.name=a.id,r.version=s,r.webview&&"ios"===i.name&&"safari"!==r.name&&(r.webview=!1)),r.majorVersion=parseInt(r.version,10),{browser:r,os:i,isMobile:e,isHints:!1}}(ee),ae=oe.browser.webkit,se=ae&&(re="undefined"==typeof window?{userAgent:""}:window.navigator,!!(ie=/applewebkit\/([^\s]+)/g.exec(re.userAgent.toLowerCase()))&&parseFloat(ie[1])<605),ue="moveable-",ce="\n{\n\tposition: absolute;\n\twidth: 1px;\n\theight: 1px;\n\tleft: 0;\n\ttop: 0;\n    z-index: 3000;\n    --moveable-color: #4af;\n    --zoom: 1;\n    --zoompx: 1px;\n    will-change: transform;\n}\n.control-box {\n    z-index: 0;\n}\n.line, .control {\n    position: absolute;\n\tleft: 0;\n    top: 0;\n    will-change: transform;\n}\n.control {\n\twidth: 14px;\n\theight: 14px;\n\tborder-radius: 50%;\n\tborder: 2px solid #fff;\n\tbox-sizing: border-box;\n    background: #4af;\n    background: var(--moveable-color);\n\tmargin-top: -7px;\n    margin-left: -7px;\n    border: 2px solid #fff;\n    z-index: 10;\n}\n.padding {\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    width: 100px;\n    height: 100px;\n    transform-origin: 0 0;\n}\n.line {\n\twidth: 1px;\n    height: 1px;\n    background: #4af;\n    background: var(--moveable-color);\n\ttransform-origin: 0px 50%;\n}\n.line.dashed {\n    box-sizing: border-box;\n    background: transparent;\n}\n.line.dashed.horizontal {\n    border-top: 1px dashed #4af;\n    border-top-color: #4af;\n    border-top-color: var(--moveable-color);\n}\n.line.dashed.vertical {\n    border-left: 1px dashed #4af;\n    border-left-color: #4af;\n    border-left-color: var(--moveable-color);\n}\n.line.vertical {\n    transform: translateX(-50%);\n}\n.line.horizontal {\n    transform: translateY(-50%);\n}\n.line.vertical.bold {\n    width: 2px;\n}\n.line.horizontal.bold {\n    height: 2px;\n}\n\n.control.origin {\n\tborder-color: #f55;\n\tbackground: #fff;\n\twidth: 12px;\n\theight: 12px;\n\tmargin-top: -6px;\n    margin-left: -6px;\n\tpointer-events: none;\n}\n".concat([0,15,30,45,60,75,90,105,120,135,150,165].map((function(t){return'\n.direction[data-rotation="'.concat(t,'"] {\n\t').concat(function(t){var n=function(t,n){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*t,'px" height="').concat(32*t,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(n,'deg);transform-origin: 16px 16px"></path></svg>')}(1,t),e=45*Math.round(t/45)%180,r="ns-resize";return 135===e?r="nwse-resize":45===e?r="nesw-resize":90===e&&(r="ew-resize"),"cursor:".concat(r,";cursor: url('").concat(n,"') 16 16, ").concat(r,";")}(t),"\n}\n")})).join("\n"),"\n.group {\n    z-index: -1;\n}\n.area {\n    position: absolute;\n}\n.area-pieces {\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: none;\n}\n.area.avoid, .area.pass {\n    pointer-events: none;\n}\n.area.avoid+.area-pieces {\n    display: block;\n}\n.area-piece {\n    position: absolute;\n}\n\n").concat(se?':global svg *:before {\n\tcontent:"";\n\ttransform-origin: inherit;\n}':"","\n"),le=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],fe=Math.pow(10,10),pe=-fe,de=["n","w","s","e","nw","ne","sw","se"],he={n:[0,1],s:[2,3],w:[2,0],e:[1,3],nw:[0],ne:[1],sw:[2],se:[3]},ve={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},ge=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate"];function me(t,n,e,r,i){var o=n.gesto.move(e,t.inputEvent),a=o.originalDatas||o.datas,s=a.draggable||(a.draggable={});return Qn(Qn({},i?Yi(n,o):o),{isPinch:!!r,parentEvent:!0,datas:s,originalDatas:t.originalDatas})}var be=function(){function t(){this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}}}var n=t.prototype;return n.dragStart=function(t,n){this.isDrag=!1,this.isFlag=!1;var e=n.originalDatas;return this.datas=e,e.draggable||(e.draggable={}),Qn(Qn({},this.move(t,n.inputEvent)),{type:"dragstart"})},n.drag=function(t,n){return this.move([t[0]-this.prevX,t[1]-this.prevY],n)},n.move=function(t,n){var e,r;return this.isFlag?(e=this.prevX+t[0],r=this.prevY+t[1],(t[0]||t[1])&&(this.isDrag=!0)):(this.prevX=t[0],this.prevY=t[1],this.startX=t[0],this.startY=t[1],e=t[0],r=t[1],this.isFlag=!0),this.prevX=e,this.prevY=r,{type:"drag",clientX:e,clientY:r,inputEvent:n,isDrag:this.isDrag,distX:e-this.startX,distY:r-this.startY,deltaX:t[0],deltaY:t[1],datas:this.datas.draggable,originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t}();function xe(t,n,e){var r=e.originalDatas;r.groupable=r.groupable||{};var i=r.groupable;i.childDatas=i.childDatas||[];var o=i.childDatas;return t.moveables.map((function(t,r){return o[r]=o[r]||{},o[r][n]=o[r][n]||{},Qn(Qn({},e),{datas:o[r][n],originalDatas:o[r]})}))}function ye(t,n,e,r,i,o){var a=!!e.match(/Start$/g),s=!!e.match(/End$/g),u=i.isPinch,c=i.datas,l=xe(t,n.name,i),f=t.moveables,p=l.map((function(t,i){var l=f[i],p=l.state,d=t;if(a)d=(new be).dragStart(r,t);else{if(p.gesto||(p.gesto=c.childGestos[i]),!p.gesto)return;d=me(t,p,r,u,o)}var h=n[e](l,Qn(Qn({},d),{parentFlag:!0}));return s&&(p.gesto=null),h}));return a&&(c.childGestos=f.map((function(t){return t.state.gesto}))),p}function Ee(t,n,e,r,i,o){void 0===i&&(i=function(t,n){return n});var a=!!e.match(/End$/g),s=xe(t,n.name,r),u=t.moveables;return s.map((function(t,r){var s,c=u[r];s=i(c,t);var l=n[e](c,Qn(Qn({},s),{parentFlag:!0}));return l&&o&&o(c,t,l,r),a&&(c.state.gesto=null),l}))}function Se(t,n,e,r){void 0===r&&(r="");var i=t.state,o=i.renderPoses,a=i.rotation,s=i.direction,u=t.props,c=u.renderDirections,l=void 0===c?n:c,f=u.zoom,p={};if(!l)return[];var d=s>0?1:-1,h=!0===l?de:l,v=a/Math.PI*180;return h.forEach((function(t){p[t]=!0})),h.map((function(t){var n=he[t];if(!n||!p[t])return null;var i=(Y(v,15)+d*ve[t]+720)%180;return e.createElement("div",{className:Jr("control","direction",t,r),"data-rotation":i,"data-direction":t,key:"direction-".concat(t),style:Mi.apply(void 0,te([a,f],n.map((function(t){return o[t]})),!1))})}))}function Me(t,n,e,r,i,o){for(var a=[],s=6;s<arguments.length;s++)a[s-6]=arguments[s];var u=I(e,r),c=n?Y(u/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line".concat(o),className:Jr.apply(void 0,te(["line","direction",n],a,!1)),"data-rotation":c,"data-line-index":o,"data-direction":n,style:Si(e,r,i,u)})}function we(t,n){return Se(t,de,n)}function Ce(t,n){return Se(t,["nw","ne","sw","se"],n)}function De(t,n,e,r,i,o){var a=t.state.is3d?4:3,s=vi(t.state.rootMatrix,i,a),u=qt([o.left,o.top],s);n.startAbsoluteOrigin=u,n.prevDeg=I(u,[e,r])/Math.PI*180,n.defaultDeg=n.prevDeg,n.prevSnapDeg=0,n.loop=0}function Re(t,n,e){var r=e.defaultDeg,i=e.prevDeg,o=i%360,a=Math.floor(i/360);o<0&&(o+=360),o>t&&o>270&&t<90?++a:o<t&&o<90&&t>270&&--a;var s=n*(360*a+t-r);return e.prevDeg=r+s,s}function Oe(t,n,e,r){return Re(I(r.startAbsoluteOrigin,[t,n])/Math.PI*180,e,r)}function Pe(t,n,e,r,i,o){var a=t.props.throttleRotate,s=void 0===a?0:a,u=r,c=e.prevSnapDeg;o&&(u=function(t,n,e,r){if(!Ae(t,"rotatable"))return r;var i=n.pos1,o=n.pos2,a=n.pos3,s=n.pos4,u=r*Math.PI/180,c=[i,o,a,s].map((function(t){return Lt(t,e)})),l=c.map((function(t){return Jt(t,u)})),f=te(te([],function(t,n,e,r,i){if(!t.props.bounds)return[];var o=i*Math.PI/180,a=ar(t),s=a.left,u=a.top,c=a.right,l=a.bottom,f=s-r[0],p=c-r[0],d=u-r[1],h=l-r[1],v={left:f,top:d,right:p,bottom:h};if(!ur(e,v,0))return[];var g=[];return[[f,0],[p,0],[d,1],[h,1]].forEach((function(t){var r=t[0],i=t[1];e.forEach((function(t){var e=I([0,0],t);g.push.apply(g,function(t,n,e){var r=yi(t),i=Math.sqrt(r*r-n*n)||0;return[i,-i].sort((function(n,r){return Math.abs(n-t[e?0:1])-Math.abs(r-t[e?0:1])})).map((function(t){return I([0,0],e?[t,n]:[n,t])}))}(t,r,i).map((function(t){return o+t-e})).filter((function(t){return!ur(n,v,t)})).map((function(t){return Y(180*t/Math.PI,1e-7)})))}))})),g}(t,c,l,e,r),!0),function(t,n,e,r,i){var o=t.props.innerBounds,a=i*Math.PI/180;if(!o)return[];var s=o.left,u=o.top,c=o.width,l=o.height,f=s-r[0],p=s+c-r[0],d=u-r[1],h=u+l-r[1],v=[[f,d],[p,d],[f,h],[p,h]],g=jr(e,[0,0]);if(!ir(e,v,g,0))return[];var m=[],b=v.map((function(t){return[yi(t),I([0,0],t)]}));return[[e[0],e[1]],[e[1],e[3]],[e[3],e[2]],[e[2],e[0]]].forEach((function(t){var e=I([0,0],function(t){var n=t[0],e=t[1],r=e[0]-n[0],i=e[1]-n[1];if(!r)return[n[0],0];if(!i)return[0,n[1]];var o=i/r,a=-o*n[0]+n[1];return[-a/(o+1/o),a/(o*o+1)]}(t)),r=function(t){var n=t[0],e=t[1],r=e[0]-n[0],i=e[1]-n[1];if(!r)return Math.abs(n[0]);if(!i)return Math.abs(n[1]);var o=i/r;return Math.abs((-o*n[0]+n[1])/Math.sqrt(Math.pow(o,2)+1))}(t);m.push.apply(m,b.filter((function(t){var n=t[0];return n&&r<=n})).map((function(t){var n=t[0],i=t[1],o=Math.acos(n?r/n:0);return[a+(i+o)-e,a+(i-o)-e]})).reduce((function(t,n){return t.push.apply(t,n),t}),[]).filter((function(t){return!ir(n,v,g,t)})).map((function(t){return Y(180*t/Math.PI,1e-7)})))})),m}(t,c,l,e,r),!0);return f.sort((function(t,n){return Math.abs(t-r)-Math.abs(n-r)})),f.length?f[0]:r}(t,n,e.origin,u));var l=Y(i+u,s),f=l-i;return e.prevSnapDeg=f,[f-c,u,l]}function _e(t,n){if(n.isRequest)return"rotatable"===n.requestAble;var e=n.inputEvent.target;if(W(e,Jr("rotation-control")))return!0;var r=t.props.rotationTarget;return!!r&&Ui(r,!0).some((function(t){return!!t&&(e===t||e.contains(t))}))}var ze={name:"rotatable",canPinch:!0,props:{rotatable:Boolean,rotationPosition:String,throttleRotate:Number,renderDirections:Object,rotationTarget:Object},events:{onRotateStart:"rotateStart",onBeforeRotate:"beforeRotate",onRotate:"rotate",onRotateEnd:"rotateEnd",onRotateGroupStart:"rotateGroupStart",onBeforeRotateGroup:"beforeRotateGroup",onRotateGroup:"rotateGroup",onRotateGroupEnd:"rotateGroupEnd"},css:[".rotation {\n            position: absolute;\n            height: 40px;\n            width: 1px;\n            transform-origin: 50% 100%;\n            height: calc(40px * var(--zoom));\n            top: auto;\n            left: 0;\n            bottom: 100%;\n            will-change: transform;\n        }\n        .rotation .rotation-line {\n            display: block;\n            width: 100%;\n            height: 100%;\n            transform-origin: 50% 50%;\n        }\n        .rotation .rotation-control {\n            border-color: #4af;\n            border-color: var(--moveable-color);\n            background:#fff;\n            cursor: alias;\n        }"],render:function(t,n){var e=t.props,r=e.rotatable,i=e.rotationPosition,o=e.zoom,a=e.renderDirections,s=t.state,u=s.renderPoses,c=s.direction;if(!r)return null;var l=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=n[3];if("none"!==t){var s=(t||"top").split("-"),u=s[0],c=s[1],l=[r,i];"left"===u?l=[o,r]:"right"===u?l=[i,a]:"bottom"===u&&(l=[a,o]);var f=[(l[0][0]+l[1][0])/2,(l[0][1]+l[1][1])/2],p=Ci(l,e);if(c){var d="top"===c||"left"===c,h="bottom"===u||"left"===u;f=l[d&&!h||!d&&h?0:1]}return[f,p]}}(i,u,c),f=[];if(l){var p=l[0],d=l[1];f.push(n.createElement("div",{key:"rotation",className:Jr("rotation"),style:{transform:"translate(-50%) translate(".concat(p[0],"px, ").concat(p[1],"px) rotate(").concat(d,"rad)")}},n.createElement("div",{className:Jr("line rotation-line"),style:{transform:"scaleX(".concat(o,")")}}),n.createElement("div",{className:Jr("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(o,")")}})))}return a&&f.push.apply(f,Se(t,[],n)),f},dragControlCondition:_e,dragControlStart:function(t,n){var e=n.datas,r=n.clientX,i=n.clientY,o=n.parentRotate,a=n.parentFlag,s=n.isPinch,u=n.isRequest,c=t.state,l=c.target,f=c.left,p=c.top,d=c.origin,h=c.beforeOrigin,v=c.direction,g=c.beforeDirection,m=c.targetTransform,b=c.moveableClientRect;if(!u&&!l)return!1;var x=t.getRect();if(e.rect=x,e.transform=m,e.left=f,e.top=p,e.fixedPosition=$r(t,Ur(t)),u||s||a){var y=o||0;e.beforeInfo={origin:x.beforeOrigin,prevDeg:y,defaultDeg:y,prevSnapDeg:0},e.afterInfo=Qn(Qn({},e.beforeInfo),{origin:x.origin}),e.absoluteInfo=Qn(Qn({},e.beforeInfo),{origin:x.origin,startValue:y})}else e.beforeInfo={origin:x.beforeOrigin},e.afterInfo={origin:x.origin},e.absoluteInfo={origin:x.origin,startValue:x.rotation},De(t,e.beforeInfo,r,i,h,b),De(t,e.afterInfo,r,i,d,b),De(t,e.absoluteInfo,r,i,d,b);e.direction=v,e.beforeDirection=g,e.startValue=0,e.datas={},Xr(n,"rotate");var E=Bi(t,n,Qn(Qn({set:function(t){e.startValue=t*Math.PI/180}},Yr(n)),{dragStart:Pr.dragStart(t,(new be).dragStart([0,0],n))})),S=ki(t,"onRotateStart",E);return e.isRotate=!1!==S,t.state.snapRenderInfo={request:n.isRequest},!!e.isRotate&&E},dragControl:function(t,n){var e,r,i,o=n.datas,a=n.clientX,s=n.clientY,u=n.parentRotate,c=n.parentFlag,l=n.isPinch,f=n.groupDelta,p=o.beforeDirection,d=o.beforeInfo,h=o.afterInfo,v=o.absoluteInfo,g=o.isRotate,m=o.startValue,b=o.rect;if(g){Br(n,"rotate");var x,y,E,S,M,w,C,D,R,O=function(t){return xi(t.datas.beforeTransform,[50,50],100,100).direction}(n),P=p*O,_=t.props.parentMoveable,z=180/Math.PI*m,B=v.startValue,G=!1;if(!c&&"parentDist"in n){var T=n.parentDist;y=T,M=T,D=T}else l||c?(y=Re(u,p,d),M=Re(u,P,h),D=Re(u,P,v)):(y=Oe(a,s,p,d),M=Oe(a,s,P,h),D=Oe(a,s,P,v),G=!0);if(ki(t,"onBeforeRotate",Bi(t,n,{beforeRotation:E=z+y,rotation:w=z+M,absoluteRotation:R=B+D,setRotation:function(t){y=M=t-z,D=M}},!0)),x=(e=Pe(t,b,d,y,z,G))[0],y=e[1],E=e[2],S=(r=Pe(t,b,h,M,z,G))[0],M=r[1],w=r[2],C=(i=Pe(t,b,v,D,B,G))[0],D=i[1],R=i[2],C||S||x||_){var k=Gr(o,"rotate(".concat(w,"deg)"),"rotate(".concat(M,"deg)")),A=function(t,n,e,r){var i=Ur(t);return Vr(t,"rotate(".concat(n,"deg)"),i,e,r)}(t,M,o.fixedPosition,o),F=Lt(qt(f||[0,0],A),o.prevInverseDist||[0,0]);o.prevInverseDist=A,o.requestValue=null;var I=Bi(t,n,Qn({delta:S,dist:M,rotate:w,rotation:w,beforeDist:y,beforeDelta:x,beforeRotate:E,beforeRotation:E,absoluteDist:D,absoluteDelta:C,absoluteRotate:R,absoluteRotation:R,isPinch:!!l},Hr(t,k,F,l,n)));return ki(t,"onRotate",I),I}}},dragControlAfter:function(t,n){n.datas.requestValue},dragControlEnd:function(t,n){var e=n.datas;if(e.isRotate){e.isRotate=!1;var r=Gi(t,n,{});return ki(t,"onRotateEnd",r),r}},dragGroupControlCondition:_e,dragGroupControlStart:function(t,n){var e=n.datas,r=t.state,i=r.left,o=r.top,a=r.beforeOrigin,s=this.dragControlStart(t,n);if(!s)return!1;s.set(e.beforeDirection*t.rotation);var u=Ee(t,this,"dragControlStart",n,(function(t,n){var e=t.state,r=e.left,s=e.top,u=e.beforeOrigin,c=qt(Lt([r,s],[i,o]),Lt(u,a));return n.datas.groupClient=c,Qn(Qn({},n),{parentRotate:0})})),c=ki(t,"onRotateGroupStart",Qn(Qn({},s),{targets:t.props.targets,events:u}));return e.isRotate=!1!==c,!!e.isRotate&&s},dragGroupControl:function(t,n){var e=n.datas;if(e.isRotate){Ti(t,"onBeforeRotate",(function(e){ki(t,"onBeforeRotateGroup",Bi(t,n,Qn(Qn({},e),{targets:t.props.targets}),!0))}));var r=this.dragControl(t,n);if(r){var i=e.beforeDirection,o=r.beforeDist,a=r.beforeDelta/180*Math.PI,s=Ee(t,this,"dragControl",n,(function(t,n){var e=n.datas.groupClient,r=e[0],s=e[1],u=Jt([r,s],a*i),c=u[0],l=u[1],f=[c-r,l-s];return n.datas.groupClient=[c,l],Qn(Qn({},n),{parentRotate:o,groupDelta:f})}));t.rotation=i*r.beforeRotation;var u=Qn({targets:t.props.targets,events:s,set:function(n){t.rotation=n},setGroupRotation:function(n){t.rotation=n}},r);return ki(t,"onRotateGroup",u),u}}},dragGroupControlEnd:function(t,n){var e=n.isDrag;if(n.datas.isRotate){this.dragControlEnd(t,n);var r=Ee(t,this,"dragControlEnd",n);return ki(t,"onRotateGroupEnd",Gi(t,n,{targets:t.props.targets,events:r})),e}},request:function(t){var n={},e=0,r=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:n}},request:function(t){return"deltaRotate"in t?e+=t.deltaRotate:"rotate"in t&&(e=t.rotate-r),{datas:n,parentDist:e}},requestEnd:function(){return{datas:n,isDrag:!0}}}}},Be=["left","right","center"],Ge=["top","bottom","middle"],Te={start:"left",end:"right",center:"center"},ke={start:"top",end:"bottom",center:"middle"};function Ae(t,n){var e=t.props,r=e.snappable,i=e.bounds,o=e.innerBounds,a=e.verticalGuidelines,s=e.horizontalGuidelines,u=e.snapGridWidth,c=e.snapGridHeight,l=t.state,f=l.guidelines,p=l.enableSnap;return!(!r||!p||n&&!0!==r&&r.indexOf(n)<0)&&!!(u||c||i||o||f&&f.length||a&&a.length||s&&s.length)}function Fe(t){return!1===t?{}:!0!==t&&t?t:{left:!0,right:!0,top:!0,bottom:!0}}function Ie(t,n){var e=function(t,n){var e=Fe(t),r={};for(var i in e)i in n&&e[i]&&(r[i]=n[i]);return r}(t,n),r=Ge.filter((function(t){return t in e})),i=Be.filter((function(t){return t in e}));return{horizontal:r.map((function(t){return e[t]})),vertical:i.map((function(t){return e[t]}))}}function je(t,n,e,r,i,o,a){void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a={left:0,top:0,right:0,bottom:0});var s=[],u=a.left,c=a.top,l=a.bottom,f=e+a.right-u,p=r+l-c;return t&&t.forEach((function(t){s.push({type:"horizontal",pos:[u,Y(t-o+c,.1)],size:f})})),n&&n.forEach((function(t){s.push({type:"vertical",pos:[Y(t-i+u,.1),c],size:p})})),s}function Ne(t,n){if(!n.length)return[];var e=t.state,r=e.containerClientRect,i=e.targetClientRect,o=i.top,a=i.left,s=e.rootMatrix,u=e.is3d?4:3,c=function(t,n,e){var r=vi(t,[n.clientLeft,n.clientTop],e);return[n.left+r[0],n.top+r[1]]}(s,r,u),l=c[0],f=c[1],p=mn(_i(e)),d=Lt([p.minX,p.minY],Ni(s,[a-l,o-f],u)).map((function(t){return n=t,Math.round(n%1==-.5?n-1:n);var n})),h=d[0],v=d[1];return n.map((function(t){var n=t.element.getBoundingClientRect(),e=n.left-l,r=n.top-f,i=r+n.height,o=e+n.width,a=Ni(s,[e,r],u),c=a[0],p=a[1],d=Ni(s,[o,i],u),g=d[0],m=d[1];return Qn(Qn({},t),{rect:{left:c+h,right:g+h,top:p+v,bottom:m+v,center:(c+g)/2+h,middle:(p+m)/2+v}})}))}function Ye(t){var n=t.state,e=t.props.elementGuidelines,r=void 0===e?[]:e;if(!r.length)return n.elementRects=[],[];var i,o,a=(n.elementRects||[]).filter((function(t){return!t.refresh})),s=r.map((function(t){return v(t)&&"element"in t?t:{element:Vi(t,!0)}})).filter((function(t){return t.element})),u=(i=a.map((function(t){return t.element})),o=s.map((function(t){return t.element})),c(i,o,pn)),l=u.maintained,f=u.added,p=[];l.forEach((function(t){var n=t[0],e=t[1];p[e]=a[n]})),Ne(t,f.map((function(t){return s[t]}))).map((function(t,n){p[f[n]]=t})),n.elementRects=p;var d=Fe(t.props.elementSnapDirections),h=[];return p.forEach((function(t){var n=t.element,e=t.top,r=void 0===e?d.top:e,i=t.left,o=void 0===i?d.left:i,a=t.right,s=void 0===a?d.right:a,u=t.bottom,c=void 0===u?d.bottom:u,l=t.center,f=void 0===l?d.center:l,p=t.middle,v=void 0===p?d.middle:p,g=t.className,m=t.rect,b=Ie({top:r,right:s,left:o,bottom:c,center:f,middle:v},m),x=b.horizontal,y=b.vertical,E=m.top,S=m.left,M=m.right-S,w=m.bottom-E,C=[M,w];y.forEach((function(e){h.push({type:"vertical",element:n,pos:[Y(e,.1),E],size:w,sizes:C,className:g,elementRect:t})})),x.forEach((function(e){h.push({type:"horizontal",element:n,pos:[S,Y(e,.1)],size:M,sizes:C,className:g,elementRect:t})}))})),h}function Xe(t){var n=t.state,e=n.snapOffset,r=n.containerClientRect,i=r.overflow,o=r.scrollHeight,a=r.scrollWidth,s=r.clientHeight,u=r.clientWidth,c=r.clientLeft,l=r.clientTop,f=t.props,p=f.snapGap,d=void 0===p||p,h=f.verticalGuidelines,v=f.horizontalGuidelines,g=f.snapThreshold,m=void 0===g?5:g,b=f.snapGridWidth,x=void 0===b?0:b,y=f.snapGridHeight,E=void 0===y?0:y,S=te([],Ye(t),!0);if(d){var M=mi(_i(t.state)),w=M.top,C=M.left,D=M.bottom,R=M.right;S.push.apply(S,function(t,n,e){var r=t.state.elementRects,i=[];return[["vertical",Te,ke],["horizontal",ke,Te]].forEach((function(t){var o=t[0],a=t[1],s=t[2],u=n[a.start],c=n[a.end],l=n[a.center],f=n[s.start],p=n[s.end];function d(t){var n=t.rect;return n[a.end]<u+e?u-n[a.end]:c-e<n[a.start]?n[a.start]-c:-1}var h=r.filter((function(t){var n=t.rect;return!(n[s.start]>p||n[s.end]<f)&&d(t)>0})).sort((function(t,n){return d(t)-d(n)})),v=[];h.forEach((function(t){h.forEach((function(n){if(t!==n){var e=t.rect,r=n.rect,i=e[s.start],o=e[s.end],a=r[s.start];i>r[s.end]||a>o||v.push([t,n])}}))})),v.forEach((function(t){var n=t[0],r=t[1],s=n.rect,f=r.rect,p=s[a.start],d=s[a.end],h=f[a.start],v=f[a.end],g=0,m=0,b=!1,x=!1,y=!1;if(d<=u&&c<=h){if(x=!0,m=d+(g=(h-d-(c-u))/2)+(c-u)/2,Math.abs(m-l)>e)return}else if(d<h&&v<u+e){if(b=!0,m=v+(g=h-d),Math.abs(m-u)>e)return}else{if(!(d<h&&c-e<p))return;if(y=!0,m=p-(g=h-d),Math.abs(m-c)>e)return}g&&i.push({type:o,pos:"vertical"===o?[m,0]:[0,m],element:r.element,size:0,className:r.className,isStart:b,isCenter:x,isEnd:y,gap:g,hide:!0,gapRects:[n,r]})}))})),i}(t,{top:w,left:C,bottom:D,right:R,center:(C+R)/2,middle:(w+D)/2},m))}return S.push.apply(S,function(t,n,e,r,i,o){void 0===i&&(i=0);void 0===o&&(o=0);var a=[];if(n)for(var s=0;s<=r;s+=n)a.push({type:"horizontal",pos:[0,Y(s-o,.1)],size:e,hide:!0});if(t)for(s=0;s<=e;s+=t)a.push({type:"vertical",pos:[Y(s-i,.1),0],size:r,hide:!0});return a}(x,E,i?a:u,i?o:s,c,l)),S.push.apply(S,je(v||!1,h||!1,i?a:u,i?o:s,c,l,e)),S}function We(t,n,e,r){var i=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var e=t.length-1,r=0;r<e;++r){var i=t[r];if(!h(i))return i}return t[e]}(r,t.props.snapThreshold,5);return qe(t.state.guidelines,n,e,i)}function qe(t,n,e,r){return{vertical:Ve(t,"vertical",n,r),horizontal:Ve(t,"horizontal",e,r)}}function Le(t,n,e){var r=Ie(t.props.snapDirections,n);return We(t,r.vertical,r.horizontal,e)}function He(t){var n=t.isSnap;if(!n)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var e=t.posInfos[0],r=e.guidelineInfos[0],i=r.offset,o=r.dist,a=r.guideline;return{isSnap:n,offset:i,dist:o,pos:e.pos,guideline:a}}function Ve(t,n,e,r){if(!t||!t.length)return{isSnap:!1,index:-1,posInfos:[]};var i="vertical"===n?0:1,o=e.map((function(e,o){var a=t.map((function(t){var n=t.pos,r=e-n[i];return{offset:r,dist:Math.abs(r),guideline:t}})).filter((function(t){var e=t.guideline,i=t.dist;return!(e.type!==n||i>r)})).sort((function(t,n){return t.dist-n.dist}));return{pos:e,index:o,guidelineInfos:a}})).filter((function(t){return t.guidelineInfos.length>0})).sort((function(t,n){return t.guidelineInfos[0].dist-n.guidelineInfos[0].dist})),a=o.length>0;return{isSnap:a,index:a?o[0].index:-1,posInfos:o}}function Ue(t,n){var e=Math.abs(t.offset),r=Math.abs(n.offset);return t.isBound&&n.isBound?r-e:t.isBound?-1:n.isBound?1:t.isSnap&&n.isSnap?r-e:t.isSnap?-1:n.isSnap||e<1e-7?1:r<1e-7?-1:e-r}function $e(t,n){return t.slice().sort((function(t,e){var r=t.sign[n],i=e.sign[n],o=t.offset[n],a=e.offset[n];return r?i?Ue({isBound:t.isBound,isSnap:t.isSnap,offset:o},{isBound:e.isBound,isSnap:e.isSnap,offset:a}):-1:1}))[0]}function Ze(t,n){var e=F([n[0][0],n[1][0]]),r=F([n[0][1],n[1][1]]);return{vertical:e<=t[0],horizontal:r<=t[1]}}function Ke(t,n){var e,r,i=n[0],o=n[1],a=o[0]-i[0],s=o[1]-i[1];if(Math.abs(a)<1e-7&&(a=0),Math.abs(s)<1e-7&&(s=0),a)if(s){e=s/a*(t[0]-i[0])+i[1],r=t[1]}else e=i[1],r=t[1];else e=i[0],r=t[0];return e-r}function Je(t,n,e,r){return void 0===r&&(r=1e-7),t.every((function(t){var i=Ke(t,n);return i<=0===e||Math.abs(i)<=r}))}function Qe(t,n,e,r,i){return void 0===i&&(i=0),r&&n-i<=t||!r&&t<=e+i?{isBound:!0,offset:r?n-t:e-t}:{isBound:!1,offset:0}}function tr(t,n,e,r,i,o){var a=n[0],s=n[1],u=t[0],c=e[0],l=e[1],f=qi(l[1]-c[1]),p=s,d=a,h=-a/s;if(!qi(l[0]-c[0])){if(o&&!d)return{isBound:!1,offset:0};if(p)return Qe(h*(c[0]-u[0])+u[1],c[1],l[1],r,i);var v=c[0]-u[0];return{isBound:g=Math.abs(v)<=(i||0),offset:g?v:0}}if(!f){if(o&&!p)return{isBound:!1,offset:0};if(d)return Qe((c[1]-u[1])/h+u[0],c[0],l[0],r,i);var g;v=c[1]-u[1];return{isBound:g=Math.abs(v)<=(i||0),offset:g?v:0}}return{isBound:!1,offset:0}}function nr(t,n,e){return n.map((function(n){var r=function(t,n){var e=n.line,r=n.centerSign,i=n.verticalSign,o=n.horizontalSign,a=n.lineConstants,s=t.props.innerBounds;if(!s)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var u=s.left,c=s.top,l=s.width,f=s.height,p=[[u,c],[u,c+f]],d=[[u,c],[u+l,c]],h=[[u+l,c],[u+l,c+f]],v=[[u,c+f],[u+l,c+f]];if(Je([[u,c],[u+l,c],[u,c+f],[u+l,c+f]],e,r))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var g=tr(e,a,d,i),m=tr(e,a,v,i),b=tr(e,a,p,o),x=tr(e,a,h,o),y=g.isBound&&m.isBound,E=g.isBound||m.isBound,S=b.isBound&&x.isBound,M=b.isBound||x.isBound,w=ji(g.offset,m.offset),C=ji(b.offset,x.offset),D=[0,0],R=!1,O=!1;return Math.abs(C)<Math.abs(w)?(D=[w,0],R=E,O=y):(D=[0,C],R=M,O=S),{isAllBound:O,isVerticalBound:E,isHorizontalBound:M,isBound:R,offset:D}}(t,n),i=r.isBound,o=r.offset,a=r.isVerticalBound,s=r.isHorizontalBound,u=n.multiple,c=Ar({datas:e,distX:o[0],distY:o[1]}).map((function(t,n){return t*(u[n]?2/u[n]:0)}));return{sign:u,isBound:i,isVerticalBound:a,isHorizontalBound:s,isSnap:!1,offset:c}}))}function er(t,n,e){var r,i=nr(t,rr(t,n,[0,0],!1).map((function(t){return Qn(Qn({},t),{multiple:t.multiple.map((function(t){return 2*Math.abs(t)}))})})),e),o=$e(i,0),a=$e(i,1),s=0,u=0,c=o.isVerticalBound||a.isVerticalBound,l=o.isHorizontalBound||a.isHorizontalBound;return(c||l)&&(r=function(t,n){var e=t.datas,r=t.distX,i=t.distY,o=e.beforeMatrix,a=e.matrix,s=e.is3d,u=e.startDragBeforeDist,c=e.startDragDist,l=e.absoluteOrigin,f=s?4:3;return Lt(Vt(n?o:a,qt(n?u:c,[r,i]),f),l)}({datas:e,distX:-o.offset[0],distY:-a.offset[1]}),s=r[0],u=r[1]),{vertical:{isBound:c,offset:s},horizontal:{isBound:l,offset:u}}}function rr(t,n,e,r){var i=t.state,o=gi(i.allMatrix,100,100,i.is3d?4:3),a=jr(o,[0,0]);return function(t,n){var e=[],r=t[0],i=t[1];return r&&i?e.push([[0,2*i],t,[-r,i]],[[2*r,0],t,[r,-i]]):r?(e.push([[2*r,0],[r,1],[r,-1]]),n&&e.push([[0,-1],[r,-1],[-r,-1]],[[0,1],[r,1],[-r,1]])):i?(e.push([[0,2*i],[1,i],[-1,i]]),n&&e.push([[-1,0],[-1,i],[-1,-i]],[[1,0],[1,i],[1,-i]])):e.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),e}(e,r).map((function(t){var e=t[0],r=t[1],i=t[2],s=[jr(o,r),jr(o,i)],u=function(t){var n=t[0],e=t[1],r=e[0]-n[0],i=e[1]-n[1];Math.abs(r)<1e-7&&(r=0),Math.abs(i)<1e-7&&(i=0);var o=0,a=0,s=0;return r?i?(a=1,s=(o=-i/r)*n[0]-n[1]):(a=1,s=-n[1]):(o=-1,s=n[0]),[o,a,s].map((function(t){return Y(t,1e-7)}))}(s),c=Ze(a,s),l=c.vertical,f=c.horizontal;return{multiple:e,centerSign:Ke(a,s)<=0,verticalSign:l,horizontalSign:f,lineConstants:u,line:[jr(n,r),jr(n,i)]}}))}function ir(t,n,e,r){var i=r?t.map((function(t){return Jt(t,r)})):t;return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some((function(t){var r=Ke(e,t)<=0;return!Je(n,t,r)}))}function or(t,n,e){var r=t||{},i=r.position,o=void 0===i?"client":i,a=r.left,s=void 0===a?-1/0:a,u=r.top,c=void 0===u?-1/0:u,l=r.right,f=void 0===l?1/0:l,p=r.bottom,d={position:o,left:s,top:c,right:f,bottom:void 0===p?1/0:p};return{vertical:sr(d,n,!0),horizontal:sr(d,e,!1)}}function ar(t,n){var e=t.state,r=e.containerClientRect,i=r.clientHeight,o=r.clientWidth,a=r.clientLeft,s=r.clientTop,u=e.snapOffset,c=u.left,l=u.top,f=u.right,p=u.bottom,d=n||t.props.bounds||{},h="css"===(d.position||"client"),v=d.left,g=void 0===v?-1/0:v,m=d.top,b=void 0===m?-1/0:m,x=d.right,y=void 0===x?h?-1/0:1/0:x,E=d.bottom,S=void 0===E?h?-1/0:1/0:E;return h&&(y=o+f-c-y,S=i+p-l-S),{left:g+c-a,right:y+c-a,top:b+l-s,bottom:S+l-s}}function sr(t,n,e){var r=t[e?"left":"top"],i=t[e?"right":"bottom"],o=Math.min.apply(Math,n),a=Math.max.apply(Math,n),s=[];return r+1>o&&s.push({isBound:!0,offset:o-r,pos:r}),i-1<a&&s.push({isBound:!0,offset:a-i,pos:i}),s.length||s.push({isBound:!1,offset:0,pos:0}),s.sort((function(t,n){return Math.abs(n.offset)-Math.abs(t.offset)}))}function ur(t,n,e){return(e?t.map((function(t){return Jt(t,e)})):t).some((function(t){return t[0]<n.left&&Math.abs(t[0]-n.left)>.1||t[0]>n.right&&Math.abs(t[0]-n.right)>.1||t[1]<n.top&&Math.abs(t[1]-n.top)>.1||t[1]>n.bottom&&Math.abs(t[1]-n.bottom)>.1}))}function cr(t,n){return function(t,n){var e,r=t.direction,i=t.classNames,o=t.size,a=t.pos,s=t.zoom,u=t.key,c="horizontal"===r,l=c?"Y":"X";return n.createElement("div",{key:u,className:i.join(" "),style:(e={},e[c?"width":"height"]="".concat(o),e.transform="translate(".concat(a[0],", ").concat(a[1],") translate").concat(l,"(-50%) scale").concat(l,"(").concat(s,")"),e)})}(Qn(Qn({},t),{classNames:te([Jr("line","guideline",t.direction)],t.classNames,!0).filter((function(t){return t})),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map((function(t){return"".concat(Y(t,.1),"px")}))}),n)}function lr(t,n,e,r,i,o,a,s){var u=t.props.zoom;return e.map((function(t,e){var c=t.type,l=t.pos,f=[0,0];return f[a]=r,f[a?0:1]=-i+l,cr({key:"".concat(n,"TargetGuideline").concat(e),classNames:[Jr("target","bold",c)],posValue:f,sizeValue:o,zoom:u,direction:n},s)}))}function fr(t,n,e,r,i,o){var a=t.props,s=a.zoom,u=a.isDisplayInnerSnapDigit,c="horizontal"===n?Te:ke,l=i[c.start],f=i[c.end];return e.filter((function(t){var n=t.hide,e=t.elementRect;if(n)return!1;if(u&&e){var r=e.rect;if(r[c.start]<=l&&f<=r[c.end])return!1}return!0})).map((function(t,e){var i=t.pos,a=t.size,u=t.element,c=[-r[0]+i[0],-r[1]+i[1]];return cr({key:"".concat(n,"-default-guideline-").concat(e),classNames:u?[Jr("bold")]:[],direction:n,posValue:c,sizeValue:a,zoom:s},o)}))}function pr(t,n,e,r,i,o,a,s){var u,c=t.props,l=c.snapDigit,f=void 0===l?0:l,p=c.isDisplaySnapDigit,d=void 0===p||p,h=c.snapDistFormat,v=void 0===h?function(t,n){return t}:h,g=c.zoom,m="horizontal"===n?"X":"Y",b="vertical"===n?"height":"width",x=Math.abs(i),y=d?parseFloat(x.toFixed(f)):0;return s.createElement("div",{key:"".concat(n,"-").concat(e,"-guideline-").concat(r),className:Jr("guideline-group",n),style:(u={left:"".concat(o[0],"px"),top:"".concat(o[1],"px")},u[b]="".concat(x,"px"),u)},cr({direction:n,classNames:[Jr(e),a],size:"100%",posValue:[0,0],sizeValue:x,zoom:g},s),s.createElement("div",{className:Jr("size-value","gap"),style:{transform:"translate".concat(m,"(-50%) scale(").concat(g,")")}},y>0?v(y,n):""))}function dr(t,n,e,r,i){var o=t.props.isDisplayInnerSnapDigit,a=[];return["vertical","horizontal"].forEach((function(s){var u=n.filter((function(t){return t.type===s})),c="vertical"===s?1:0,l=c?0:1,f=function(t,n,e,r){var i,o,a,s,u="vertical"===t?0:1,c="vertical"===t?1:0,l=u?Te:ke,f=e[l.start],p=e[l.end];return(i=n,o=function(t){return t.pos[u]},a=[],s=[],i.forEach((function(t,n){var e=o(t,n,i),r=s.indexOf(e),u=a[r]||[];-1===r&&(s.push(e),a.push(u)),u.push(t)})),a).map((function(n){var e=[],i=[];return n.forEach((function(n){var o,a,s=n.element,d=n.elementRect.rect;if(d[l.end]<f)e.push(n);else if(p<d[l.start])i.push(n);else if(d[l.start]<=f&&p<=d[l.end]&&r){var h=n.pos,v={element:s,rect:Qn(Qn({},d),(o={},o[l.end]=d[l.start],o))},g={element:s,rect:Qn(Qn({},d),(a={},a[l.start]=d[l.end],a))},m=[0,0],b=[0,0];m[u]=h[u],m[c]=h[c],b[u]=h[u],b[c]=h[c]+n.size,e.push({type:t,pos:m,size:0,elementRect:v}),i.push({type:t,pos:b,size:0,elementRect:g})}})),e.sort((function(t,n){return n.pos[c]-t.pos[c]})),i.sort((function(t,n){return t.pos[c]-n.pos[c]})),{total:n,start:e,end:i,inner:[]}}))}(s,u,r,o),p=c?ke:Te,d=c?Te:ke,h=r[p.start],v=r[p.end];f.forEach((function(n){var o=n.total,u=n.start,f=n.end,g=n.inner,m=e[l]+o[0].pos[l]-r[d.start],b=r;u.forEach((function(n){var r=n.elementRect.rect,o=b[p.start]-r[p.end];if(o>0){var u=[0,0];u[c]=e[c]+b[p.start]-h-o,u[l]=m,a.push(pr(t,s,"dashed",a.length,o,u,n.className,i))}b=r})),b=r,f.forEach((function(n){var r=n.elementRect.rect,o=r[p.start]-b[p.end];if(o>0){var u=[0,0];u[c]=e[c]+b[p.end]-h,u[l]=m,a.push(pr(t,s,"dashed",a.length,o,u,n.className,i))}b=r})),g.forEach((function(n){var r=n.elementRect.rect,o=h-r[p.start],u=r[p.end]-v,f=[0,0],d=[0,0];f[c]=e[c]-o,f[l]=m,d[c]=e[c]+v-h,d[l]=m,a.push(pr(t,s,"dashed",a.length,o,f,n.className,i)),a.push(pr(t,s,"dashed",a.length,u,d,n.className,i))}))}))})),a}function hr(t,n,e,r,i){var o=function(t,n,e,r){var i=n[0]-t[0],o=n[1]-t[1];if(Math.abs(i)<1e-7&&(i=0),Math.abs(o)<1e-7&&(o=0),!i)return r?[0,0]:[0,e];if(!o)return r?[e,0]:[0,0];var a=o/i,s=t[1]-a*t[0];return r?[e,a*(n[0]+e)+s-n[1]]:[(n[1]+e-s)/a-n[0],e]}(t,n,e,r);if(!o)return{isOutside:!1,offset:[0,0]};var a=N(t,n),s=N(o,t),u=N(o,n),c=s>a||u>a,l=Ar({datas:i,distX:o[0],distY:o[1]});return{offset:[l[0],l[1]],isOutside:c}}function vr(t,n){return t.isBound?t.offset:n.isSnap?He(n).offset:0}function gr(t,n,e,r,i,o){if(!Ae(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var a=Pi(o.absolutePoses,[n,e]),s=mi(a),u=s.left,c=s.right,l=s.top,f=s.bottom,p={horizontal:a.map((function(t){return t[1]})),vertical:a.map((function(t){return t[0]}))},d=mr(t,i,Ie(Fe(t.props.snapDirections),{left:u,right:c,top:l,bottom:f,center:(u+c)/2,middle:(l+f)/2}),p),h=d.vertical,v=d.horizontal,g=er(t,a,o),m=g.vertical,b=g.horizontal,x=h.isSnap,y=v.isSnap,E=h.isBound||m.isBound,S=v.isBound||b.isBound,M=function(t,n,e,r,i){var o=n[0],a=n[1],s=e[0],u=e[1],c=r[0],l=r[1],f=i[0],p=i[1],d=-f,h=-p;if(t&&o&&a){d=0,h=0;var v=[];if(s&&u?v.push([0,p],[f,0]):s?v.push([f,0]):u?v.push([0,p]):c&&l?v.push([0,p],[f,0]):c?v.push([f,0]):l&&v.push([0,p]),v.length){v.sort((function(t,n){return yi(Lt([o,a],t))-yi(Lt([o,a],n))}));var g=v[0];if(g[0]&&Math.abs(o)>1e-7)d=-g[0],h=a*Math.abs(o+d)/Math.abs(o)-a;else if(g[1]&&Math.abs(a)>1e-7){var m=a;h=-g[1],d=o*Math.abs(a+h)/Math.abs(m)-o}if(t&&u&&s)if(Math.abs(d)>1e-7&&Math.abs(d)<Math.abs(f))d*=b=Math.abs(f)/Math.abs(d),h*=b;else if(Math.abs(h)>1e-7&&Math.abs(h)<Math.abs(p)){var b;d*=b=Math.abs(p)/Math.abs(h),h*=b}else d=ji(-f,d),h=ji(-p,h)}}else d=o||s?-f:0,h=a||u?-p:0;return[d,h]}(r,[n,e],[E,S],[x,y],[ji(h.offset,m.offset),ji(v.offset,b.offset)]);return[{isBound:E,isSnap:x,offset:M[0]},{isBound:S,isSnap:y,offset:M[1]}]}function mr(t,n,e,r){void 0===r&&(r=e);var i=or(ar(t),r.vertical,r.horizontal),o=i.horizontal,a=i.vertical,s=n?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:We(t,e.vertical,e.horizontal),u=s.horizontal,c=s.vertical,l=vr(o[0],u),f=vr(a[0],c),p=Math.abs(l),d=Math.abs(f);return{horizontal:{isBound:o[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:l,dist:p,bounds:o,snap:u},vertical:{isBound:a[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:f,dist:d,bounds:a,snap:c}}}function br(t,n,e,r,i){var o=or(n,e,r),a=o.horizontal,s=o.vertical,u=qe(t,e,r,i),c=u.horizontal,l=u.vertical,f=vr(a[0],c),p=vr(s[0],l),d=Math.abs(f),h=Math.abs(p);return{horizontal:{isBound:a[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:f,dist:d,bounds:a,snap:c},vertical:{isBound:s[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:p,dist:h,bounds:s,snap:l}}}function xr(t,n,e,r,i,o){return e.map((function(e){var a=e[0],s=e[1],u=jr(n,a),c=jr(n,s),l=r?function(t,n,e,r){var i=function(t,n,e){var r=ar(t),i=r.left,o=r.top,a=r.right,s=r.bottom,u=e[0],c=e[1],l=Lt(e,n),f=l[0],p=l[1];Math.abs(f)<1e-7&&(f=0),Math.abs(p)<1e-7&&(p=0);var d=p>0,h=f>0,v={isBound:!1,offset:0,pos:0},g={isBound:!1,offset:0,pos:0};if(0===f&&0===p)return{vertical:v,horizontal:g};if(0===f)d?s<c&&(g.pos=s,g.offset=c-s):o>c&&(g.pos=o,g.offset=c-o);else if(0===p)h?a<u&&(v.pos=a,v.offset=u-a):i>u&&(v.pos=i,v.offset=u-i);else{var m=p/f,b=e[1]-m*u,x=0,y=0,E=!1;h&&a<=u?(x=m*a+b,y=a,E=!0):!h&&u<=i&&(x=m*i+b,y=i,E=!0),E&&(x<o||x>s)&&(E=!1),E||(d&&s<=c?(y=((x=s)-b)/m,E=!0):!d&&c<=o&&(y=((x=o)-b)/m,E=!0)),E&&(v.isBound=!0,v.pos=y,v.offset=u-y,g.isBound=!0,g.pos=x,g.offset=c-x)}return{vertical:v,horizontal:g}}(t,n,e),o=i.horizontal,a=i.vertical,s=r?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:function(t,n,e){var r=e[0],i=e[1],o=n[0],a=n[1],s=Lt(e,n),u=s[0],c=s[1],l=c>0,f=u>0;u=qi(u),c=qi(c);var p={isSnap:!1,offset:0,pos:0},d={isSnap:!1,offset:0,pos:0};if(0===u&&0===c)return{vertical:p,horizontal:d};var h=We(t,u?[r]:[],c?[i]:[]),v=h.vertical,g=h.horizontal;v.posInfos.filter((function(t){var n=t.pos;return f?n>=o:n<=o})),g.posInfos.filter((function(t){var n=t.pos;return l?n>=a:n<=a})),v.isSnap=v.posInfos.length>0,g.isSnap=g.posInfos.length>0;var m=He(v),b=m.isSnap,x=m.guideline,y=He(g),E=y.isSnap,S=y.guideline,M=E?S.pos[1]:0,w=b?x.pos[0]:0;if(0===u)E&&(d.isSnap=!0,d.pos=S.pos[1],d.offset=i-d.pos);else if(0===c)b&&(p.isSnap=!0,p.pos=w,p.offset=r-w);else{var C=c/u,D=e[1]-C*r,R=0,O=0,P=!1;b?(R=C*(O=w)+D,P=!0):E&&(O=((R=M)-D)/C,P=!0),P&&(p.isSnap=!0,p.pos=O,p.offset=r-O,d.isSnap=!0,d.pos=R,d.offset=i-R)}return{vertical:p,horizontal:d}}(t,n,e),u=s.horizontal,c=s.vertical,l=yr(o,u),f=yr(a,c),p=Math.abs(l),d=Math.abs(f);return{horizontal:{isBound:o.isBound,isSnap:u.isSnap,offset:l,dist:p},vertical:{isBound:a.isBound,isSnap:c.isSnap,offset:f,dist:d}}}(t,u,c,i):mr(t,i,{vertical:[c[0]],horizontal:[c[1]]}),f=l.horizontal,p=f.offset,d=f.isBound,h=f.isSnap,v=l.vertical,g=v.offset,m=v.isBound,b=v.isSnap,x=Lt(s,a);if(!g&&!p)return{isBound:m||d,isSnap:b||h,sign:x,offset:[0,0]};var y=function(t,n,e,r){var i=I(t,n)/Math.PI*180,o=e.vertical,a=o.isBound,s=o.isSnap,u=o.dist,c=e.horizontal,l=c.isBound,f=c.isSnap,p=i%180,d=p<3||p>177,h=p>87&&p<93;return c.dist<u&&(a||s&&!h&&(!r||!d))?"vertical":!l&&(!f||d||r&&h)?"":"horizontal"}(u,c,l,r);if(!y)return{sign:x,isBound:!1,isSnap:!1,offset:[0,0]};var E="vertical"===y,S=[0,0];return S=(S=r||1!==Math.abs(s[0])||1!==Math.abs(s[1])||a[0]===s[0]||a[1]===s[1]?hr(u,c,-(E?g:p),E,o).offset:Ar({datas:o,distX:-g,distY:-p})).map((function(t,n){return t*(x[n]?2/x[n]:0)})),{sign:x,isBound:E?m:d,isSnap:E?b:h,offset:S}}))}function yr(t,n){return t.isBound?t.offset:n.isSnap?n.offset:0}function Er(t){var n=t.state;if(!n.guidelines||!n.guidelines.length){var e=t.state.container,r=t.props.snapContainer||e,i=n.containerClientRect,o={left:0,top:0,bottom:0,right:0};if(e!==r){var a=Vi(r,!0);if(a){var s=Ri(a),u=$i(n,[s.left-i.left,s.top-i.top]),c=$i(n,[s.right-i.right,s.bottom-i.bottom]);o.left=Y(u[0],.1),o.top=Y(u[1],.1),o.right=Y(c[0],.1),o.bottom=Y(c[1],.1)}}n.snapOffset=o,n.guidelines=Xe(t),n.enableSnap=!0}}function Sr(t,n,e,r,i,o){var a=gi(t,n,e,o?4:3);return Pi(a,Lt(i,jr(a,r)))}function Mr(t,n,e,r,i,o){var a=function(t,n,e){var r=[];if(e)1!==Math.abs(n[0])||1!==Math.abs(n[1])?r.push([n,[-1,-1]],[n,[-1,1]],[n,[1,-1]],[n,[1,1]]):r.push([n,[t[0],-t[1]]],[n,[-t[0],t[1]]]),r.push([n,t]);else if(t[0]&&t[1]||!t[0]&&!t[1]){var i=t[0]?t:[1,1];[1,-1].forEach((function(t){[1,-1].forEach((function(e){var o=[t*i[0],e*i[1]];n[0]===o[0]&&n[1]===o[1]||r.push([n,o])}))}))}else t[0]?(1===Math.abs(n[0])?[1]:[1,-1]).forEach((function(e){r.push([[n[0],-1],[e*t[0],-1]],[[n[0],0],[e*t[0],0]],[[n[0],1],[e*t[0],1]])})):t[1]&&(1===Math.abs(n[1])?[1]:[1,-1]).forEach((function(e){r.push([[-1,n[1]],[-1,e*t[1]]],[[0,n[1]],[0,e*t[1]]],[[1,n[1]],[1,e*t[1]]])}));return r}(e,o.fixedDirection,r),s=rr(t,n,e,r),u=te(te([],xr(t,n,a,r,i,o),!0),nr(t,s,o),!0),c=$e(u,0),l=$e(u,1);return{width:{isBound:c.isBound,offset:c.offset[0]},height:{isBound:l.isBound,offset:l.offset[1]}}}function wr(t,n,e,r,i,o,a,s){for(var u=_i(t.state),c=t.props.keepRatio,l=0,f=0,p=0;p<2;++p){var d=Mr(t,n(l,f),i,c,a,s),h=d.width,v=d.height,g=h.isBound,m=v.isBound,b=h.offset,x=v.offset;if(1===p&&(g||(b=0),m||(x=0)),0===p&&a&&!g&&!m)return[0,0];if(c){var y=Math.abs(b)*(e?1/e:1),E=Math.abs(x)*(r?1/r:1);(g&&m?y<E:m||!g&&y<E)?b=e*x/r:x=r*b/e}l+=b,f+=x}if(i[0]&&i[1]){var S=function(t,n,e,r,i){var o=[-e[0],-e[1]],a=t.state,s=a.width,u=a.height,c=t.props.bounds,l=1/0,f=1/0;if(c){var p=[[e[0],-e[1]],[-e[0],e[1]]],d=c.left,h=void 0===d?-1/0:d,v=c.top,g=void 0===v?-1/0:v,m=c.right,b=void 0===m?1/0:m,x=c.bottom,y=void 0===x?1/0:x;p.forEach((function(t){var e=t[0]!==o[0],a=t[1]!==o[1],c=jr(n,t),p=360*I(r,c)/Math.PI;if(a){var d=c.slice();(Math.abs(p-360)<2||Math.abs(p-180)<2)&&(d[1]=r[1]);var v=hr(r,d,(r[1]<c[1]?y:g)-c[1],!1,i),m=v.offset[1],x=v.isOutside;isNaN(m)||(f=u+(x?1:-1)*Math.abs(m))}if(e){d=c.slice(),(Math.abs(p-90)<2||Math.abs(p-270)<2)&&(d[0]=r[0]);var E=hr(r,d,(r[0]<c[0]?b:h)-c[0],!0,i),S=E.offset[0],M=E.isOutside;isNaN(S)||(l=s+(M?1:-1)*Math.abs(S))}}))}return{maxWidth:l,maxHeight:f}}(t,u,i,o,s),M=S.maxWidth,w=S.maxHeight,C=function(t,n,e,r,i,o,a,s,u){var c=jr(n,a),l=mr(t,s,{vertical:[c[0]],horizontal:[c[1]]}),f=l.horizontal.offset,p=l.vertical.offset;if(p||f){var d=Ar({datas:u,distX:-p,distY:-f}),h=d[0],v=d[1];return[Math.min(i||1/0,e+a[0]*h)-e,Math.min(o||1/0,r+a[1]*v)-r]}return[0,0]}(t,n(l,f).map((function(t){return t.map((function(t){return Y(t,1e-4)}))})),e+l,r+f,M,w,i,a,s);l+=b=C[0],f+=x=C[1]}return[l,f]}function Cr(t,n,e,r,i){if(!Ae(t,"scalable"))return[0,0];var o=i.startOffsetWidth,a=i.startOffsetHeight,s=i.fixedPosition,u=i.fixedDirection,c=i.is3d,l=wr(t,(function(t,e){return Sr(function(t,n){var e=t.transformOrigin,r=t.offsetMatrix,i=t.is3d,o=t.targetMatrix,a=i?4:3;return Nr(r,Wt(o,rn(n,a),a),e,a)}(i,qt(n,[t/o,e/a])),o,a,u,s,c)}),o,a,e,s,r,i);return[l[0]/o,l[1]/a]}function Dr(t){var n=[];return t.forEach((function(t){t.guidelineInfos.forEach((function(t){var e=t.guideline;n.indexOf(e)>-1||n.push(e)}))})),n}function Rr(t,n,e,r,i,o){var a=or(ar(t,o),n,e),s=a.vertical,u=a.horizontal;s.forEach((function(t){t.isBound&&r.push({type:"bounds",pos:t.pos})})),u.forEach((function(t){t.isBound&&i.push({type:"bounds",pos:t.pos})}));var c=function(t){var n=t.props.innerBounds;if(!n)return{vertical:[],horizontal:[]};var e=t.getRect(),r=[e.pos1,e.pos2,e.pos3,e.pos4],i=jr(r,[0,0]),o=n.left,a=n.top,s=n.width,u=n.height,c=[[o,a],[o,a+u]],l=[[o,a],[o+s,a]],f=[[o+s,a],[o+s,a+u]],p=[[o,a+u],[o+s,a+u]],d=rr(t,r,[0,0],!1),h=[],v=[],g={top:!1,bottom:!1,left:!1,right:!1};return d.forEach((function(t){var n=t.line,e=t.lineConstants,r=Ze(i,n),d=r.horizontal,m=r.vertical,b=tr(n,e,l,m,1,!0),x=tr(n,e,p,m,1,!0),y=tr(n,e,c,d,1,!0),E=tr(n,e,f,d,1,!0);b.isBound&&!g.top&&(h.push(a),g.top=!0),x.isBound&&!g.bottom&&(h.push(a+u),g.bottom=!0),y.isBound&&!g.left&&(v.push(o),g.left=!0),E.isBound&&!g.right&&(v.push(o+s),g.right=!0)})),{horizontal:h,vertical:v}}(t),l=c.vertical,f=c.horizontal;l.forEach((function(t){P(r,(function(n){var e=n.type,r=n.pos;return"bounds"===e&&r===t}))>=0||r.push({type:"bounds",pos:t})})),f.forEach((function(t){P(i,(function(n){var e=n.type,r=n.pos;return"bounds"===e&&r===t}))>=0||i.push({type:"bounds",pos:t})}))}var Or={name:"snappable",dragRelation:"strong",props:{snappable:[Boolean,Array],snapContainer:Object,snapDirections:[Boolean,Object],elementSnapDirections:[Boolean,Object],snapGap:Boolean,snapGridWidth:Number,snapGridHeight:Number,isDisplaySnapDigit:Boolean,isDisplayInnerSnapDigit:Boolean,snapDigit:Number,snapThreshold:Number,horizontalGuidelines:Array,verticalGuidelines:Array,elementGuidelines:Array,bounds:Object,innerBounds:Object,snapDistFormat:Function},events:{onSnap:"snap"},css:[":host {\n    --bounds-color: #d66;\n}\n.guideline {\n    pointer-events: none;\n    z-index: 2;\n}\n.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}\n.guideline-group {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.guideline-group .size-value {\n    position: absolute;\n    color: #f55;\n    font-size: 12px;\n    font-weight: bold;\n}\n.guideline-group.horizontal .size-value {\n    transform-origin: 50% 100%;\n    transform: translateX(-50%);\n    left: 50%;\n    bottom: 5px;\n}\n.guideline-group.vertical .size-value {\n    transform-origin: 0% 50%;\n    top: 50%;\n    transform: translateY(-50%);\n    left: 5px;\n}\n.guideline.gap {\n    background: #f55;\n}\n.size-value.gap {\n    color: #f55;\n}\n"],render:function(t,n){var e=t.state,r=e.top,i=e.left,o=e.pos1,a=e.pos2,s=e.pos3,u=e.pos4,c=e.snapRenderInfo;if(!c||!Ae(t,""))return[];e.guidelines=Xe(t);var l=Math.min(o[0],a[0],s[0],u[0]),f=Math.min(o[1],a[1],s[1],u[1]),p=c.externalPoses||[],d=_i(t.state),h=[],v=[],g=[],m=[],b=[],x=mi(d),y=x.width,E=x.height,S=x.top,M=x.left,w=x.bottom,C=x.right,D={left:M,right:C,top:S,bottom:w,center:(M+C)/2,middle:(S+w)/2},R=p.length>0,O=R?mi(p):{};if(!c.request){if(c.direction&&b.push(function(t,n,e){var r=[];if(e[0]&&e[1])r=[e,[-e[0],e[1]],[e[0],-e[1]]].map((function(t){return jr(n,t)}));else if(e[0]||e[1])t.props.keepRatio?r=[[-1,-1],[-1,1],[1,-1],[1,1],e].map((function(t){return jr(n,t)})):(r=Ir(n,e)).length>1&&r.push([(r[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2]);else for(var i=[n[0],n[1],n[3],n[2],n[0]],o=0;o<4;++o)r.push(i[o]),r.push([(i[o][0]+i[o+1][0])/2,(i[o][1]+i[o+1][1])/2]);return We(t,r.map((function(t){return t[0]})),r.map((function(t){return t[1]})),1)}(t,d,c.direction)),c.snap){var P=mi(d);c.center&&(P.middle=(P.top+P.bottom)/2,P.center=(P.left+P.right)/2),b.push(Le(t,P,1))}R&&(c.center&&(O.middle=(O.top+O.bottom)/2,O.center=(O.left+O.right)/2),b.push(Le(t,O,1))),b.forEach((function(t){var n=t.vertical.posInfos,e=t.horizontal.posInfos;h.push.apply(h,n.filter((function(t){return t.guidelineInfos.some((function(t){return!t.guideline.hide}))})).map((function(t){return{type:"snap",pos:t.pos}}))),v.push.apply(v,e.filter((function(t){return t.guidelineInfos.some((function(t){return!t.guideline.hide}))})).map((function(t){return{type:"snap",pos:t.pos}}))),g.push.apply(g,Dr(n)),m.push.apply(m,Dr(e))}))}Rr(t,[M,C],[S,w],h,v),R&&Rr(t,[O.left,O.right],[O.top,O.bottom],h,v,c.externalBounds);var _=te(te([],g,!0),m,!0),z=_.filter((function(t){return t.element&&!t.gapRects})),B=_.filter((function(t){return t.gapRects}));return ki(t,"onSnap",{guidelines:_.filter((function(t){return!t.element})),elements:z,gaps:B},!0),te(te(te(te(te(te([],dr(t,z,[l,f],D,n),!0),function(t,n,e,r,i){var o=[];return["horizontal","vertical"].forEach((function(a){var s=n.filter((function(t){return t.type===a})),u="vertical"===a?0:1,c=u?0:1,l=u?ke:Te,f=u?Te:ke,p=r[l.start],d=r[l.end],h=r[f.start],v=r[f.end];s.forEach((function(n){var r=n.gap,a=n.gapRects,s=n.className,g=Math.max.apply(Math,te([h],a.map((function(t){return t.rect[f.start]})),!1)),m=Math.min.apply(Math,te([v],a.map((function(t){return t.rect[f.end]})),!1)),b=(g+m)/2;g!==m&&b!==(h+v)/2&&a.forEach((function(n){var a=n.rect,f=[e[0],e[1]];if(a[l.end]<p)f[u]+=a[l.end]-p;else{if(!(d<a[l.start]))return;f[u]+=a[l.start]-p-r}f[c]+=b-h,o.push(pr(t,u?"vertical":"horizontal","gap",o.length,r,f,s,i))}))}))})),o}(t,B,[l,f],D,n),!0),fr(t,"horizontal",m,[i,r],D,n),!0),fr(t,"vertical",g,[i,r],D,n),!0),lr(t,"horizontal",v,l,r,y,0,n),!0),lr(t,"vertical",h,f,i,E,1,n),!0)},dragStart:function(t,n){t.state.snapRenderInfo={request:n.isRequest,snap:!0,center:!0},Er(t)},drag:function(t){t.state.guidelines=Xe(t)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,n){return!(!Li(t,n)&&!_e(t,n))||(!n.isRequest&&n.inputEvent?W(n.inputEvent.target,Jr("snap-control")):void 0)},dragControlStart:function(t){t.state.snapRenderInfo=null,Er(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,n){this.dragStart(t,n)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,Er(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var n=t.state;n.enableSnap=!1,n.guidelines=[],n.snapRenderInfo=null,n.elementRects=[]}},Pr={name:"draggable",props:{draggable:Boolean,throttleDrag:Number,throttleDragRotate:Number,startDragRotate:Number,edgeDraggable:Boolean},events:{onDragStart:"dragStart",onDrag:"drag",onDragEnd:"dragEnd",onDragGroupStart:"dragGroupStart",onDragGroup:"dragGroup",onDragGroupEnd:"dragGroupEnd"},render:function(t,n){var e=t.props,r=e.throttleDragRotate,i=e.zoom,o=t.state,a=o.dragInfo,s=o.beforeOrigin;if(!r||!a)return[];var u=a.dist;if(!u[0]&&!u[1])return[];var c=yi(u),l=I(u,[0,0]);return[n.createElement("div",{className:Jr("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(c,"px"),transform:"translate(".concat(s[0],"px, ").concat(s[1],"px) rotate(").concat(l,"rad) scaleY(").concat(i,")")}})]},dragStart:function(t,n){var e=n.datas,r=n.parentEvent,i=n.parentGesto,o=t.state,a=o.target;if(o.gesto)return!1;o.gesto=i||t.targetGesto;var s=Ai(a);e.datas={},e.left=parseFloat(s.left||"")||0,e.top=parseFloat(s.top||"")||0,e.bottom=parseFloat(s.bottom||"")||0,e.right=parseFloat(s.right||"")||0,e.startValue=[0,0],zr(t,n),Xr(n,"translate"),function(t,n){n.absolutePoses=_i(t.state)}(t,e),e.prevDist=[0,0],e.prevBeforeDist=[0,0],e.isDrag=!1,e.deltaOffset=[0,0];var u=Bi(t,n,Qn({set:function(t){e.startValue=t}},Yr(n)));return!1!==(r||ki(t,"onDragStart",u))?(e.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(o.gesto=null,e.isPinch=!1),!!e.isDrag&&u},drag:function(t,n){if(n){Br(n,"translate");var e=n.datas,r=n.parentEvent,i=n.parentFlag,o=n.isPinch,a=n.isRequest,s=n.deltaOffset,u=n.distX,c=n.distY,l=e.isDrag,f=e.prevDist,p=e.prevBeforeDist,d=e.startValue;if(l){s&&(u+=s[0],c+=s[1]);var h=t.props,v=h.parentMoveable,g=r?0:h.throttleDrag||0,m=r?0:h.throttleDragRotate||0,b=!1,x=0;if(!r&&m>0&&(u||c)){var y=h.startDragRotate||0,E=Y(y+180*I([0,0],[u,c])/Math.PI,m)-y,S=c*Math.abs(Math.cos((E-90)/180*Math.PI)),M=yi([u*Math.abs(Math.cos(E/180*Math.PI)),S]);x=E*Math.PI/180,u=M*Math.cos(x),c=M*Math.sin(x)}if(!o&&!r&&!i&&(!m||u||c)){var w=gr(t,u,c,m,a||s,e),C=w[0],D=w[1],R=C.isSnap,O=C.isBound,P=C.offset,_=D.isSnap,z=D.isBound;b=R||_||O||z,u+=P,c+=D.offset}var B=qt(kr({datas:e,distX:u,distY:c}),d),G=qt(function(t){var n=t.datas,e=t.distX,r=t.distY,i=kr({datas:n,distX:e,distY:r}),o=i[0],a=i[1];return Vt(Tr(n,function(t,n){for(var e=en(n),r=0;r<n-1;++r)e[n*(n-1)+r]=t[r]||0;return e}([o,a],4)),Nt([0,0,0],4),4)}({datas:e,distX:u,distY:c}),d);m||b||(X(G,g),X(B,g));var T=Lt(B,d),k=Lt(G,d),A=Lt(k,f),F=Lt(T,p);e.prevDist=k,e.prevBeforeDist=T,e.passDelta=A,e.passDist=k;var j=e.left+T[0],N=e.top+T[1],W=e.right-T[0],q=e.bottom-T[1],L=Gr(e,"translate(".concat(G[0],"px, ").concat(G[1],"px)"),"translate(".concat(k[0],"px, ").concat(k[1],"px)"));if(qr(n,L),t.state.dragInfo.dist=r?[0,0]:k,r||v||!A.every((function(t){return!t}))||!F.some((function(t){return!t}))){var H=t.state,V=Bi(t,n,{transform:L,dist:k,delta:A,translate:G,beforeDist:T,beforeDelta:F,beforeTranslate:B,left:j,top:N,right:W,bottom:q,width:H.width,height:H.height,isPinch:o});return!r&&ki(t,"onDrag",V),V}}}},dragAfter:function(t,n){var e=n.datas,r=e.deltaOffset;return!(!r[0]&&!r[1])&&(e.deltaOffset=[0,0],this.drag(t,Qn(Qn({},n),{deltaOffset:r})))},dragEnd:function(t,n){var e=n.parentEvent,r=n.datas;if(t.state.gesto=null,t.state.dragInfo=null,r.isDrag){r.isDrag=!1;var i=Gi(t,n,{});return!e&&ki(t,"onDragEnd",i),i}},dragGroupStart:function(t,n){var e=n.datas,r=n.clientX,i=n.clientY,o=this.dragStart(t,n);if(!o)return!1;var a=ye(t,this,"dragStart",[r||0,i||0],n,!1),s=ki(t,"onDragGroupStart",Qn(Qn({},o),{targets:t.props.targets,events:a}));return e.isDrag=!1!==s,!!e.isDrag&&o},dragGroup:function(t,n){if(n.datas.isDrag){var e=this.drag(t,n),r=ye(t,this,"drag",n.datas.passDelta,n,!1);if(e){var i=Qn({targets:t.props.targets,events:r},e);return ki(t,"onDragGroup",i),i}}},dragGroupEnd:function(t,n){var e=n.isDrag;if(n.datas.isDrag){this.dragEnd(t,n);var r=ye(t,this,"dragEnd",[0,0],n,!1);return ki(t,"onDragGroupEnd",Gi(t,n,{targets:t.props.targets,events:r})),e}},request:function(t){var n={},e=t.getRect(),r=0,i=0;return{isControl:!1,requestStart:function(){return{datas:n}},request:function(t){return"x"in t?r=t.x-e.left:"deltaX"in t&&(r+=t.deltaX),"y"in t?i=t.y-e.top:"deltaY"in t&&(i+=t.deltaY),{datas:n,distX:r,distY:i}},requestEnd:function(){return{datas:n,isDrag:!0}}}},unset:function(t){t.state.dragInfo=null}};function _r(t,n){var e=n.clientX,r=n.clientY,i=n.datas,o=t.state,a=o.moveableClientRect,s=o.rootMatrix,u=o.is3d,c=o.pos1,l=Lt(Ni(s,[e-a.left,r-a.top],u?4:3),c),f=Ar({datas:i,distX:l[0],distY:l[1]});return[f[0],f[1]]}function zr(t,n){var e=n.datas,r=t.state,i=r.allMatrix,o=r.beforeMatrix,a=r.is3d,s=r.left,u=r.top,c=r.origin,l=r.offsetMatrix,f=r.targetMatrix,p=r.transformOrigin,d=a?4:3;e.is3d=a,e.matrix=i,e.targetMatrix=f,e.beforeMatrix=o,e.offsetMatrix=l,e.transformOrigin=p,e.inverseMatrix=jt(i,d),e.inverseBeforeMatrix=jt(o,d),e.absoluteOrigin=Nt(qt([s,u],c),d),e.startDragBeforeDist=Vt(e.inverseBeforeMatrix,e.absoluteOrigin,d),e.startDragDist=Vt(e.inverseMatrix,e.absoluteOrigin,d)}function Br(t,n){var e=t.datas,r=t.originalDatas.beforeRenderable,i=e.transformIndex,o=r.nextTransforms,a=r.nextTransformAppendedIndexes,s=0;-1===i?(s=o.length,e.transformIndex=s):s=i+a.filter((function(t){return t<i})).length;var u=function(t,n){var e=t.slice(0,n<0?void 0:n),r=t.slice(0,n<0?void 0:n+1),i=t[n]||"",o=n<0?[]:t.slice(n),a=n<0?[]:t.slice(n+1),s=cn(e),u=cn(r),c=cn([i]),l=cn(o),f=cn(a),p=un(s),d=un(u),h=un(l),v=un(f),g=Wt(p,h,4);return{transforms:t,beforeFunctionMatrix:p,beforeFunctionMatrix2:d,targetFunctionMatrix:un(c),afterFunctionMatrix:h,afterFunctionMatrix2:v,allFunctionMatrix:g,beforeFunctions:s,beforeFunctions2:u,targetFunction:c[0],afterFunctions:l,afterFunctions2:f,beforeFunctionTexts:e,beforeFunctionTexts2:r,targetFunctionText:i,afterFunctionTexts:o,afterFunctionTexts2:a}}(o,s),c=u.targetFunction,l="rotate"===n?"rotateZ":n;e.beforeFunctionTexts=u.beforeFunctionTexts,e.afterFunctionTexts=u.afterFunctionTexts,e.beforeTransform=u.beforeFunctionMatrix,e.beforeTransform2=u.beforeFunctionMatrix2,e.targetTansform=u.targetFunctionMatrix,e.afterTransform=u.afterFunctionMatrix,e.afterTransform2=u.afterFunctionMatrix2,e.targetAllTransform=u.allFunctionMatrix,c.functionName===l?(e.afterFunctionTexts.splice(0,1),e.isAppendTransform=!1):(e.isAppendTransform=!0,r.nextTransformAppendedIndexes=te(te([],a,!0),[s],!1))}function Gr(t,n,e){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?e:n," ").concat(t.afterFunctionTexts.join(" "))}function Tr(t,n,e){var r=t.beforeTransform,i=t.afterTransform,o=t.beforeTransform2,a=t.afterTransform2,s=t.targetAllTransform,u=e?Wt(s,n,4):Wt(n,s,4),c=Wt(jt(e?o:r,4),u,4);return Wt(c,jt(e?a:i,4),4)}function kr(t){var n=t.datas,e=t.distX,r=t.distY,i=n.inverseBeforeMatrix,o=n.is3d,a=n.startDragBeforeDist,s=o?4:3;return Lt(Vt(i,qt(n.absoluteOrigin,[e,r]),s),a)}function Ar(t,n){var e=t.datas,r=t.distX,i=t.distY,o=e.inverseBeforeMatrix,a=e.inverseMatrix,s=e.is3d,u=e.startDragBeforeDist,c=e.startDragDist,l=s?4:3;return Lt(Vt(n?o:a,qt(e.absoluteOrigin,[r,i]),l),n?u:c)}function Fr(t){var n=[];return t[1]>=0&&(t[0]>=0&&n.push(3),t[0]<=0&&n.push(2)),t[1]<=0&&(t[0]>=0&&n.push(1),t[0]<=0&&n.push(0)),n}function Ir(t,n){return Fr(n).map((function(n){return t[n]}))}function jr(t,n){var e=Ir(t,n);return[F(e.map((function(t){return t[0]}))),F(e.map((function(t){return t[1]})))]}function Nr(t,n,e,r){return Wt(t,ni(n,r,e),r)}function Yr(t){var n=t.originalDatas.beforeRenderable;return{setTransform:function(e,r){void 0===r&&(r=-1),n.startTransforms=g(e)?e:M(e),Wr(t,r)},setTransformIndex:function(n){Wr(t,n)}}}function Xr(t,n){Wr(t,P(t.originalDatas.beforeRenderable.startTransforms,(function(t){return 0===t.indexOf("".concat(n,"("))})))}function Wr(t,n){var e=t.originalDatas.beforeRenderable,r=t.datas;if(r.transformIndex=n,-1!==n){var i=e.startTransforms[n];if(i){var o=cn([i]);r.startValue=o[0].functionValue}}}function qr(t,n){t.originalDatas.beforeRenderable.nextTransforms=M(n)}function Lr(t){return t.originalDatas.beforeRenderable.nextTransforms.join(" ")}function Hr(t,n,e,r,i){return qr(i,n),{transform:n,drag:Pr.drag(t,me(i,t.state,e,r,!1))}}function Vr(t,n,e,r,i){var o=t.state,a=o.left,s=o.top,u=t.props.groupable,c=function(t,n,e){var r=t.transformOrigin,i=t.offsetMatrix,o=t.is3d,a=n.beforeTransform,s=n.afterTransform,u=o?4:3;return Nr(i,Yt(Wt(Wt(a,sn([e]),4),s,4),4,u),r,u)}(t.state,i,n),l=u?a:0,f=u?s:0,p=Lt(r,$r(t,e,c));return Lt(p,[l,f])}function Ur(t){var n=t.state,e=n.width,r=n.height,i=n.transformOrigin;return[i[0]/(e/2)-1,i[1]/(r/2)-1]}function $r(t,n,e){void 0===e&&(e=t.state.allMatrix);var r=t.state,i=r.width,o=r.height,a=r.is3d?4:3;return vi(e,[i/2*(1+n[0]),o/2*(1+n[1])],a)}function Zr(t,n,e,r,i,o){var a=t.props.groupable,s=t.state,u=s.transformOrigin,c=s.targetMatrix,l=s.offsetMatrix,f=s.is3d,p=s.width,d=s.height,h=s.left,v=s.top,g=f?4:3,m=function(t,n,e,r,i,o){return void 0===r&&(r=n),void 0===i&&(i=e),void 0===o&&(o=[0,0]),t?t.map((function(t,a){var s=D(t),u=s.value,c=s.unit,l=a?i:r,f=a?e:n;return"%"===t||isNaN(u)?f*(l?o[a]/l:0):"%"!==c?u:f*u/100})):o}(o,n,e,p,d,u),b=a?h:0,x=a?v:0,y=function(t,n,e,r,i,o){var a=jr(gi(n,e,r,i),o);return[t[0]-a[0],t[1]-a[1]]}(i,Nr(l,c,m,g),n,e,g,r);return Lt(y,[b,x])}function Kr(t,n){return jr(_i(t.state),n)}function Jr(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return t.apply(void 0,te([ue],n,!1))}function Qr(t){t()}function ti(t){return t&&"none"!==t?v(t)?t:sn(t):[1,0,0,1,0,0]}function ni(t,n,e){return Xt(n,on(e,n),t,on(e.map((function(t){return-t})),n))}function ei(t){return ri(Ai(t,":before")).map((function(n,e){var r=D(n),i=r.value,o=r.unit;return i*function(t,n,e){return"%"===n?di(t.ownerSVGElement)[e?"width":"height"]/100:1}(t,o,0===e)}))}function ri(t){var n=t.transformOrigin;return n?n.split(" "):["0","0"]}function ii(t,n){void 0===n&&(n=Ai(t));var e=n.transform;if(e&&"none"!==e)return n.transform;if("transform"in t){var r=t.transform.baseVal;if(!r)return"";var i=r.length;if(!i)return"";for(var o=[],a=function(t){var n=r[t].matrix;o.push("matrix(".concat(["a","b","c","d","e","f"].map((function(t){return n[t]})).join(", "),")"))},s=0;s<i;++s)a(s);return o.join(" ")}return""}function oi(t,n,e){for(var r=document.body,i=!t||e?t:t.parentElement,o=t===n||i===n,a="relative";i&&i!==r;){n===i&&(o=!0);var s=Ai(i),u=i.tagName.toLowerCase(),c=ii(i,s);if(a=s.position,"svg"===u||"static"!==a||c&&"none"!==c)break;i=i.parentElement,a="relative"}return{isStatic:"static"===a,isEnd:o||!i||i===r,offsetParent:i||r}}function ai(t,n){var e,r,i,o=t.tagName.toLowerCase(),a=t.offsetLeft,s=t.offsetTop,u=h(a),c=!u;return c||"svg"===o?i=(r=ri(n).map((function(t){return parseFloat(t)}))).slice():(i=(r=se?ei(t):ri(n).map((function(t){return parseFloat(t)}))).slice(),c=!0,e=function(t,n){if(!t.getBBox||"g"===t.tagName.toLowerCase())return[0,0,0,0];var e=t.getBBox(),r=di(t.ownerSVGElement),i=e.x-r.x,o=e.y-r.y;return[i,o,n[0]-i,n[1]-o]}(t,r),a=e[0],s=e[1],r[0]=e[2],r[1]=e[3]),{tagName:o,isSVG:u,hasOffset:c,offset:[a||0,s||0],origin:r,targetOrigin:i}}function si(t,n,e){void 0===e&&(e=Ai(t));var r=Ai(document.body),i=r.position;if(!(n||i&&"static"!==i))return[0,0];var o=parseInt(r.marginLeft,10),a=parseInt(r.marginTop,10);return"absolute"===e.position&&("auto"===e.top&&"auto"===e.bottom||(a=0),"auto"===e.left&&"auto"===e.right||(o=0)),[o,a]}function ui(t){t.forEach((function(t){var n=t.matrix;n&&(t.matrix=Yt(n,3,4))}))}function ci(t){for(var n=t.parentElement,e=!1;n;){var r=Ai(n).transform;if(r&&"none"!==r){e=!0;break}if(n===document.body)break;n=n.parentElement}return{fixedContainer:n||document.body,hasTransform:e}}function li(t,n,e){for(var r,i,o,a,s,u=t,c=[],l=!e&&t===n||t===document.body,f=l,p=!1,d=3,h=!1,v=oi(n,n,!0).offsetParent;u&&!f;){f=l;var g=Ai(u),m=g.position,b=ii(u,g),x=(a=ti(b),void 0===(s=void 0)&&(s=6===a.length),s?[a[0],a[1],0,a[2],a[3],0,a[4],a[5],1]:a),y="fixed"===m,E={hasTransform:!1,fixedContainer:null};y&&(h=!0,v=(E=ci(u)).fixedContainer);var S=x.length;p||16!==S||(p=!0,d=4,ui(c),o&&(o=Yt(o,3,4))),p&&9===S&&(x=Yt(x,3,4));var M=ai(u,g),w=M.tagName,C=M.hasOffset,D=M.isSVG,R=M.origin,O=M.targetOrigin,P=M.offset,_=P[0],z=P[1];"svg"===w&&o?(c.push({type:"target",target:u,matrix:hi(u,d)}),c.push({type:"offset",target:u,matrix:en(d)})):"g"===w&&t!==u&&(_=0,z=0);var B=void 0,G=!1,T=!1;if(y)B=E.fixedContainer,G=!0;else{var k=oi(u,n);B=k.offsetParent,G=k.isEnd,T=k.isStatic}ae&&C&&!D&&T&&("relative"===m||"static"===m)&&(_-=B.offsetLeft,z-=B.offsetTop,l=l||G);var A=0,F=0,I=0,j=0;if(y)C&&E.hasTransform&&(I=B.clientLeft,j=B.clientTop);else if(C&&v!==B&&(A=B.clientLeft,F=B.clientTop),C&&B===document.body){var N=si(u,!1,g);_+=N[0],z+=N[1]}if(c.push({type:"target",target:u,matrix:ni(x,d,R)}),C?c.push({type:"offset",target:u,matrix:on([_-u.scrollLeft+A-I,z-u.scrollTop+F-j],d)}):c.push({type:"offset",target:u,origin:R}),o||(o=x),r||(r=R),i||(i=O),f||y)break;u=B,l=G,e&&u!==document.body||(f=l)}return o||(o=en(d)),r||(r=[0,0]),i||(i=[0,0]),{offsetContainer:v,matrixes:c,targetMatrix:o,transformOrigin:r,targetOrigin:i,is3d:p,hasFixed:h}}function fi(t,n,e,r){void 0===e&&(e=n);var i=0,o=0,a=0,s={};if(t){var u=wi(t);i=u.offsetWidth,o=u.offsetHeight}if(t){var c=function(t,n,e,r){var i;void 0===e&&(e=n);var o=li(t,n),a=o.matrixes,s=o.is3d,u=o.targetMatrix,c=o.transformOrigin,l=o.targetOrigin,f=o.offsetContainer,p=o.hasFixed,d=li(f,e,!0),h=d.matrixes,v=d.is3d,g=r||v||s,m=g?4:3,b="svg"!==t.tagName.toLowerCase()&&"ownerSVGElement"in t,x=u,y=en(m),E=en(m),S=en(m),M=en(m),w=a.length;h.reverse(),a.reverse(),!s&&g&&(x=Yt(x,3,4),ui(a));!v&&g&&ui(h);h.forEach((function(t){E=Wt(E,t.matrix,m)}));var C=e||document.body,D=(null===(i=h[0])||void 0===i?void 0:i.target)||oi(C,C,!0).offsetParent,R=h.slice(1).reduce((function(t,n){return Wt(t,n.matrix,m)}),en(m));a.forEach((function(t,n){if(w-2===n&&(S=y.slice()),w-1===n&&(M=y.slice()),!t.matrix){var e=function(t,n,e,r,i){var o,a=t.target,s=t.origin,u=n.matrix,c=wi(a),l=c.offsetWidth,f=c.offsetHeight,p=e.getBoundingClientRect(),d=[0,0];e===document.body&&(d=si(a,!0));var h=a.getBoundingClientRect(),v=h.left-p.left+e.scrollLeft-(e.clientLeft||0)+d[0],g=h.top-p.top+e.scrollTop-(e.clientTop||0)+d[1],m=h.width,b=h.height,x=Xt(r,i,u),y=bi(x,l,f,r),E=y.left,S=y.top,M=y.width,w=y.height,C=vi(x,s,r),D=Lt(C,[E,S]),R=[v+D[0]*m/M,g+D[1]*b/w],O=[0,0],P=0;for(;++P<10;){var _=jt(i,r);o=Lt(vi(_,R,r),vi(_,C,r)),O[0]=o[0],O[1]=o[1];var z=bi(Xt(r,i,on(O,r),u),l,f,r),B=z.left-v,G=z.top-g;if(Math.abs(B)<2&&Math.abs(G)<2)break;R[0]-=B,R[1]-=G}return O.map((function(t){return Math.round(t)}))}(t,a[n+1],D,m,Wt(R,y,m));t.matrix=on(e,m)}y=Wt(y,t.matrix,m)}));var O=!b&&s;x||(x=en(O?4:3));var P=pi(b&&16===x.length?Yt(x,4,3):x,O);return E=It(E,m,m),{hasFixed:p,rootMatrix:E,beforeMatrix:S,offsetMatrix:M,allMatrix:y,targetMatrix:x,targetTransform:P,transformOrigin:c,targetOrigin:l,is3d:g}}(t,n,e,r),l=xi(c.allMatrix,c.transformOrigin,i,o);s=Qn(Qn({},c),l);var f=xi(c.allMatrix,[50,50],100,100);a=Ci([f.pos1,f.pos2],f.direction)}var p=r?4:3;return Qn({width:i,height:o,rotation:a,rootMatrix:en(p),beforeMatrix:en(p),offsetMatrix:en(p),allMatrix:en(p),targetMatrix:en(p),targetTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!r,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1},s)}function pi(t,n){return void 0===n&&(n=t.length>9),"".concat(n?"matrix3d":"matrix","(").concat(Ht(t,!n).join(","),")")}function di(t){var n=t.clientWidth,e=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:n,clientHeight:e};var r=t.viewBox,i=r&&r.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||n,height:i.height||e,clientWidth:n,clientHeight:e}}function hi(t,n){var e=di(t),r=e.width,i=e.height,o=e.clientWidth,a=e.clientHeight,s=o/r,u=a/i,c=t.preserveAspectRatio.baseVal,l=c.align,f=c.meetOrSlice,p=[0,0],d=[s,u],h=[0,0];if(1!==l){var v=(l-2)%3,g=Math.floor((l-2)/3);p[0]=r*v/2,p[1]=i*g/2;var m=2===f?Math.max(u,s):Math.min(s,u);d[0]=m,d[1]=m,h[0]=(o-r)/2*v,h[1]=(a-i)/2*g}var b=rn(d,n);return b[n*(n-1)]=h[0],b[n*(n-1)+1]=h[1],ni(b,n,p)}function vi(t,n,e){return Vt(t,Nt(n,e),e)}function gi(t,n,e,r){return[[0,0],[n,0],[0,e],[n,e]].map((function(n){return vi(t,n,r)}))}function mi(t){var n=t.map((function(t){return t[0]})),e=t.map((function(t){return t[1]})),r=Math.min.apply(Math,n),i=Math.min.apply(Math,e),o=Math.max.apply(Math,n),a=Math.max.apply(Math,e);return{left:r,top:i,right:o,bottom:a,width:o-r,height:a-i}}function bi(t,n,e,r){return mi(gi(t,n,e,r))}function xi(t,n,e,r){var i=16===t.length?4:3,o=gi(t,e,r,i),a=o[0],s=a[0],u=a[1],c=o[1],l=c[0],f=c[1],p=o[2],d=p[0],h=p[1],v=o[3],g=v[0],m=v[1],b=vi(t,n,i),x=b[0],y=b[1],E=Math.min(s,l,d,g),S=Math.min(u,f,h,m),M=Math.max(s,l,d,g);return s=s-E||0,{left:E,top:S,right:M,bottom:Math.max(u,f,h,m),origin:[x=x-E||0,y=y-S||0],pos1:[s,u=u-S||0],pos2:[l=l-E||0,f=f-S||0],pos3:[d=d-E||0,h=h-S||0],pos4:[g=g-E||0,m=m-S||0],direction:j(o)}}function yi(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Ei(t,n){return yi([n[0]-t[0],n[1]-t[1]])}function Si(t,n,e,r){void 0===e&&(e=1),void 0===r&&(r=I(t,n));var i=Ei(t,n);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(r,"rad) scaleY(").concat(e,")"),width:"".concat(i,"px")}}function Mi(t,n){for(var e=[],r=2;r<arguments.length;r++)e[r-2]=arguments[r];var i=e.length,o=e.reduce((function(t,n){return t+n[0]}),0)/i,a=e.reduce((function(t,n){return t+n[1]}),0)/i;return{transform:"translateZ(0px) translate(".concat(o,"px, ").concat(a,"px) rotate(").concat(t,"rad) scale(").concat(n,")")}}function wi(t,n){if(void 0===n&&(n=Ai(t)),!h(t.offsetWidth)||"svg"===t.tagName.toLowerCase()){var e="border-box"===n.boxSizing,r=parseFloat(n.borderLeftWidth)||0,i=parseFloat(n.borderRightWidth)||0,o=parseFloat(n.borderTopWidth)||0,a=parseFloat(n.borderBottomWidth)||0,s=parseFloat(n.paddingLeft)||0,u=parseFloat(n.paddingRight)||0,c=parseFloat(n.paddingTop)||0,l=parseFloat(n.paddingBottom)||0,f=parseFloat(n.width),p=parseFloat(n.height),d=(b=f,x=p,s+u),v=c+l,g=d+(r+i),m=v+(o+a);return e?(f=b-g,p=x-m):(b=f+g,x=p+m),{svg:!1,offsetWidth:b,offsetHeight:x,clientWidth:f+d,clientHeight:p+v,cssWidth:f,cssHeight:p}}var b,x,y=t.getBBox();return{svg:!0,offsetWidth:b=y.width,offsetHeight:x=y.height,clientWidth:b,clientHeight:x,cssWidth:b,cssHeight:x}}function Ci(t,n){return I(n>0?t[0]:t[1],n>0?t[1]:t[0])}function Di(t,n,e,r,i){var o=1,a=[0,0],s={left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},u={left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},c={left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},l=fi(n,e,i,!1);if(n){var f=l.is3d?4:3,p=xi(l.offsetMatrix,qt(l.transformOrigin,function(t,n){void 0===n&&(n=Math.sqrt(t.length));for(var e=[],r=t[n*n-1],i=0;i<n-1;++i)e[i]=t[n*(n-1)+i]/r;return e[n-1]=0,e}(l.targetMatrix,f)),l.width,l.height);o=p.direction,a=qt(p.origin,[p.left-l.left,p.top-l.top]),s=Ri(n),u=Ri(oi(r,r,!0).offsetParent||document.body,!0),t&&(c=Ri(t))}return Qn({targetClientRect:s,containerClientRect:u,moveableClientRect:c,beforeDirection:o,beforeOrigin:a,originalBeforeOrigin:a,target:n},l)}function Ri(t,n){var e,r=0,i=0,o=0,a=0;if(t===document.body||t===document.documentElement){o=window.innerWidth,a=window.innerHeight;var s=[document.documentElement.scrollLeft||document.body.scrollLeft,document.documentElement.scrollTop||document.body.scrollTop];r=(e=[-s[0],-s[1]])[0],i=e[1]}else{var u=t.getBoundingClientRect();r=u.left,i=u.top,o=u.width,a=u.height}var c={left:r,right:r+o,top:i,bottom:i+a,width:o,height:a};return n&&(c.clientLeft=t.clientLeft,c.clientTop=t.clientTop,c.clientWidth=t.clientWidth,c.clientHeight=t.clientHeight,c.scrollWidth=t.scrollWidth,c.scrollHeight=t.scrollHeight,c.overflow="visible"!==Ai(t).overflow),c}function Oi(t){if(t){var n=t.getAttribute("data-direction");if(n){var e=[0,0];return n.indexOf("w")>-1&&(e[0]=-1),n.indexOf("e")>-1&&(e[0]=1),n.indexOf("n")>-1&&(e[1]=-1),n.indexOf("s")>-1&&(e[1]=1),e}}}function Pi(t,n){return[qt(n,t[0]),qt(n,t[1]),qt(n,t[2]),qt(n,t[3])]}function _i(t){var n=t.left,e=t.top;return Pi([t.pos1,t.pos2,t.pos3,t.pos4],[n,e])}function zi(t,n){var e;null===(e=t[n])||void 0===e||e.unset(),t[n]=null}function Bi(t,n,e,r){var i=n.datas;i.datas||(i.datas={});var o=Qn(Qn({},e),{target:t.state.target,clientX:n.clientX,clientY:n.clientY,inputEvent:n.inputEvent,currentTarget:t,moveable:t,datas:i.datas});return i.isStartEvent?r||(i.lastEvent=o):i.isStartEvent=!0,o}function Gi(t,n,e){var r=n.datas,i="isDrag"in e?e.isDrag:n.isDrag;return r.datas||(r.datas={}),Qn(Qn({isDrag:i},e),{moveable:t,target:t.state.target,clientX:n.clientX,clientY:n.clientY,inputEvent:n.inputEvent,currentTarget:t,lastEvent:r.lastEvent,isDouble:n.isDouble,datas:r.datas})}function Ti(t,n,e){t._emitter.on(n,e)}function ki(t,n,e,r){return t.triggerEvent(n,e,r)}function Ai(t,n){return window.getComputedStyle(t,n)}function Fi(t,n,e){var r={},i={};return t.filter((function(t){var o=t.name;if(r[o]||!n.some((function(n){return t[n]})))return!1;if(!e&&t.ableGroup){if(i[t.ableGroup])return!1;i[t.ableGroup]=!0}return r[o]=!0,!0}))}function Ii(t,n){return t===n||null==t&&null==n}function ji(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.sort((function(t,n){return Math.abs(n)-Math.abs(t)})),t[0]}function Ni(t,n,e){return Vt(jt(t,e),Nt(n,e),e)}function Yi(t,n){var e,r=t.is3d?4:3;return e=Ni(t.rootMatrix,[n.distX,n.distY],r),n.distX=e[0],n.distY=e[1],n}function Xi(t,n,e,r,i){return Lt(vi(t,qt(e,n),i),r)}function Wi(t,n,e){return e?"".concat(t/n*100,"%"):"".concat(t,"px")}function qi(t){return Math.abs(t)<=1e-7?0:t}function Li(t,n){return n.isRequest?("resizable"===n.requestAble||"scalable"===n.requestAble)&&n.parentDirection:W(n.inputEvent.target,Jr("direction"))}function Hi(t){var n={};for(var e in t)n[t[e]]=e;return n}function Vi(t,n){return t?m(t)?n?document.querySelector(t):t:x(t)?t():"current"in t?t.current:t:null}function Ui(t,n){return t?(!(e=t)||!v(e)||e instanceof Element||!g(e)&&!("length"in e)?[t]:[].slice.call(t)).reduce((function(t,e){return m(e)&&n?te(te([],t,!0),[].slice.call(document.querySelectorAll(e)),!0):(t.push(Vi(e,n)),t)}),[]):[];var e}function $i(t,n){var e=t.rootMatrix,r=t.is3d,i=jt(e,r?4:3);return r||(i=Yt(i,3,4)),i[12]=0,i[13]=0,i[14]=0,function(t,n){var e=Vt(t,[n[0],n[1]||0,n[2]||0,1],4),r=e[3]||1;return[e[0]/r,e[1]/r,e[2]/r]}(i,n)}function Zi(t,n,e,r,i){var o=t[0],a=t[1],s=0,u=0;if(i&&o&&a){var c=I([0,0],n),l=I([0,0],r),f=yi(n),p=Math.cos(c-l)*f;if(r[0])if(r[1]){var d=2*r[0]*o,h=2*r[1]*a,v=yi([d+n[0],h+n[1]])-yi([d,h]),g=I([0,0],[e,1]);s=Math.cos(g)*v,u=Math.sin(g)*v}else u=(s=p)/e;else s=(u=p)*e}else s=r[0]*n[0],u=r[1]*n[1];return[s,u]}function Ki(t,n,e,r){var i,o=e.ratio,a=e.startOffsetWidth,s=e.startOffsetHeight,u=0,c=0,l=r.distX,f=r.distY,p=r.parentDistance,d=r.parentDist,h=r.parentScale,v=r.isPinch,g=e.fixedDirection;if(d)u=d[0],c=d[1],n&&(u?c||(c=u/o):u=c*o);else if(h)u=(h[0]-1)*a,c=(h[1]-1)*s;else if(v)p&&(u=p,c=p*s/a);else{var m=Ar({datas:e,distX:l,distY:f});u=(i=Zi([a,s],m=[0,1].map((function(n){var e=Math.abs(t[n]-g[n]);return 0!==e&&(e=2/e),m[n]*e})),o,t,n))[0],c=i[1]}return{distWidth:u,distHeight:c}}var Ji=ne("pinchable",{events:{onPinchStart:"pinchStart",onPinch:"pinch",onPinchEnd:"pinchEnd",onPinchGroupStart:"pinchGroupStart",onPinchGroup:"pinchGroup",onPinchGroupEnd:"pinchGroupEnd"},dragStart:function(){return!0},pinchStart:function(t,n){var e=n.datas,r=n.targets,i=n.angle,o=n.originalDatas,a=t.props,s=a.pinchable,u=a.ables;if(!s)return!1;var c="onPinch".concat(r?"Group":"","Start"),l="drag".concat(r?"Group":"","ControlStart"),f=(!0===s?t.controlAbles:u.filter((function(t){return s.indexOf(t.name)>-1}))).filter((function(t){return t.canPinch&&t[l]})),p=Bi(t,n,{});r&&(p.targets=r);var d=ki(t,c,p);e.isPinch=!1!==d,e.ables=f;var h=e.isPinch;return!!h&&(f.forEach((function(e){if(o[e.name]=o[e.name]||{},e[l]){var r=Qn(Qn({},n),{datas:o[e.name],parentRotate:i,isPinch:!0});e[l](t,r)}})),t.state.snapRenderInfo={request:n.isRequest,direction:[0,0]},h)},pinch:function(t,n){var e=n.datas,r=n.scale,i=n.distance,o=n.originalDatas,a=n.inputEvent,s=n.targets,u=n.angle;if(e.isPinch){var c=i*(1-1/r),l=Bi(t,n,{});s&&(l.targets=s);var f="onPinch".concat(s?"Group":"");ki(t,f,l);var p=e.ables,d="drag".concat(s?"Group":"","Control");return p.forEach((function(e){e[d]&&e[d](t,Qn(Qn({},n),{datas:o[e.name],inputEvent:a,parentDistance:c,parentRotate:u,isPinch:!0}))})),l}},pinchEnd:function(t,n){var e=n.datas,r=n.isPinch,i=n.inputEvent,o=n.targets,a=n.originalDatas;if(e.isPinch){var s="onPinch".concat(o?"Group":"","End"),u=Gi(t,n,{isDrag:r});o&&(u.targets=o),ki(t,s,u);var c=e.ables,l="drag".concat(o?"Group":"","ControlEnd");return c.forEach((function(e){e[l]&&e[l](t,Qn(Qn({},n),{isDrag:r,datas:a[e.name],inputEvent:i,isPinch:!0}))})),r}},pinchGroupStart:function(t,n){return this.pinchStart(t,Qn(Qn({},n),{targets:t.props.targets}))},pinchGroup:function(t,n){return this.pinch(t,Qn(Qn({},n),{targets:t.props.targets}))},pinchGroupEnd:function(t,n){return this.pinchEnd(t,Qn(Qn({},n),{targets:t.props.targets}))}}),Qi={name:"resizable",ableGroup:"size",canPinch:!0,props:{resizable:Boolean,throttleResize:Number,renderDirections:Array,keepRatio:Boolean,resizeFormat:Function},events:{onResizeStart:"resizeStart",onBeforeResize:"beforeResize",onResize:"resize",onResizeEnd:"resizeEnd",onResizeGroupStart:"resizeGroupStart",onBeforeResizeGroup:"beforeResizeGroup",onResizeGroup:"resizeGroup",onResizeGroupEnd:"resizeGroupEnd"},render:function(t,n){var e=t.props,r=e.resizable,i=e.edge;if(r)return i?Ce(t,n):we(t,n)},dragControlCondition:Li,dragControlStart:function(t,n){var e,r=n.inputEvent,i=n.isPinch,o=n.isGroup,a=n.parentDirection,s=n.datas,u=a||(i?[0,0]:Oi(r.target)),c=t.state,l=c.target,f=c.width,p=c.height;if(!u||!l)return!1;!i&&zr(t,n),s.datas={},s.direction=u,s.startOffsetWidth=f,s.startOffsetHeight=p,s.prevWidth=0,s.prevHeight=0,e=function(t){var n=Ai(t);return[parseFloat(n.width),parseFloat(n.height)]}(l),s.startWidth=e[0],s.startHeight=e[1];var d=[Math.max(0,f-s.startWidth),Math.max(0,p-s.startHeight)];if(s.minSize=d,s.maxSize=[1/0,1/0],!o){var h=Ai(l),v=h.position,g=h.minWidth,x=h.minHeight,y=h.maxWidth,E=h.maxHeight,S="static"===v||"relative"===v,M=S?l.parentElement:l.offsetParent,w=f,C=p;if(M&&(w=M.clientWidth,C=M.clientHeight,S)){var D=Ai(M);w-=parseFloat(D.paddingLeft)||0,C-=parseFloat(D.paddingTop)||0}s.minSize=qt([T(g,w)||0,T(x,C)||0],d),s.maxSize=qt([T(y,w)||1/0,T(E,C)||1/0],d)}var R=t.props.transformOrigin||"% %";function O(t){s.ratio=t&&isFinite(t)?t:0}function P(t){s.fixedDirection=t,s.fixedPosition=jr(s.startPositions,t)}function _(t){s.minSize=[T("".concat(t[0]),0)||0,T("".concat(t[1]),0)||0]}function z(t){var n=[t[0]||1/0,t[1]||1/0];b(n[0])&&!isFinite(n[0])||(n[0]=T("".concat(n[0]),0)||1/0),b(n[1])&&!isFinite(n[1])||(n[1]=T("".concat(n[1]),0)||1/0),s.maxSize=n}s.transformOrigin=R&&m(R)?R.split(" "):R,s.isWidth=!u[0]&&!u[1]||u[0]||!u[1],s.startPositions=_i(t.state),O(f/p),P([-u[0],-u[1]]),s.setFixedDirection=P,s.setMin=_,s.setMax=z;var B=Bi(t,n,{direction:u,set:function(t){var n=t[0],e=t[1];s.startWidth=n,s.startHeight=e},setMin:_,setMax:z,setRatio:O,setFixedDirection:P,setOrigin:function(t){s.transformOrigin=t},dragStart:Pr.dragStart(t,(new be).dragStart([0,0],n))});return!1!==ki(t,"onResizeStart",B)&&(s.isResize=!0,t.state.snapRenderInfo={request:n.isRequest,direction:u}),!!s.isResize&&B},dragControl:function(t,n){var e,r=n.datas,i=n.parentFlag,o=n.isPinch,a=n.parentKeepRatio,s=n.dragClient,u=n.parentDist,c=n.isRequest,l=r.isResize,f=r.transformOrigin,p=r.startWidth,d=r.startHeight,h=r.prevWidth,v=r.prevHeight,g=r.minSize,m=r.maxSize,b=r.ratio,x=r.isWidth,y=r.startOffsetWidth,E=r.startOffsetHeight;if(l){var S=t.props,M=S.resizeFormat,w=S.throttleResize,C=void 0===w?1:w,D=S.parentMoveable,R=r.direction,O=R,P=0,_=0;R[0]||R[1]||(O=[1,1]);var z=b&&(null!=a?a:S.keepRatio)||!1,B=W(),G=B[0],T=B[1];r.setFixedDirection(r.fixedDirection),ki(t,"onBeforeResize",Bi(t,n,{setFixedDirection:function(t){var n;return r.setFixedDirection(t),n=W(),G=n[0],T=n[1],[G,T]},boundingWidth:G,boundingHeight:T,setSize:function(t){G=t[0],T=t[1]}},!0));var k=s;s||(k=!i&&o?Kr(t,[0,0]):r.fixedPosition);var F=[0,0];if(o||(F=function(t,n,e,r,i,o,a){if(!Ae(t,"resizable"))return[0,0];var s=a.fixedDirection,u=t.state,c=u.allMatrix,l=u.is3d;return wr(t,(function(t,r){return Sr(c,n+t,e+r,s,i,l)}),n,e,r,i,o,a)}(t,G,T,R,k,c,r)),u&&(!u[0]&&(F[0]=0),!u[1]&&(F[1]=0)),z){O[0]&&O[1]&&F[0]&&F[1]&&(Math.abs(F[0])>Math.abs(F[1])?F[1]=0:F[0]=0);var I=!F[0]&&!F[1];I&&q(),O[0]&&!O[1]||F[0]&&!F[1]||I&&x?(G+=F[0],T=G/b):(!O[0]&&O[1]||!F[0]&&F[1]||I&&!x)&&(T+=F[1],G=T*b)}else G+=F[0],T+=F[1],G=Math.max(0,G),T=Math.max(0,T);e=A([G,T],g,m,!!z&&b),G=e[0],T=e[1],q();var j=[(P=G-y)-h,(_=T-E)-v];r.prevWidth=P,r.prevHeight=_;var N=Zr(t,G,T,r.fixedDirection,k,f);if(D||!j.every((function(t){return!t}))||!N.every((function(t){return!t}))){var X=Bi(t,n,{width:p+P,height:d+_,offsetWidth:Math.round(G),offsetHeight:Math.round(T),boundingWidth:G,boundingHeight:T,direction:R,dist:[P,_],delta:j,isPinch:!!o,drag:Pr.drag(t,me(n,t.state,N,!!o,!1))});return ki(t,"onResize",X),X}}function W(){var t=Ki(O,z,r,n);P=t.distWidth,_=t.distHeight;var e=O[0]||z?Math.max(y+P,1e-7):y,i=O[1]||z?Math.max(E+_,1e-7):E;return z&&y&&E&&(x?i=e/b:e=i*b),[e,i]}function q(){var t;M&&(t=M([G,T]),G=t[0],T=t[1]),G=Y(G,C),T=Y(T,C)}},dragControlAfter:function(t,n){var e=n.datas,r=e.isResize,i=e.startOffsetWidth,o=e.startOffsetHeight,a=e.prevWidth,s=e.prevHeight;if(r){var u=t.state,c=u.width-(i+a),l=u.height-(o+s),f=Math.abs(c)>3,p=Math.abs(l)>3;return f&&(e.startWidth+=c,e.startOffsetWidth+=c,e.prevWidth+=c),p&&(e.startHeight+=l,e.startOffsetHeight+=l,e.prevHeight+=l),f||p?this.dragControl(t,n):void 0}},dragControlEnd:function(t,n){var e=n.datas;if(e.isResize){e.isResize=!1;var r=Gi(t,n,{});return ki(t,"onResizeEnd",r),r}},dragGroupControlCondition:Li,dragGroupControlStart:function(t,n){var e=n.datas,r=this.dragControlStart(t,Qn(Qn({},n),{isGroup:!0}));if(!r)return!1;var i=xe(t,"resizable",n);function o(n,r){var i=e.fixedDirection,o=e.fixedPosition,a=jr(r.datas.startPositions||_i(n.state),i),s=Vt(nn(-t.rotation/180*Math.PI,3),[a[0]-o[0],a[1]-o[1],1],3),u=s[0],c=s[1];return r.datas.originalX=u,r.datas.originalY=c,r}var a=e.startOffsetWidth,s=e.startOffsetHeight;function u(){var t=e.minSize;i.forEach((function(n){var e=n.datas,r=e.minSize,i=e.startOffsetWidth,o=e.startOffsetHeight,u=a*(i?r[0]/i:0),c=s*(o?r[1]/o:0);t[0]=Math.max(t[0],u),t[1]=Math.max(t[1],c)}))}function c(){var t=e.maxSize;i.forEach((function(n){var e=n.datas,r=e.maxSize,i=e.startOffsetWidth,o=e.startOffsetHeight,u=a*(i?r[0]/i:0),c=s*(o?r[1]/o:0);t[0]=Math.min(t[0],u),t[1]=Math.min(t[1],c)}))}var l=Ee(t,this,"dragControlStart",n,(function(t,n){return o(t,n)}));u(),c();var f=function(t){r.setFixedDirection(t),l.forEach((function(n,e){n.setFixedDirection(t),o(n.moveable,i[e])}))};e.setFixedDirection=f;var p=Qn(Qn({},r),{targets:t.props.targets,events:l.map((function(t){return Qn(Qn({},t),{setMin:function(n){t.setMin(n),u()},setMax:function(n){t.setMax(n),c()}})})),setFixedDirection:f,setMin:function(t){r.setMin(t),u()},setMax:function(t){r.setMax(t),c()}}),d=ki(t,"onResizeGroupStart",p);return e.isResize=!1!==d,!!e.isResize&&r},dragGroupControl:function(t,n){var e=n.datas;if(e.isResize){Ti(t,"onBeforeResize",(function(e){ki(t,"onBeforeResizeGroup",Bi(t,n,Qn(Qn({},e),{targets:t.props.targets}),!0))}));var r=this.dragControl(t,n);if(r){var i=r.boundingWidth,o=r.boundingHeight,a=r.dist,s=t.props.keepRatio,u=[i/(i-a[0]),o/(o-a[1])],c=e.fixedPosition,l=Ee(t,this,"dragControl",n,(function(n,e){var r=Vt(nn(t.rotation/180*Math.PI,3),[e.datas.originalX*u[0],e.datas.originalY*u[1],1],3),i=r[0],o=r[1];return Qn(Qn({},e),{parentDist:null,parentScale:u,dragClient:qt(c,[i,o]),parentKeepRatio:s})})),f=Qn({targets:t.props.targets,events:l},r);return ki(t,"onResizeGroup",f),f}}},dragGroupControlEnd:function(t,n){var e=n.isDrag;if(n.datas.isResize){this.dragControlEnd(t,n);var r=Ee(t,this,"dragControlEnd",n);return ki(t,"onResizeGroupEnd",Gi(t,n,{targets:t.props.targets,events:r})),e}},request:function(t){var n={},e=0,r=0,i=t.getRect();return{isControl:!0,requestStart:function(t){return{datas:n,parentDirection:t.direction||[1,1]}},request:function(t){return"offsetWidth"in t?e=t.offsetWidth-i.offsetWidth:"deltaWidth"in t&&(e+=t.deltaWidth),"offsetHeight"in t?r=t.offsetHeight-i.offsetHeight:"deltaHeight"in t&&(r+=t.deltaHeight),{datas:n,parentDist:[e,r],parentKeepRatio:t.keepRatio}},requestEnd:function(){return{datas:n,isDrag:!0}}}}},to={name:"scalable",ableGroup:"size",canPinch:!0,props:{scalable:Boolean,throttleScale:Number,renderDirections:String,keepRatio:Boolean},events:{onScaleStart:"scaleStart",onBeforeScale:"beforeScale",onScale:"scale",onScaleEnd:"scaleEnd",onScaleGroupStart:"scaleGroupStart",onBeforeScaleGroup:"beforeScaleGroup",onScaleGroup:"scaleGroup",onScaleGroupEnd:"scaleGroupEnd"},render:function(t,n){var e=t.props,r=e.resizable,i=e.scalable,o=e.edge;if(!r&&i)return o?Ce(t,n):we(t,n)},dragControlCondition:Li,dragControlStart:function(t,n){var e=n.datas,r=n.isPinch,i=n.inputEvent,o=n.parentDirection||(r?[0,0]:Oi(i.target)),a=t.state,s=a.width,u=a.height,c=a.targetTransform,l=a.target,f=a.pos1,p=a.pos2,d=a.pos4;if(!o||!l)return!1;r||zr(t,n),e.datas={},e.transform=c,e.prevDist=[1,1],e.direction=o,e.startOffsetWidth=s,e.startOffsetHeight=u,e.startValue=[1,1];var h=N(f,p),v=N(p,d),g=!o[0]&&!o[1]||o[0]||!o[1];function m(t){e.ratio=t&&isFinite(t)?t:0}function b(t){e.fixedDirection=t,e.fixedPosition=jr(e.startPositions,t)}e.scaleWidth=h,e.scaleHeight=v,e.scaleXRatio=h/s,e.scaleYRatio=v/u,Xr(n,"scale"),e.isWidth=g,e.startPositions=_i(t.state),e.setFixedDirection=b,m(N(f,p)/N(p,d)),b([-o[0],-o[1]]);var x=Bi(t,n,Qn(Qn({direction:o,set:function(t){e.startValue=t},setRatio:m,setFixedDirection:b},Yr(n)),{dragStart:Pr.dragStart(t,(new be).dragStart([0,0],n))}));return!1!==ki(t,"onScaleStart",x)&&(e.isScale=!0,t.state.snapRenderInfo={request:n.isRequest,direction:o}),!!e.isScale&&x},dragControl:function(t,n){Br(n,"scale");var e=n.datas,r=n.parentKeepRatio,i=n.parentFlag,o=n.isPinch,a=n.dragClient,s=n.isRequest,u=e.prevDist,c=e.direction,l=e.startOffsetWidth,f=e.startOffsetHeight,p=e.isScale,d=e.startValue,h=e.isWidth,v=e.ratio;if(!p)return!1;var m=t.props,b=m.throttleScale,x=m.parentMoveable,y=c;c[0]||c[1]||(y=[1,1]);var E=v&&(null!=r?r:m.keepRatio)||!1,S=t.state;function M(){var t=Ki(y,E,e,n),r=t.distWidth,i=t.distHeight,o=(l+r)/l,a=(f+i)/f;return o=y[0]||E?o*d[0]:d[0],a=y[1]||E?a*d[1]:d[1],0===o&&(o=1e-9*(u[0]>0?1:-1)),0===a&&(a=1e-9*(u[1]>0?1:-1)),[o,a]}var w=M();if(!o&&t.props.groupable){var C=(S.snapRenderInfo||{}).direction;g(C)&&(C[0]||C[1])&&(S.snapRenderInfo={direction:c,request:n.isRequest})}ki(t,"onBeforeScale",Bi(t,n,{scale:w,setFixedDirection:function(t){return e.setFixedDirection(t),w=M()},setScale:function(t){w=t}},!0));var D=[w[0]/d[0],w[1]/d[1]],R=a,O=[0,0];if(a||(R=!i&&o?Kr(t,[0,0]):e.fixedPosition),o||(O=Cr(t,D,c,s,e)),E){y[0]&&y[1]&&O[0]&&O[1]&&(Math.abs(O[0]*l)>Math.abs(O[1]*f)?O[1]=0:O[0]=0);var P=!O[0]&&!O[1];if(P&&(h?D[0]=Y(D[0]*d[0],b)/d[0]:D[1]=Y(D[1]*d[1],b)/d[1]),y[0]&&!y[1]||O[0]&&!O[1]||P&&h){D[0]+=O[0];var _=l*D[0]*d[0]/v;D[1]=_/f/d[1]}else if(!y[0]&&y[1]||!O[0]&&O[1]||P&&!h){D[1]+=O[1];var z=f*D[1]*d[1]*v;D[0]=z/l/d[0]}}else D[0]+=O[0],D[1]+=O[1],O[0]||(D[0]=Y(D[0]*d[0],b)/d[0]),O[1]||(D[1]=Y(D[1]*d[1],b)/d[1]);0===D[0]&&(D[0]=1e-9*(u[0]>0?1:-1)),0===D[1]&&(D[1]=1e-9*(u[1]>0?1:-1));var B,G,T=[D[0]/u[0],D[1]/u[1]];G=d,w=[(B=D)[0]*G[0],B[1]*G[1]];var k=function(t,n,e,r,i){return Vr(t,"scale(".concat(n.join(", "),")"),e,r,i)}(t,D,e.fixedDirection,R,e),A=Lt(k,e.prevInverseDist||[0,0]);if(e.prevDist=D,e.prevInverseDist=k,w[0]===u[0]&&w[1]===u[1]&&A.every((function(t){return!t}))&&!x)return!1;var F=Gr(e,"scale(".concat(w.join(", "),")"),"scale(".concat(D.join(", "),")")),I=Bi(t,n,Qn({offsetWidth:l,offsetHeight:f,direction:c,scale:w,dist:D,delta:T,isPinch:!!o},Hr(t,F,A,o,n)));return ki(t,"onScale",I),I},dragControlEnd:function(t,n){var e=n.datas,r=n.isDrag;return!!e.isScale&&(e.isScale=!1,ki(t,"onScaleEnd",Gi(t,n,{})),r)},dragGroupControlCondition:Li,dragGroupControlStart:function(t,n){var e=n.datas,r=this.dragControlStart(t,n);if(!r)return!1;var i=xe(t,"resizable",n);function o(n,r){var i=e.fixedDirection,o=e.fixedPosition,a=jr(r.datas.startPositions||_i(n.state),i),s=Vt(nn(-t.rotation/180*Math.PI,3),[a[0]-o[0],a[1]-o[1],1],3),u=s[0],c=s[1];return r.datas.originalX=u,r.datas.originalY=c,r}e.moveableScale=t.scale;var a=Ee(t,this,"dragControlStart",n,(function(t,n){return o(t,n)})),s=function(t){r.setFixedDirection(t),a.forEach((function(n,e){n.setFixedDirection(t),o(n.moveable,i[e])}))};e.setFixedDirection=s;var u=Qn(Qn({},r),{targets:t.props.targets,events:a,setFixedDirection:s}),c=ki(t,"onScaleGroupStart",u);return e.isScale=!1!==c,!!e.isScale&&u},dragGroupControl:function(t,n){var e=n.datas;if(e.isScale){Ti(t,"onBeforeScale",(function(e){ki(t,"onBeforeScaleGroup",Bi(t,n,Qn(Qn({},e),{targets:t.props.targets}),!0))}));var r=this.dragControl(t,n);if(r){var i=e.moveableScale;t.scale=[r.scale[0]*i[0],r.scale[1]*i[1]];var o=t.props.keepRatio,a=r.dist,s=r.scale,u=e.fixedPosition,c=Ee(t,this,"dragControl",n,(function(n,e){var r=Vt(nn(t.rotation/180*Math.PI,3),[e.datas.originalX*a[0],e.datas.originalY*a[1],1],3),i=r[0],c=r[1];return Qn(Qn({},e),{parentDist:null,parentScale:s,parentKeepRatio:o,dragClient:qt(u,[i,c])})})),l=Qn({targets:t.props.targets,events:c},r);return ki(t,"onScaleGroup",l),l}}},dragGroupControlEnd:function(t,n){var e=n.isDrag;if(n.datas.isScale){this.dragControlEnd(t,n);var r=Ee(t,this,"dragControlEnd",n);return ki(t,"onScaleGroupEnd",Gi(t,n,{targets:t.props.targets,events:r})),e}},request:function(){var t={},n=0,e=0;return{isControl:!0,requestStart:function(n){return{datas:t,parentDirection:n.direction||[1,1]}},request:function(r){return n+=r.deltaWidth,e+=r.deltaHeight,{datas:t,parentDist:[n,e],parentKeepRatio:r.keepRatio}},requestEnd:function(){return{datas:t,isDrag:!0}}}}};function no(t,n){return t.map((function(t,e){return r=t,i=n[e],(r*(a=2)+i*(o=1))/(o+a);var r,i,o,a}))}function eo(t,n,e){var r=I(t,n),i=I(t,e)-r;return i>=0?i:i+2*Math.PI}var ro={name:"warpable",ableGroup:"size",props:{warpable:Boolean,renderDirections:Array},events:{onWarpStart:"warpStart",onWarp:"warp",onWarpEnd:"warpEnd"},render:function(t,n){var e=t.props,r=e.resizable,i=e.scalable,o=e.warpable,a=e.zoom;if(r||i||!o)return[];var s=t.state,u=s.pos1,c=s.pos2,l=s.pos3,f=s.pos4,p=no(u,c),d=no(c,u),h=no(u,l),v=no(l,u),g=no(l,f),m=no(f,l),b=no(c,f),x=no(f,c);return te([n.createElement("div",{className:Jr("line"),key:"middeLine1",style:Si(p,g,a)}),n.createElement("div",{className:Jr("line"),key:"middeLine2",style:Si(d,m,a)}),n.createElement("div",{className:Jr("line"),key:"middeLine3",style:Si(h,b,a)}),n.createElement("div",{className:Jr("line"),key:"middeLine4",style:Si(v,x,a)})],we(t,n),!0)},dragControlCondition:function(t,n){return!n.isRequest&&W(n.inputEvent.target,Jr("direction"))},dragControlStart:function(t,n){var e=n.datas,r=n.inputEvent,i=t.props.target,o=Oi(r.target);if(!o||!i)return!1;var a=t.state,s=a.transformOrigin,u=a.is3d,c=a.targetTransform,l=a.targetMatrix,f=a.width,p=a.height,d=a.left,h=a.top;return e.datas={},e.targetTransform=c,e.warpTargetMatrix=u?l:Yt(l,3,4),e.targetInverseMatrix=It(jt(e.warpTargetMatrix,4),3,4),e.direction=o,e.left=d,e.top=h,e.poses=[[0,0],[f,0],[0,p],[f,p]].map((function(t){return Lt(t,s)})),e.nextPoses=e.poses.map((function(t){var n=t[0],r=t[1];return Vt(e.warpTargetMatrix,[n,r,0,1],4)})),e.startValue=en(4),e.prevMatrix=en(4),e.absolutePoses=_i(a),e.posIndexes=Fr(o),zr(t,n),Xr(n,"matrix3d"),a.snapRenderInfo={request:n.isRequest,direction:o},!1!==ki(t,"onWarpStart",Bi(t,n,Qn({set:function(t){e.startValue=t}},Yr(n))))&&(e.isWarp=!0),e.isWarp},dragControl:function(t,n){var e=n.datas,r=n.isRequest,i=n.distX,o=n.distY,a=e.targetInverseMatrix,s=e.prevMatrix,u=e.isWarp,c=e.startValue,l=e.poses,f=e.posIndexes,p=e.absolutePoses;if(!u)return!1;if(Br(n,"matrix3d"),Ae(t,"warpable")){var d=f.map((function(t){return p[t]}));d.length>1&&d.push([(d[0][0]+d[1][0])/2,(d[0][1]+d[1][1])/2]);var h=mr(t,r,{horizontal:d.map((function(t){return t[1]+o})),vertical:d.map((function(t){return t[0]+i}))}),v=h.horizontal,g=h.vertical;o-=v.offset,i-=g.offset}var m=Ar({datas:e,distX:i,distY:o},!0),b=e.nextPoses.slice();if(f.forEach((function(t){b[t]=qt(b[t],m)})),!le.every((function(t){return n=t.map((function(t){return l[t]})),e=t.map((function(t){return b[t]})),r=eo(n[0],n[1],n[2]),i=eo(e[0],e[1],e[2]),o=Math.PI,!(r>=o&&i<=o||r<=o&&i>=o);var n,e,r,i,o})))return!1;var x=an(l[0],l[2],l[1],l[3],b[0],b[2],b[1],b[3]);if(!x.length)return!1;var y=Tr(e,Wt(a,x,4),!0),E=Wt(jt(s,4),y,4);e.prevMatrix=y;var S=Wt(c,y,4),M=Gr(e,"matrix3d(".concat(S.join(", "),")"),"matrix3d(".concat(y.join(", "),")"));return qr(n,M),ki(t,"onWarp",Bi(t,n,{delta:E,matrix:S,dist:y,multiply:Wt,transform:M})),!0},dragControlEnd:function(t,n){var e=n.datas,r=n.isDrag;return!!e.isWarp&&(e.isWarp=!1,ki(t,"onWarpEnd",Gi(t,n,{})),r)}},io=Jr("area-pieces"),oo=Jr("area-piece"),ao=Jr("avoid");function so(t){var n=t.areaElement;if(n){var e=t.state,r=e.width,i=e.height;!function(t,n){if(t.classList)t.classList.remove(n);else{var e=new RegExp("(\\s|^)"+n+"(\\s|$)");t.className=t.className.replace(e," ")}}(n,ao),n.style.cssText+="left: 0px; top: 0px; width: ".concat(r,"px; height: ").concat(i,"px")}}function uo(t){return t.createElement("div",{key:"area_pieces",className:io},t.createElement("div",{className:oo}),t.createElement("div",{className:oo}),t.createElement("div",{className:oo}),t.createElement("div",{className:oo}))}var co={name:"dragArea",props:{dragArea:Boolean,passDragArea:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},render:function(t,e){var r=t.props,i=r.target,o=r.dragArea,a=r.groupable,s=r.passDragArea,u=t.state,c=u.width,l=u.height,f=u.renderPoses,p=s?Jr("area","pass"):Jr("area");if(a)return[e.createElement("div",{key:"area",ref:n(t,"areaElement"),className:p}),uo(e)];if(!i||!o)return[];var d=an([0,0],[c,0],[0,l],[c,l],f[0],f[1],f[2],f[3]),h=d.length?pi(d,!0):"none";return[e.createElement("div",{key:"area",ref:n(t,"areaElement"),className:p,style:{top:"0px",left:"0px",width:"".concat(c,"px"),height:"".concat(l,"px"),transformOrigin:"0 0",transform:h}}),uo(e)]},dragStart:function(t,n){var e=n.datas,r=n.clientX,i=n.clientY;if(!n.inputEvent)return!1;e.isDragArea=!1;var o,a,s=t.areaElement,u=t.state,c=u.moveableClientRect,l=u.renderPoses,f=u.rootMatrix,p=u.is3d,d=c.left,h=c.top,v=mi(l),g=v.left,m=v.top,b=v.width,x=v.height,y=Ni(f,[r-d,i-h],p?4:3),E=y[0],S=y[1],M=[{left:g,top:m,width:b,height:(S-=m)-10},{left:g,top:m,width:(E-=g)-10,height:x},{left:g,top:m+S+10,width:b,height:x-S-10},{left:g+E+10,top:m,width:b-E-10,height:x}],w=[].slice.call(s.nextElementSibling.children);M.forEach((function(t,n){w[n].style.cssText="left: ".concat(t.left,"px;top: ").concat(t.top,"px; width: ").concat(t.width,"px; height: ").concat(t.height,"px;")})),a=ao,(o=s).classList?o.classList.add(a):o.className+=" "+a,u.disableNativeEvent=!0},drag:function(t,n){var e=n.datas,r=n.inputEvent;if(this.enableNativeEvent(t),!r)return!1;e.isDragArea||(e.isDragArea=!0,so(t))},dragEnd:function(t,n){this.enableNativeEvent(t);var e=n.inputEvent,r=n.datas;if(!e)return!1;r.isDragArea||so(t)},dragGroupStart:function(t,n){return this.dragStart(t,n)},dragGroup:function(t,n){return this.drag(t,n)},dragGroupEnd:function(t,n){return this.dragEnd(t,n)},unset:function(t){so(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var n=t.state;n.disableNativeEvent&&z((function(){n.disableNativeEvent=!1}))}},lo=ne("origin",{render:function(t,n){var e=t.props.zoom,r=t.state,i=r.beforeOrigin,o=r.rotation;return[n.createElement("div",{className:Jr("control","origin"),style:Mi(o,e,i),key:"beforeOrigin"})]}});function fo(t){var n=t.scrollContainer;return[n.scrollLeft,n.scrollTop]}var po={name:"scrollable",canPinch:!0,props:{scrollable:Boolean,scrollContainer:Object,scrollThreshold:Number,getScrollPosition:Function},events:{onScroll:"scroll",onScrollGroup:"scrollGroup"},dragRelation:"strong",dragStart:function(t,n){var e=t.props.scrollContainer,r=void 0===e?t.getContainer():e,i=new Pn,o=Vi(r,!0);n.datas.dragScroll=i;var a=n.isControl?"controlGesto":"targetGesto",s=n.targets;i.on("scroll",(function(e){var r=e.container,i=e.direction,o=Bi(t,n,{scrollContainer:r,direction:i}),a=s?"onScrollGroup":"onScroll";s&&(o.targets=s),ki(t,a,o)})).on("move",(function(e){var r=e.offsetX,i=e.offsetY;t[a].scrollBy(r,i,n.inputEvent,!1)})),i.dragStart(n,{container:o})},checkScroll:function(t,n){var e=n.datas.dragScroll;if(e){var r=t.props,i=r.scrollContainer,o=void 0===i?t.getContainer():i,a=r.scrollThreshold,s=void 0===a?0:a,u=r.getScrollPosition,c=void 0===u?fo:u;return e.drag(n,{container:o,threshold:s,getScrollPosition:function(t){return c({scrollContainer:t.container,direction:t.direction})}}),!0}},drag:function(t,n){return this.checkScroll(t,n)},dragEnd:function(t,n){n.datas.dragScroll.dragEnd(),n.datas.dragScroll=null},dragControlStart:function(t,n){return this.dragStart(t,Qn(Qn({},n),{isControl:!0}))},dragControl:function(t,n){return this.drag(t,n)},dragControlEnd:function(t,n){return this.dragEnd(t,n)},dragGroupStart:function(t,n){return this.dragStart(t,Qn(Qn({},n),{targets:t.props.targets}))},dragGroup:function(t,n){return this.drag(t,Qn(Qn({},n),{targets:t.props.targets}))},dragGroupEnd:function(t,n){return this.dragEnd(t,Qn(Qn({},n),{targets:t.props.targets}))},dragGroupControlStart:function(t,n){return this.dragStart(t,Qn(Qn({},n),{targets:t.props.targets,isControl:!0}))},dragGroupContro:function(t,n){return this.drag(t,Qn(Qn({},n),{targets:t.props.targets}))},dragGroupControEnd:function(t,n){return this.dragEnd(t,Qn(Qn({},n),{targets:t.props.targets}))}},ho={name:"",props:{target:Object,dragTarget:Object,container:Object,portalContainer:Object,rootContainer:Object,useResizeObserver:Boolean,zoom:Number,transformOrigin:Array,edge:Boolean,ables:Array,className:String,pinchThreshold:Number,pinchOutside:Boolean,triggerAblesSimultaneously:Boolean,checkInput:Boolean,cspNonce:String,translateZ:Number,hideDefaultLines:Boolean,props:Object,flushSync:Function},events:{}},vo=ne("padding",{render:function(t,n){var e=t.props;if(e.dragArea)return[];var r=e.padding||{},i=r.left,o=void 0===i?0:i,a=r.top,s=void 0===a?0:a,u=r.right,c=void 0===u?0:u,l=r.bottom,f=void 0===l?0:l,p=t.state,d=p.renderPoses,h=[p.pos1,p.pos2,p.pos3,p.pos4],v=[];return o>0&&v.push([0,2]),s>0&&v.push([0,1]),c>0&&v.push([1,3]),f>0&&v.push([2,3]),v.map((function(t,e){var r=t[0],i=t[1],o=an([0,0],[100,0],[0,100],[100,100],h[r],h[i],d[r],d[i]);if(o.length)return n.createElement("div",{key:"padding".concat(e),className:Jr("padding"),style:{transform:pi(o,!0)}})}))}}),go=["nw","ne","se","sw"];function mo(t,n){var e=t[0]+t[1],r=e>n?n/e:1;return t[0]*=r,t[1]=n-t[1]*r,t}var bo=[1,2,5,6],xo=[0,3,4,7],yo=[1,-1,-1,1],Eo=[1,1,-1,-1];function So(t,n,e,r,i,o,a,s,u){void 0===o&&(o=0),void 0===a&&(a=0),void 0===s&&(s=r),void 0===u&&(u=i);var c=[],l=!1,f=t.map((function(t,f){var p=n[f],d=p.horizontal,h=p.vertical;if(h&&!l&&(l=!0,c.push("/")),l){var v=Math.max(0,1===h?t[1]-a:u-t[1]);return c.push(Wi(v,i,e)),v}v=Math.max(0,1===d?t[0]-o:s-t[0]);return c.push(Wi(v,r,e)),v}));return{styles:c,raws:f}}function Mo(t){for(var n=[0,0],e=[0,0],r=t.length,i=0;i<r;++i){var o=t[i];o.sub&&(o.horizontal&&(0===n[1]&&(n[0]=i),n[1]=i-n[0]+1,e[0]=i+1),o.vertical&&(0===e[1]&&(e[0]=i),e[1]=i-e[0]+1))}return{horizontalRange:n,verticalRange:e}}function wo(t,n,e,r,i,o){var a,s,u,c;void 0===o&&(o=[0,0]);var l=t.indexOf("/"),f=(l>-1?t.slice(0,l):t).length,p=t.slice(0,f),d=t.slice(f+1),h=p[0],v=void 0===h?"0px":h,g=p[1],m=void 0===g?v:g,b=p[2],x=void 0===b?v:b,y=p[3],E=void 0===y?m:y,S=d[0],M=void 0===S?v:S,w=d[1],C=void 0===w?M:w,D=d[2],R=void 0===D?M:D,O=d[3],P=void 0===O?C:O,_=[v,m,x,E].map((function(t){return T(t,n)})),z=[M,C,R,P].map((function(t){return T(t,e)})),B=_.slice(),G=z.slice();a=mo([B[0],B[1]],n),B[0]=a[0],B[1]=a[1],s=mo([B[3],B[2]],n),B[3]=s[0],B[2]=s[1],u=mo([G[0],G[3]],e),G[0]=u[0],G[3]=u[1],c=mo([G[1],G[2]],e),G[1]=c[0],G[2]=c[1];var k=B.slice(0,Math.max(o[0],p.length)),A=G.slice(0,Math.max(o[1],d.length));return te(te([],k.map((function(t,n){var o=go[n];return{horizontal:yo[n],vertical:0,pos:[r+t,i+(-1===Eo[n]?e:0)],sub:!0,raw:_[n],direction:o}})),!0),A.map((function(t,e){var o=go[e];return{horizontal:0,vertical:Eo[e],pos:[r+(-1===yo[e]?n:0),i+t],sub:!0,raw:z[e],direction:o}})),!0)}function Co(t,n,e,r,i){void 0===i&&(i=n.length);var o=Mo(t.slice(r)),a=o.horizontalRange,s=o.verticalRange,u=e-r,c=0;if(0===u)c=i;else if(u>0&&u<a[1])c=a[1]-u;else{if(!(u>=s[0]))return;c=s[0]+s[1]-u}t.splice(e,c),n.splice(e,c)}function Do(t,n,e,r,i,o,a,s,u,c,l){void 0===c&&(c=0),void 0===l&&(l=0);var f=Mo(t.slice(e)),p=f.horizontalRange,d=f.verticalRange;if(r>-1)for(var h=1===yo[r]?o-c:s-o,v=p[1];v<=r;++v){var g=1===Eo[v]?l:u,m=0;if(r===v?m=o:0===v?m=c+h:-1===yo[v]&&(m=s-(n[e][0]-c)),t.splice(e+v,0,{horizontal:yo[v],vertical:0,pos:[m,g]}),n.splice(e+v,0,[m,g]),0===v)break}else if(i>-1){var b=1===Eo[i]?a-l:u-a;if(0===p[1]&&0===d[1]){var x=[c+b,l];t.push({horizontal:yo[0],vertical:0,pos:x}),n.push(x)}var y=d[0];for(v=d[1];v<=i;++v){m=1===yo[v]?c:s,g=0;if(i===v?g=a:0===v?g=l+b:1===Eo[v]?g=n[e+y][1]:-1===Eo[v]&&(g=u-(n[e+y][1]-l)),t.push({horizontal:0,vertical:Eo[v],pos:[m,g]}),n.push([m,g]),0===v)break}}}function Ro(t,n){return void 0===n&&(n=t.map((function(t){return t.raw}))),{horizontals:t.map((function(t,e){return t.horizontal?n[e]:null})).filter((function(t){return null!=t})),verticals:t.map((function(t,e){return t.vertical?n[e]:null})).filter((function(t){return null!=t}))}}var Oo=[[0,-1,"n"],[1,0,"e"]],Po=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function _o(t,n,e){var r=t.props.clipRelative,i=t.state,o=i.width,a=i.height,s=n,u=s.type,c=s.poses,l="rect"===u,f="circle"===u;if("polygon"===u)return e.map((function(t){return"".concat(Wi(t[0],o,r)," ").concat(Wi(t[1],a,r))}));if(l||"inset"===u){var p=e[1][1],d=e[3][0],h=e[7][0],v=e[5][1];if(l)return[p,d,v,h].map((function(t){return"".concat(t,"px")}));var g=[p,o-d,a-v,h].map((function(t,n){return Wi(t,n%2?o:a,r)}));if(e.length>8){var m=Lt(e[4],e[0]),b=m[0],x=m[1];g.push.apply(g,te(["round"],So(e.slice(8),c.slice(8),r,b,x,h,p,d,v).styles,!1))}return g}if(f||"ellipse"===u){var y=e[0],E=Wi(Math.abs(e[1][1]-y[1]),f?Math.sqrt((o*o+a*a)/2):a,r);return(g=f?[E]:[Wi(Math.abs(e[2][0]-y[0]),o,r),E]).push("at",Wi(y[0],o,r),Wi(y[1],a,r)),g}}function zo(t,n,e,r){var i=[r,(r+n)/2,n],o=[t,(t+e)/2,e];return Po.map((function(t){var n=t[0],e=t[1],r=t[2],a=i[n+1],s=o[e+1];return{vertical:Math.abs(e),horizontal:Math.abs(n),direction:r,pos:[a,s]}}))}function Bo(t){var n=[1/0,-1/0],e=[1/0,-1/0];return t.forEach((function(t){var r=t.pos;n[0]=Math.min(n[0],r[0]),n[1]=Math.max(n[1],r[0]),e[0]=Math.min(e[0],r[1]),e[1]=Math.max(e[1],r[1])})),[Math.abs(n[1]-n[0]),Math.abs(e[1]-e[0])]}function Go(t,n,e,r,i){var o,a,s,u,c,l,f,p=i;if(!p){var d=Ai(t),h=d.clipPath;p="none"!==h?h:d.clip}if(p&&"none"!==p&&"auto"!==p||(p=r)){var v=C(p),g=v.prefix,m=void 0===g?p:g,b=v.value,x=void 0===b?"":b,y="circle"===m,E=" ";if("polygon"===m)return E=",",{type:m,clipText:p,poses:A=(_=w(x||"0% 0%, 100% 0%, 100% 100%, 0% 100%")).map((function(t){var r=t.split(" "),i=r[0],o=r[1];return{vertical:1,horizontal:1,pos:[T(i,n),T(o,e)]}})),splitter:E};if(y||"ellipse"===m){var S="",R="",O=0,P=0,_=M(x);if(y){var z;z=void 0===(o=_[0])?"50%":o,S=void 0===(a=_[2])?"50%":a,R=void 0===(s=_[3])?"50%":s,O=T(z,Math.sqrt((n*n+e*e)/2)),P=O}else{var B,G;B=void 0===(u=_[0])?"50%":u,G=void 0===(c=_[1])?"50%":c,S=void 0===(l=_[3])?"50%":l,R=void 0===(f=_[4])?"50%":f,O=T(B,n),P=T(G,e)}var k=[T(S,n),T(R,e)],A=te([{vertical:1,horizontal:1,pos:k,direction:"nesw"}],Oo.slice(0,y?1:2).map((function(t){return{vertical:Math.abs(t[1]),horizontal:t[0],direction:t[2],sub:!0,pos:[k[0]+t[0]*O,k[1]+t[1]*P]}})),!0);return{type:m,clipText:p,radiusX:O,radiusY:P,left:k[0]-O,top:k[1]-P,poses:A,splitter:E}}if("inset"===m){var F=(_=M(x||"0 0 0 0")).indexOf("round"),I=(F>-1?_.slice(0,F):_).length,j=_.slice(I+1),N=_.slice(0,I),Y=N[0],X=N[1],W=void 0===X?Y:X,q=N[2],L=void 0===q?Y:q,H=N[3],V=void 0===H?W:H,U=[Y,L].map((function(t){return T(t,e)})),$=U[0],Z=U[1],K=[V,W].map((function(t){return T(t,n)})),J=K[0],Q=K[1],tt=n-Q,nt=e-Z,et=wo(j,tt-J,nt-$,J,$);return{type:"inset",clipText:p,poses:A=te(te([],zo($,tt,nt,J),!0),et,!0),top:$,left:J,right:tt,bottom:nt,radius:j,splitter:E}}if("rect"===m){E=",";var rt=(_=w(x||"0px, ".concat(n,"px, ").concat(e,"px, 0px"))).map((function(t){return D(t).value}));return{type:"rect",clipText:p,poses:A=zo($=rt[0],Q=rt[1],Z=rt[2],J=rt[3]),top:$,right:Q,bottom:Z,left:J,values:_,splitter:E}}}}var To={name:"clippable",props:{clippable:Boolean,defaultClipPath:String,customClipPath:String,keepRatio:Boolean,clipRelative:Boolean,clipArea:Boolean,dragWithClip:Boolean,clipTargetBounds:Boolean,clipVerticalGuidelines:Array,clipHorizontalGuidelines:Array,clipSnapThreshold:Boolean},events:{onClipStart:"clipStart",onClip:"clip",onClipEnd:"clipEnd"},css:[".control.clip-control {\n    background: #6d6;\n    cursor: pointer;\n}\n.control.clip-control.clip-radius {\n    background: #d66;\n}\n.line.clip-line {\n    background: #6e6;\n    cursor: move;\n    z-index: 1;\n}\n.clip-area {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.clip-ellipse {\n    position: absolute;\n    cursor: move;\n    border: 1px solid #6d6;\n    border: var(--zoompx) solid #6d6;\n    border-radius: 50%;\n    transform-origin: 0px 0px;\n}",":host {\n    --bounds-color: #d66;\n}",".guideline {\n    pointer-events: none;\n    z-index: 2;\n}",".line.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}"],render:function(t,n){var e=t.props,r=e.customClipPath,i=e.defaultClipPath,o=e.clipArea,a=e.zoom,s=t.state,u=s.target,c=s.width,l=s.height,f=s.allMatrix,p=s.is3d,d=s.left,h=s.top,v=s.pos1,g=s.pos2,m=s.pos3,b=s.pos4,x=s.clipPathState,y=s.snapBoundInfos,E=s.rotation;if(!u)return[];var S=Go(u,c,l,i||"inset",x||r);if(!S)return[];var M=p?4:3,w=S.type,C=S.poses.map((function(t){var n=vi(f,t.pos,M);return[n[0]-d,n[1]-h]})),D=[],R=[],O="rect"===w,P="inset"===w,_="polygon"===w;if(O||P||_){var z=P?C.slice(0,8):C;R=z.map((function(t,e){var r=0===e?z[z.length-1]:z[e-1],i=I(r,t),o=Ei(r,t);return n.createElement("div",{key:"clipLine".concat(e),className:Jr("line","clip-line","snap-control"),"data-clip-index":e,style:{width:"".concat(o,"px"),transform:"translate(".concat(r[0],"px, ").concat(r[1],"px) rotate(").concat(i,"rad) scaleY(").concat(a,")")}})}))}if(D=C.map((function(t,e){return n.createElement("div",{key:"clipControl".concat(e),className:Jr("control","clip-control","snap-control"),"data-clip-index":e,style:{transform:"translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(E,"rad) scale(").concat(a,")")}})})),P&&D.push.apply(D,C.slice(8).map((function(t,e){return n.createElement("div",{key:"clipRadiusControl".concat(e),className:Jr("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+e,style:{transform:"translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(E,"rad) scale(").concat(a,")")}})}))),"circle"===w||"ellipse"===w){var B=S.left,G=S.top,T=S.radiusX,k=S.radiusY,A=Lt(vi(f,[B,G],M),vi(f,[0,0],M)),F=A[0],j=A[1],N="none";if(!o){for(var Y=Math.max(10,T/5,k/5),X=[],W=0;W<=Y;++W){var q=2*Math.PI/Y*W;X.push([T+(T-a)*Math.cos(q),k+(k-a)*Math.sin(q)])}X.push([T,-2]),X.push([-2,-2]),X.push([-2,2*k+2]),X.push([2*T+2,2*k+2]),X.push([2*T+2,-2]),X.push([T,-2]),N="polygon(".concat(X.map((function(t){return"".concat(t[0],"px ").concat(t[1],"px")})).join(", "),")")}D.push(n.createElement("div",{key:"clipEllipse",className:Jr("clip-ellipse","snap-control"),style:{width:"".concat(2*T,"px"),height:"".concat(2*k,"px"),clipPath:N,transform:"translate(".concat(-d+F,"px, ").concat(-h+j,"px) ").concat(pi(f))}}))}if(o){var L=mi(te([v,g,m,b],C,!0)),H=L.width,V=L.height,U=L.left,$=L.top;if(_||O||P){X=P?C.slice(0,8):C;D.push(n.createElement("div",{key:"clipArea",className:Jr("clip-area","snap-control"),style:{width:"".concat(H,"px"),height:"".concat(V,"px"),transform:"translate(".concat(U,"px, ").concat($,"px)"),clipPath:"polygon(".concat(X.map((function(t){return"".concat(t[0]-U,"px ").concat(t[1]-$,"px")})).join(", "),")")}}))}}return y&&["vertical","horizontal"].forEach((function(t){var e=y[t],r="horizontal"===t;e.isSnap&&R.push.apply(R,e.snap.posInfos.map((function(e,i){var o=e.pos,s=Lt(vi(f,r?[0,o]:[o,0],M),[d,h]),u=Lt(vi(f,r?[c,o]:[o,l],M),[d,h]);return Me(n,"",s,u,a,"clip".concat(t,"snap").concat(i),"guideline")}))),e.isBound&&R.push.apply(R,e.bounds.map((function(e,i){var o=e.pos,s=Lt(vi(f,r?[0,o]:[o,0],M),[d,h]),u=Lt(vi(f,r?[c,o]:[o,l],M),[d,h]);return Me(n,"",s,u,a,"clip".concat(t,"bounds").concat(i),"guideline","bounds","bold")})))})),te(te([],D,!0),R,!0)},dragControlCondition:function(t,n){return n.inputEvent&&(n.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,n){var e=t.props.dragWithClip;return!(void 0===e||e)&&this.dragControlStart(t,n)},drag:function(t,n){return this.dragControl(t,Qn(Qn({},n),{isDragTarget:!0}))},dragEnd:function(t,n){return this.dragControlEnd(t,n)},dragControlStart:function(t,n){var e=t.state,r=t.props,i=r.defaultClipPath,o=r.customClipPath,a=e.target,s=e.width,u=e.height,c=n.inputEvent?n.inputEvent.target:null,l=c&&c.getAttribute("class")||"",f=n.datas,p=Go(a,s,u,i||"inset",o);if(!p)return!1;var d=p.clipText;return!1===ki(t,"onClipStart",Bi(t,n,{clipType:p.type,clipStyle:d,poses:p.poses.map((function(t){return t.pos}))}))?(f.isClipStart=!1,!1):(f.isControl=l&&l.indexOf("clip-control")>-1,f.isLine=l.indexOf("clip-line")>-1,f.isArea=l.indexOf("clip-area")>-1||l.indexOf("clip-ellipse")>-1,f.clipIndex=c?parseInt(c.getAttribute("data-clip-index"),10):-1,f.clipPath=p,f.isClipStart=!0,e.clipPathState=d,zr(t,n),!0)},dragControl:function(t,n){var e,r=n.datas,i=n.originalDatas,o=n.isDragTarget;if(!r.isClipStart)return!1;var a=r,s=a.isControl,u=a.isLine,c=a.isArea,l=a.clipIndex,f=a.clipPath;if(!f)return!1;var p=t.props.keepRatio,d=0,h=0,v=i.draggable,g=Ar(n);o&&v?(e=v.prevBeforeDist,d=e[0],h=e[1]):(d=g[0],h=g[1]);var m=[d,h],b=t.props,x=t.state,y=x.width,E=x.height,S=!c&&!s&&!u,M=f.type,w=f.poses,C=f.splitter,D=w.map((function(t){return t.pos}));S&&(d=-d,h=-h);var R=!s||"nesw"===w[l].direction,O="inset"===M||"rect"===M,P=w.map((function(){return[0,0]}));if(s&&!R){var _=w[l],z=_.horizontal,B=_.vertical,G=[d*Math.abs(z),h*Math.abs(B)];P=function(t,n,e,r,i){var o=t[n],a=o.direction,s=o.sub,u=t.map((function(){return[0,0]})),c=a?a.split(""):[];if(r&&n<8){var l=c.filter((function(t){return"w"===t||"e"===t})),f=c.filter((function(t){return"n"===t||"s"===t})),p=l[0],d=f[0];u[n]=e;var h=Bo(t),v=h[0],g=h[1],m=v&&g?v/g:0;if(m&&i){var b=t[(n+4)%8].pos,x=[0,0];a.indexOf("w")>-1?x[0]=-1:a.indexOf("e")>-1&&(x[0]=1),a.indexOf("n")>-1?x[1]=-1:a.indexOf("s")>-1&&(x[1]=1);var y=Zi([v,g],e,m,x,!0),E=v+y[0],S=g+y[1],M=b[1],w=b[1],C=b[0],D=b[0];-1===x[0]?C=D-E:1===x[0]?D=C+E:(C-=E/2,D+=E/2),-1===x[1]?M=w-S:w=1===x[1]?M+S:(M=w-S/2)+S;var R=zo(M,D,w,C);t.forEach((function(t,n){u[n][0]=R[n].pos[0]-t.pos[0],u[n][1]=R[n].pos[1]-t.pos[1]}))}else t.forEach((function(t,n){var r=t.direction;r&&(r.indexOf(p)>-1&&(u[n][0]=e[0]),r.indexOf(d)>-1&&(u[n][1]=e[1]))})),p&&(u[1][0]=e[0]/2,u[5][0]=e[0]/2),d&&(u[3][1]=e[1]/2,u[7][1]=e[1]/2)}else a&&!s?c.forEach((function(n){var r="n"===n||"s"===n;t.forEach((function(t,i){var o=t.direction,a=t.horizontal,s=t.vertical;o&&-1!==o.indexOf(n)&&(u[i]=[r||!a?0:e[0],r&&s?e[1]:0])}))})):u[n]=e;return u}(w,l,G,O,p)}else R&&(P=D.map((function(){return[d,h]})));var k=D.map((function(t,n){return qt(t,P[n])})),A=te([],k,!0);x.snapBoundInfos=null;var F="circle"===f.type,I="ellipse"===f.type;if(F||I){var j=mi(k),N=Math.abs(j.bottom-j.top),Y=Math.abs(I?j.right-j.left:N),X=k[0][1]+N,W=k[0][0]-Y,q=k[0][0]+Y;F&&(A.push([q,j.bottom]),P.push([1,0])),A.push([j.left,X]),P.push([0,1]),A.push([W,j.bottom]),P.push([1,0])}var L=je((b.clipHorizontalGuidelines||[]).map((function(t){return T("".concat(t),E)})),(b.clipVerticalGuidelines||[]).map((function(t){return T("".concat(t),y)})),y,E),H=[],V=[];if(F||I)H=[A[4][0],A[2][0]],V=[A[1][1],A[3][1]];else if(O){var U=[A[0],A[2],A[4],A[6]],$=[P[0],P[2],P[4],P[6]];H=U.filter((function(t,n){return $[n][0]})).map((function(t){return t[0]})),V=U.filter((function(t,n){return $[n][1]})).map((function(t){return t[1]}))}else H=A.filter((function(t,n){return P[n][0]})).map((function(t){return t[0]})),V=A.filter((function(t,n){return P[n][1]})).map((function(t){return t[1]}));var Z=[0,0],K=br(L,b.clipTargetBounds&&{left:0,top:0,right:y,bottom:E},H,V,5),J=K.horizontal,Q=K.vertical,tt=J.offset,nt=Q.offset;if(J.isBound&&(Z[1]+=tt),Q.isBound&&(Z[0]+=nt),(I||F)&&0===P[0][0]&&0===P[0][1]){var et=(j=mi(k)).bottom-j.top,rt=I?j.right-j.left:et;rt-=Q.isBound?Math.abs(nt):0===Q.snapIndex?-nt:nt,et-=J.isBound?Math.abs(tt):0===J.snapIndex?-tt:tt,F&&(rt=et=Ue(Q,J)>0?et:rt);var it=A[0];A[1][1]=it[1]-et,A[2][0]=it[0]+rt,A[3][1]=it[1]+et,A[4][0]=it[0]-rt}else if(O&&p&&s){var ot=Bo(w),at=ot[0],st=ot[1],ut=at&&st?at/st:0,ct=w[l].direction||"",lt=A[1][1];X=A[5][1],W=A[7][0],q=A[3][0];tt<=nt?tt=nt/ut:nt=tt*ut,ct.indexOf("w")>-1?W-=nt:ct.indexOf("e")>-1?q-=nt:(W+=nt/2,q-=nt/2),ct.indexOf("n")>-1?lt-=tt:ct.indexOf("s")>-1?X-=tt:(lt+=tt/2,X-=tt/2);var ft=zo(lt,q,X,W);A.forEach((function(t,n){var e;e=ft[n].pos,t[0]=e[0],t[1]=e[1]}))}else A.forEach((function(t,n){var e=P[n];e[0]&&(t[0]-=nt),e[1]&&(t[1]-=tt)}));var pt=_o(t,f,k),dt="".concat(M,"(").concat(pt.join(C),")");if(x.clipPathState=dt,F||I)H=[A[4][0],A[2][0]],V=[A[1][1],A[3][1]];else if(O){H=(U=[A[0],A[2],A[4],A[6]]).map((function(t){return t[0]})),V=U.map((function(t){return t[1]}))}else H=A.map((function(t){return t[0]})),V=A.map((function(t){return t[1]}));if(x.snapBoundInfos=br(L,b.clipTargetBounds&&{left:0,top:0,right:y,bottom:E},H,V,1),v){var ht=x.is3d,vt=x.allMatrix,gt=ht?4:3,mt=Z;o&&(mt=[m[0]+Z[0]-g[0],m[1]+Z[1]-g[1]]),v.deltaOffset=Wt(vt,[mt[0],mt[1],0,0],gt)}return ki(t,"onClip",Bi(t,n,{clipEventType:"changed",clipType:M,poses:k,clipStyle:dt,clipStyles:pt,distX:d,distY:h})),!0},dragControlEnd:function(t,n){this.unset(t);var e=n.isDrag,r=n.datas,i=n.isDouble,o=r.isLine,a=r.isClipStart,s=r.isControl;return!!a&&(ki(t,"onClipEnd",Gi(t,n,{})),i&&(s?function(t,n){var e=n.datas,r=e.clipPath,i=e.clipIndex,o=r,a=o.type,s=o.poses,u=o.splitter,c=s.map((function(t){return t.pos})),l=c.length;if("polygon"===a)s.splice(i,1),c.splice(i,1);else{if("inset"!==a)return;if(i<8)return;if(Co(s,c,i,8,l),l===s.length)return}var f=_o(t,r,c);ki(t,"onClip",Bi(t,n,{clipEventType:"removed",clipType:a,poses:c,clipStyles:f,clipStyle:"".concat(a,"(").concat(f.join(u),")"),distX:0,distY:0}))}(t,n):o&&function(t,n){var e=_r(t,n),r=e[0],i=e[1],o=n.datas,a=o.clipPath,s=o.clipIndex,u=a,c=u.type,l=u.poses,f=u.splitter,p=l.map((function(t){return t.pos}));if("polygon"===c)p.splice(s,0,[r,i]);else{if("inset"!==c)return;var d=bo.indexOf(s),h=xo.indexOf(s),v=l.length;if(Do(l,p,8,d,h,r,i,p[4][0],p[4][1],p[0][0],p[0][1]),v===l.length)return}var g=_o(t,a,p);ki(t,"onClip",Bi(t,n,{clipEventType:"added",clipType:c,poses:p,clipStyles:g,clipStyle:"".concat(c,"(").concat(g.join(f),")"),distX:0,distY:0}))}(t,n)),i||e)},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},ko={name:"originDraggable",props:{originDraggable:Boolean,originRelative:Boolean},events:{onDragOriginStart:"dragOriginStart",onDragOrigin:"dragOrigin",onDragOriginEnd:"dragOriginEnd"},css:[":host[data-able-origindraggable] .control.origin {\n    pointer-events: auto;\n}"],dragControlCondition:function(t,n){return n.isRequest?"originDraggable"===n.requestAble:W(n.inputEvent.target,Jr("origin"))},dragControlStart:function(t,n){var e=n.datas;zr(t,n);var r=Bi(t,n,{dragStart:Pr.dragStart(t,(new be).dragStart([0,0],n))}),i=ki(t,"onDragOriginStart",r);return e.startOrigin=t.state.transformOrigin,e.startTargetOrigin=t.state.targetOrigin,e.prevOrigin=[0,0],e.isDragOrigin=!0,!1===i?(e.isDragOrigin=!1,!1):r},dragControl:function(t,n){var e=n.datas,r=n.isPinch,i=n.isRequest;if(!e.isDragOrigin)return!1;var o=Ar(n),a=o[0],s=o[1],u=t.state,c=u.width,l=u.height,f=u.offsetMatrix,p=u.targetMatrix,d=u.is3d,h=t.props.originRelative,v=void 0===h||h,g=d?4:3,m=[a,s];if(i){var b=n.distOrigin;(b[0]||b[1])&&(m=b)}var x=qt(e.startOrigin,m),y=qt(e.startTargetOrigin,m),E=Lt(m,e.prevOrigin),S=Nr(f,p,x,g),M=t.getRect(),w=mi(gi(S,c,l,g)),C=[M.left-w.left,M.top-w.top];e.prevOrigin=m;var D=Bi(t,n,{width:c,height:l,origin:x,dist:m,delta:E,transformOrigin:[Wi(y[0],c,v),Wi(y[1],l,v)].join(" "),drag:Pr.drag(t,me(n,t.state,C,!!r,!1))});return ki(t,"onDragOrigin",D),D},dragControlEnd:function(t,n){return!!n.datas.isDragOrigin&&(ki(t,"onDragOriginEnd",Gi(t,n,{})),!0)},dragGroupControlCondition:function(t,n){return this.dragControlCondition(t,n)},dragGroupControlStart:function(t,n){return!!this.dragControlStart(t,n)},dragGroupControl:function(t,n){var e=this.dragControl(t,n);return!!e&&(t.transformOrigin=e.transformOrigin,!0)},request:function(t){var n={},e=t.getRect(),r=0,i=0,o=e.transformOrigin,a=[0,0];return{isControl:!0,requestStart:function(){return{datas:n}},request:function(t){return"deltaOrigin"in t?(a[0]+=t.deltaOrigin[0],a[1]+=t.deltaOrigin[1]):"origin"in t?(a[0]=t.origin[0]-o[0],a[1]=t.origin[1]-o[1]):("x"in t?r=t.x-e.left:"deltaX"in t&&(r+=t.deltaX),"y"in t?i=t.y-e.top:"deltaY"in t&&(i+=t.deltaY)),{datas:n,distX:r,distY:i,distOrigin:a}},requestEnd:function(){return{datas:n,isDrag:!0}}}}};function Ao(t,n,e,r,i){var o;void 0===r&&(r=[0,0]);if(i)o=i;else{var a=Ai(t);o=a&&a.borderRadius||""}return wo(!o||!i&&"0px"===o?[]:M(o),n,e,0,0,r)}function Fo(t,n,e,r,i,o){var a=t.state,s=a.width,u=a.height,c=So(o,i,t.props.roundRelative,s,u),l=c.raws,f=c.styles,p=Ro(i,l),d=p.horizontals,h=p.verticals,v=f.join(" ");a.borderRadiusState=v,ki(t,"onRound",Bi(t,n,{horizontals:d,verticals:h,borderRadius:v,width:s,height:u,delta:r,dist:e}))}var Io={name:"roundable",props:{roundable:Boolean,roundRelative:Boolean,minRoundControls:Array,maxRoundControls:Array,roundClickable:Boolean},events:{onRoundStart:"roundStart",onRound:"round",onRoundEnd:"roundEnd"},css:[".control.border-radius {\n    background: #d66;\n    cursor: pointer;\n}",":host[data-able-roundable] .line.direction {\n    cursor: pointer;\n}"],render:function(t,n){var e=t.state,r=e.target,i=e.width,o=e.height,a=e.allMatrix,s=e.is3d,u=e.left,c=e.top,l=e.borderRadiusState,f=t.props,p=f.minRoundControls,d=void 0===p?[0,0]:p,h=f.maxRoundControls,v=void 0===h?[4,4]:h,g=f.zoom;if(!r)return null;var m=s?4:3,b=Ao(r,i,o,d,l);if(!b)return null;var x=0,y=0;return b.map((function(t,e){y+=Math.abs(t.horizontal),x+=Math.abs(t.vertical);var r=Lt(vi(a,t.pos,m),[u,c]),i=t.vertical?x<=v[1]:y<=v[0];return n.createElement("div",{key:"borderRadiusControl".concat(e),className:Jr("control","border-radius"),"data-radius-index":e,style:{display:i?"block":"none",transform:"translate(".concat(r[0],"px, ").concat(r[1],"px) scale(").concat(g,")")}})}))},dragControlCondition:function(t,n){if(!n.inputEvent||n.isRequest)return!1;var e=n.inputEvent.target.getAttribute("class")||"";return e.indexOf("border-radius")>-1||e.indexOf("moveable-line")>-1&&e.indexOf("moveable-direction")>-1},dragControlStart:function(t,n){var e=n.inputEvent,r=n.datas,i=e.target,o=i.getAttribute("class")||"",a=o.indexOf("border-radius")>-1,s=o.indexOf("moveable-line")>-1&&o.indexOf("moveable-direction")>-1,u=a?parseInt(i.getAttribute("data-radius-index"),10):-1,c=s?parseInt(i.getAttribute("data-line-index"),10):-1;if(!a&&!s)return!1;if(!1===ki(t,"onRoundStart",Bi(t,n,{})))return!1;r.lineIndex=c,r.controlIndex=u,r.isControl=a,r.isLine=s,zr(t,n);var l=t.props,f=l.roundRelative,p=l.minRoundControls,d=void 0===p?[0,0]:p,h=t.state,v=h.target,g=h.width,m=h.height;r.isRound=!0,r.prevDist=[0,0];var b=Ao(v,g,m,d)||[];return r.controlPoses=b,h.borderRadiusState=So(b.map((function(t){return t.pos})),b,f,g,m).styles.join(" "),!0},dragControl:function(t,n){var e=n.datas;if(!e.isRound||!e.isControl||!e.controlPoses.length)return!1;var r=e.controlIndex,i=e.controlPoses,o=Ar(n),a=o[0],s=o[1],u=[a,s],c=Lt(u,e.prevDist),l=t.props.maxRoundControls,f=void 0===l?[4,4]:l,p=t.state,d=p.width,h=p.height,v=i[r],g=v.vertical,m=v.horizontal,b=i.map((function(t){var n=t.horizontal,e=t.vertical,r=[n*m*u[0],e*g*u[1]];if(n){if(1===f[0])return r;if(f[0]<4&&n!==m)return r}else{if(0===f[1])return r[1]=e*m*u[0]/d*h,r;if(g){if(1===f[1])return r;if(f[1]<4&&e!==g)return r}}return[0,0]}));b[r]=u;var x=i.map((function(t,n){return qt(t.pos,b[n])}));return e.prevDist=[a,s],Fo(t,n,u,c,i,x),!0},dragControlEnd:function(t,n){var e=t.state;e.borderRadiusState="";var r=n.datas,i=n.isDouble;if(!r.isRound)return!1;var o=e.width,a=e.height,s=r.isControl,u=r.controlIndex,c=r.isLine,l=r.lineIndex,f=r.controlPoses,p=f.map((function(t){return t.pos})),d=p.length,h=t.props.roundClickable;if(i&&(void 0===h||h)){if(s)Co(f,p,u,0);else if(c){var v=_r(t,n);!function(t,n,e,r,i,o,a){var s=Ro(t),u=s.horizontals,c=s.verticals,l=u.length,f=c.length,p=-1,d=-1;0===e?0===l?p=0:1===l&&(p=1):3===e&&(l<=2?p=2:l<=3&&(p=3)),2===e?0===f?d=0:f<4&&(d=3):1===e&&(f<=1?d=1:f<=2&&(d=2)),Do(t,n,0,p,d,r,i,o,a)}(f,p,l,v[0],v[1],o,a)}d!==f.length&&Fo(t,n,[0,0],[0,0],f,p)}return ki(t,"onRoundEnd",Gi(t,n,{})),e.borderRadiusState="",!0},unset:function(t){t.state.borderRadiusState=""}};var jo={isPinch:!0,name:"beforeRenderable",props:{},events:{onBeforeRenderStart:"beforeRenderStart",onBeforeRender:"beforeRender",onBeforeRenderEnd:"beforeRenderEnd",onBeforeRenderGroupStart:"beforeRenderGroupStart",onBeforeRenderGroup:"beforeRenderGroup",onBeforeRenderGroupEnd:"beforeRenderGroupEnd"},dragRelation:"weak",setTransform:function(t,n){var e=t.state,r=e.is3d,i=e.target,o=e.targetMatrix,a=null==i?void 0:i.style.transform,s=r?"matrix3d(".concat(o.join(","),")"):"matrix(".concat(Ht(o,!0),")"),u=a&&"none"!==a?a:s;n.datas.startTransforms=function(t,n){return t===(n?"matrix3d(".concat(en(4)):"matrix(".concat(en(3),")"))||"matrix(1,0,0,1,0,0)"===t}(u,r)?[]:M(u)},resetTransform:function(t){t.datas.nextTransforms=t.datas.startTransforms,t.datas.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,n){return Bi(t,n,{setTransform:function(t){n.datas.startTransforms=g(t)?t:M(t)},isPinch:!!n.isPinch})},fillDragParams:function(t,n){return Bi(t,n,{isPinch:!!n.isPinch})},dragStart:function(t,n){this.setTransform(t,n),ki(t,"onBeforeRenderStart",this.fillDragStartParams(t,n))},drag:function(t,n){this.resetTransform(n),ki(t,"onBeforeRender",Bi(t,n,{isPinch:!!n.isPinch}))},dragEnd:function(t,n){ki(t,"onBeforeRenderEnd",Bi(t,n,{isPinch:!!n.isPinch,isDrag:n.isDrag}))},dragGroupStart:function(t,n){var e=this;this.dragStart(t,n);var r=xe(t,"beforeRenderable",n),i=t.moveables,o=r.map((function(t,n){var r=i[n];return e.setTransform(r,t),e.fillDragStartParams(r,t)}));ki(t,"onBeforeRenderGroupStart",Bi(t,n,{isPinch:!!n.isPinch,targets:t.props.targets,setTransform:function(){},events:o}))},dragGroup:function(t,n){var e=this;this.drag(t,n);var r=xe(t,"beforeRenderable",n),i=t.moveables,o=r.map((function(t,n){var r=i[n];return e.resetTransform(t),e.fillDragParams(r,t)}));ki(t,"onBeforeRenderGroup",Bi(t,n,{isPinch:!!n.isPinch,targets:t.props.targets,events:o}))},dragGroupEnd:function(t,n){this.dragEnd(t,n),ki(t,"onBeforeRenderGroupEnd",Bi(t,n,{isPinch:!!n.isPinch,isDrag:n.isDrag,targets:t.props.targets}))},dragControlStart:function(t,n){return this.dragStart(t,n)},dragControl:function(t,n){return this.drag(t,n)},dragControlEnd:function(t,n){return this.dragEnd(t,n)},dragGroupControlStart:function(t,n){return this.dragGroupStart(t,n)},dragGroupControl:function(t,n){return this.dragGroup(t,n)},dragGroupControlEnd:function(t,n){return this.dragGroupEnd(t,n)}},No={name:"renderable",props:{},events:{onRenderStart:"renderStart",onRender:"render",onRenderEnd:"renderEnd",onRenderGroupStart:"renderGroupStart",onRenderGroup:"renderGroup",onRenderGroupEnd:"renderGroupEnd"},dragRelation:"weak",dragStart:function(t,n){ki(t,"onRenderStart",Bi(t,n,{isPinch:!!n.isPinch}))},drag:function(t,n){ki(t,"onRender",this.fillDragParams(t,n))},dragAfter:function(t,n){if(n.resultCount)return this.drag(t,n)},dragEnd:function(t,n){ki(t,"onRenderEnd",this.fillDragEndParams(t,n))},dragGroupStart:function(t,n){ki(t,"onRenderGroupStart",Bi(t,n,{isPinch:!!n.isPinch,targets:t.props.targets}))},dragGroup:function(t,n){var e=this,r=xe(t,"beforeRenderable",n),i=t.moveables,o=r.map((function(t,n){var r=i[n];return e.fillDragParams(r,t)}));ki(t,"onRenderGroup",Bi(t,n,{isPinch:!!n.isPinch,targets:t.props.targets,transform:Lr(n),events:o}))},dragGroupEnd:function(t,n){var e=this,r=xe(t,"beforeRenderable",n),i=t.moveables,o=r.map((function(t,n){var r=i[n];return e.fillDragEndParams(r,t)}));ki(t,"onRenderGroupEnd",Bi(t,n,{isPinch:!!n.isPinch,isDrag:n.isDrag,targets:t.props.targets,events:o}))},dragControlStart:function(t,n){return this.dragStart(t,n)},dragControl:function(t,n){return this.drag(t,n)},dragControlAfter:function(t,n){return this.dragAfter(t,n)},dragControlEnd:function(t,n){return this.dragEnd(t,n)},dragGroupControlStart:function(t,n){return this.dragGroupStart(t,n)},dragGroupControl:function(t,n){return this.dragGroup(t,n)},dragGroupControlEnd:function(t,n){return this.dragGroupEnd(t,n)},fillDragParams:function(t,n){return Bi(t,n,{isPinch:!!n.isPinch,transform:Lr(n)})},fillDragEndParams:function(t,n){return Bi(t,n,{isPinch:!!n.isPinch,isDrag:n.isDrag})}};function Yo(t,n,e,r,i,o,a){var s="Start"===i,u=t.state.target,c=o.isRequest;if(!u||s&&r.indexOf("Control")>-1&&!c&&t.areaElement===o.inputEvent.target)return!1;var l="".concat(e).concat(r).concat(i),f="".concat(e).concat(r,"Condition"),p="End"===i,d="After"===i,h=s&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());h&&t.updateRect(i,!0,!1),""!==i||c||Yi(t.state,o);var v=te([],t[n],!0);if(c){var g=o.requestAble;v.some((function(t){return t.name===g}))||v.push.apply(v,t.props.ables.filter((function(t){return t.name===g})))}if(!v.length)return!1;var m=te(te([jo],v,!0),[No],!1).filter((function(t){return t[l]})),b=o.datas;h&&m.forEach((function(n){n.unset&&n.unset(t)}));var x,y=o.inputEvent;p&&y&&(x=document.elementFromPoint(o.clientX,o.clientY)||y.target);var E=0,S=m.filter((function(n){var e=n.name,r=b[e]||(b[e]={});if(s&&(r.isEventStart=!n[f]||n[f](t,o)),r.isEventStart){var i=n[l](t,Qn(Qn({},o),{resultCount:E,datas:r,originalDatas:b,inputTarget:x}));return t._emitter.off(),s&&!1===i&&(r.isEventStart=!1),E+=i?1:0,i}return!1})).length,M=!1;if(s&&m.length&&!S&&(M=0===m.filter((function(t){var n=t.name,e=b[n];return!!e.isEventStart&&("strong"!==t.dragRelation||(e.isEventStart=!1,!1))})).length),(p||M)&&(t.state.gesto=null,t.moveables&&t.moveables.forEach((function(t){t.state.gesto=null}))),h&&M&&m.forEach((function(n){n.unset&&n.unset(t)})),s&&!c&&S&&(null==o||o.preventDefault()),t.isUnmounted||M)return!1;(!s&&S&&!a||p)&&(t.props.flushSync||Qr)((function(){t.updateRect(p?i:"",!0,!1),t.forceUpdate()}));return s||p||d||!S||a||Yo(t,n,e,r,i+"After",o),!0}function Xo(t,n,e){var r=t.controlBox.getElement(),i=[];i.push(r),t.props.dragArea&&!t.props.dragTarget||i.push(n);var o=function(n){var e=n.inputEvent.target;return e===t.areaElement||!t.isMoveableElement(e)&&!t.controlBox.getElement().contains(e)||W(e,"moveable-area")||W(e,"moveable-padding")};return Wo(t,i,"targetAbles",e,{dragStart:o,pinchStart:o})}function Wo(t,n,e,r,i){void 0===i&&(i={});var o=t.props,a=o.pinchOutside,s=o.pinchThreshold,u={preventDefault:!1,preventRightClick:!0,preventWheelClick:!0,container:window,pinchThreshold:s,pinchOutside:a},c=new Nn(n,u);return["drag","pinch"].forEach((function(n){["Start","","End"].forEach((function(o){c.on("".concat(n).concat(o),(function(a){var s=a.eventType;!i[s]||i[s](a)?Yo(t,e,n,r,o,a)||a.stop():a.stop()}))}))})),c}var qo=function(){function t(t,n,e){var r=this;this.target=t,this.moveable=n,this.eventName=e,this.ables=[],this._onEvent=function(t){var n=r.eventName,e=r.moveable;e.state.disableNativeEvent||r.ables.forEach((function(r){r[n](e,{inputEvent:t})}))},t.addEventListener(e.toLowerCase(),this._onEvent)}var n=t.prototype;return n.setAbles=function(t){this.ables=t},n.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t}(),Lo=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.state=Qn({container:null,gesto:null,renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1},Di(null)),n.enabledAbles=[],n.targetAbles=[],n.controlAbles=[],n.rotation=0,n.scale=[1,1],n.isUnmounted=!1,n.events={mouseEnter:null,mouseLeave:null},n._emitter=new Zn,n._prevTarget=null,n._prevDragArea=!1,n._observer=null,n._observerId=0,n.onPreventClick=function(t){t.stopPropagation(),t.preventDefault(),L(window,"click",n.onPreventClick,!0)},n.checkUpdateRect=function(){if(!n.isDragging()){var t=n.props.parentMoveable;t?t.checkUpdateRect():(B(n._observerId),n._observerId=z((function(){n.isDragging()||n.updateRect()})))}},n}Jn(e,t);var r=e.prototype;return r.render=function(){var t=this.props,e=this.state,r=t.parentPosition,i=t.className,o=t.target,a=t.zoom,s=t.cspNonce,u=t.translateZ,c=t.cssStyled,l=t.portalContainer;this.checkUpdate(),this.updateRenderPoses();var f=r||{left:0,top:0},p=f.left,d=f.top,h=e.left,v=e.top,g=e.target,m=e.direction,b=e.hasFixed,x=t.targets,y=(x&&x.length||o)&&g,E=this.isDragging(),S={};return this.getEnabledAbles().forEach((function(t){S["data-able-".concat(t.name.toLowerCase())]=!0})),it(c,Qn({cspNonce:s,ref:n(this,"controlBox"),className:"".concat(Jr("control-box",-1===m?"reverse":"",E?"dragging":"")," ").concat(i)},S,{onClick:this.onPreventClick,portalContainer:l,style:{position:b?"fixed":"absolute",display:y?"block":"none",transform:"translate3d(".concat(h-p,"px, ").concat(v-d,"px, ").concat(u,")"),"--zoom":a,"--zoompx":"".concat(a,"px")}}),this.renderAbles(),this._renderLines())},r.componentDidMount=function(){this.isUnmounted=!1,this.controlBox.getElement();var t=this.props,n=t.parentMoveable,e=t.container,r=t.wrapperMoveable;this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),e||n||r||this.updateRect("",!1,!0),this.updateCheckInput(),this._updateObserver(this.props)},r.componentDidUpdate=function(t){this._updateNativeEvents(),this._updateEvents(),this._updateTargets(),this.updateCheckInput(),this._updateObserver(t)},r.componentWillUnmount=function(){this.isUnmounted=!0,this._emitter.off(),zi(this,"targetGesto"),zi(this,"controlGesto");var t=this.events;for(var n in t){var e=t[n];e&&e.destroy()}},r.getContainer=function(){var t=this.props,n=t.parentMoveable,e=t.wrapperMoveable;return t.container||e&&e.getContainer()||n&&n.getContainer()||this.controlBox.getElement().parentElement},r.isMoveableElement=function(t){return t&&(t.getAttribute("class")||"").indexOf(ue)>-1},r.dragStart=function(t){var n=this.targetGesto;return n&&!n.isFlag()&&n.triggerDragStart(t),this},r.hitTest=function(t){var n,e=this.state,r=e.target,i=e.pos1,o=e.pos2,a=e.pos3,s=e.pos4,u=e.targetClientRect;if(!r)return 0;if(t instanceof Element){var c=t.getBoundingClientRect();n={left:c.left,top:c.top,width:c.width,height:c.height}}else n=Qn({width:0,height:0},t);var l=n.left,f=n.top,p=n.width,d=n.height,h=gn([i,o,s,a],u),v=vn(Mn(h,[[l,f],[l+p,f],[l+p,f+d],[l,f+d]])),g=vn(h);return v&&g?Math.min(100,v/g*100):0},r.isInside=function(t,n){var e=this.state,r=e.target,i=e.pos1,o=e.pos2,a=e.pos3,s=e.pos4,u=e.targetClientRect;return!!r&&bn([t,n],gn([i,o,s,a],u))},r.updateRect=function(t,n,e){void 0===e&&(e=!0);var r=this.props,i=r.parentMoveable,o=this.state.target||this.props.target,a=this.getContainer(),s=i?i.props.rootContainer:r.rootContainer;this.updateState(Di(this.controlBox&&this.controlBox.getElement(),o,a,a,s||a),!i&&e)},r.isDragging=function(){return!!this.targetGesto&&this.targetGesto.isFlag()||!!this.controlGesto&&this.controlGesto.isFlag()},r.updateTarget=function(t){this.updateRect(t,!0)},r.getRect=function(){var t=this.state,n=_i(this.state),e=n[0],r=n[1],i=n[2],o=n[3],a=mi(n),s=t.width,u=t.height,c=a.width,l=a.height,f=a.left,p=a.top,d=[t.left,t.top],h=qt(d,t.origin);return{width:c,height:l,left:f,top:p,pos1:e,pos2:r,pos3:i,pos4:o,offsetWidth:s,offsetHeight:u,beforeOrigin:qt(d,t.beforeOrigin),origin:h,transformOrigin:t.transformOrigin,rotation:this.getRotation()}},r.getManager=function(){return this},r.getRotation=function(){var t=this.state;return function(t,n,e){var r=I(t,n)/Math.PI*180;return(r=e>=0?r:180-r)>=0?r:360+r}(t.pos1,t.pos2,t.direction)},r.request=function(t,n,e){void 0===n&&(n={});var r=this.props,i=r.ables,o=r.groupable,a=i.filter((function(n){return n.name===t}))[0];if(this.isDragging()||!a||!a.request)return{request:function(){return this},requestEnd:function(){return this}};var s=this,u=a.request(this),c=e||n.isInstant,l=u.isControl?"controlAbles":"targetAbles",f="".concat(o?"Group":"").concat(u.isControl?"Control":""),p={request:function(n){return Yo(s,l,"drag",f,"",Qn(Qn({},u.request(n)),{requestAble:t,isRequest:!0}),c),this},requestEnd:function(){return Yo(s,l,"drag",f,"End",Qn(Qn({},u.requestEnd()),{requestAble:t,isRequest:!0}),c),this}};return Yo(s,l,"drag",f,"Start",Qn(Qn({},u.requestStart(n)),{requestAble:t,isRequest:!0}),c),c?p.request(n).requestEnd():p},r.destroy=function(){this.componentWillUnmount()},r.updateRenderPoses=function(){var t=this.state,n=this.props,e=t.originalBeforeOrigin,r=t.transformOrigin,i=t.allMatrix,o=t.is3d,a=t.pos1,s=t.pos2,u=t.pos3,c=t.pos4,l=t.left,f=t.top,p=n.padding||{},d=p.left,h=void 0===d?0:d,v=p.top,g=void 0===v?0:v,m=p.bottom,b=void 0===m?0:m,x=p.right,y=void 0===x?0:x,E=o?4:3,S=n.groupable?e:qt(e,[l,f]);t.renderPoses=[qt(a,Xi(i,[-h,-g],r,S,E)),qt(s,Xi(i,[y,-g],r,S,E)),qt(u,Xi(i,[-h,b],r,S,E)),qt(c,Xi(i,[y,b],r,S,E))]},r.checkUpdate=function(){var t=this.props,n=t.target,e=t.container,r=t.parentMoveable,i=this.state,o=i.target,a=i.container;if((o||n)&&(this.updateAbles(),!Ii(o,n)||!Ii(a,e))){var s=e||this.controlBox;s&&this.unsetAbles(),this.updateState({target:n,container:e}),!r&&s&&this.updateRect("End",!1,!1)}},r.triggerEvent=function(t,n){this._emitter.trigger(t,n);var e=this.props[t];return e&&e(n)},r.useCSS=function(t,n){var e=this.props.customStyledMap,r=t+n;return e[r]||(e[r]=Un(t,n)),e[r]},r.unsetAbles=function(){var t=this;this.targetAbles.forEach((function(n){n.unset&&n.unset(t)}))},r.updateAbles=function(t,n){void 0===t&&(t=this.props.ables),void 0===n&&(n="");var e=this.props,r=e.triggerAblesSimultaneously,i=t.filter((function(t){return t&&(t.always&&!1!==e[t.name]||e[t.name])})),o="drag".concat(n,"Start"),a="pinch".concat(n,"Start"),s="drag".concat(n,"ControlStart"),u=Fi(i,[o,a],r),c=Fi(i,[s],r);this.enabledAbles=i,this.targetAbles=u,this.controlAbles=c},r.updateState=function(t,n){if(n){if(this.isUnmounted)return;this.setState(t)}else{var e=this.state;for(var r in t)e[r]=t[r]}},r.getEnabledAbles=function(){var t=this.props;return t.ables.filter((function(n){return n&&t[n.name]}))},r.renderAbles=function(){var t,n=this,e=this.props.triggerAblesSimultaneously,r={createElement:it};return function(t,n){var e=[],r={};return t.forEach((function(i,o){var a=n(i,o,t),s=r[a];s||(s=[],r[a]=s,e.push(s)),s.push(i)})),e}((t=Fi(this.getEnabledAbles(),["render"],e).map((function(t){return(0,t.render)(n,r)||[]})),t.reduce((function(t,n){return t.concat(n)}),[])).filter((function(t){return t})),(function(t){return t.key})).map((function(t){return t[0]}))},r.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},r._updateObserver=function(t){var n,e=this.props,r=e.target;if(window.ResizeObserver&&r&&e.useResizeObserver){if(t.target!==r||!this._observer){var i=new ResizeObserver(this.checkUpdateRect);i.observe(r,{box:"border-box"}),this._observer=i}}else null===(n=this._observer)||void 0===n||n.disconnect()},r._updateEvents=function(){var t=this.controlBox.getElement(),n=this.targetAbles.length,e=this.controlAbles.length,r=this.props,i=r.dragTarget||r.target;(!n&&this.targetGesto||this._isTargetChanged(!0))&&(zi(this,"targetGesto"),this.updateState({gesto:null})),e||zi(this,"controlGesto"),i&&n&&!this.targetGesto&&(this.targetGesto=Xo(this,i,"")),!this.controlGesto&&e&&(this.controlGesto=Wo(this,t,"controlAbles","Control"))},r._updateTargets=function(){var t=this.props;this._prevTarget=t.dragTarget||t.target,this._prevDragArea=t.dragArea},r._renderLines=function(){var t=this.props,n=t.edge,e=t.zoom;if(t.hideDefaultLines)return[];var r=this.state.renderPoses,i={createElement:it};return[Me(i,n?"n":"",r[0],r[1],e,0),Me(i,n?"e":"",r[1],r[3],e,1),Me(i,n?"w":"",r[0],r[2],e,2),Me(i,n?"s":"",r[2],r[3],e,3)]},r._isTargetChanged=function(t){var n=this.props,e=n.dragTarget||n.target,r=this._prevTarget,i=this._prevDragArea,o=n.dragArea;return!o&&r!==e||(t||o)&&i!==o},r._updateNativeEvents=function(){var t=this,n=this.props.dragArea?this.areaElement:this.state.target,e=this.events,r=G(e);if(this._isTargetChanged())for(var i in e){var o=e[i];o&&o.destroy(),e[i]=null}if(n){var a=this.enabledAbles;r.forEach((function(r){var i=Fi(a,[r]),o=i.length>0,s=e[r];o?(s||(s=new qo(n,t,r),e[r]=s),s.setAbles(i)):s&&(s.destroy(),e[r]=null)}))}},e.defaultProps={target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,edge:!1,parentMoveable:null,wrapperMoveable:null,parentPosition:null,portalContainer:null,useResizeObserver:!1,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},flushSync:Qr},e}(vt),Ho={name:"groupable",props:{defaultGroupRotate:Number,defaultGroupOrigin:String,groupable:Boolean},events:{},render:function(t,n){var r=t.props.targets||[];t.moveables=[];var i=t.state,o={left:i.left,top:i.top},a=t.props;return r.map((function(r,i){return n.createElement(Lo,{key:"moveable"+i,ref:e(t,"moveables",i),target:r,origin:!1,cssStyled:a.cssStyled,customStyledMap:a.customStyledMap,useResizeObserver:a.useResizeObserver,parentMoveable:t,parentPosition:o})}))}},Vo=ne("clickable",{props:{clickable:Boolean,preventClickDefault:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},always:!0,dragRelation:"weak",dragStart:function(t,n){n.isRequest||q(window,"click",t.onPreventClick,!0)},dragControlStart:function(t,n){this.dragStart(t,n)},dragGroupStart:function(t,n){this.dragStart(t,n),n.datas.inputTarget=n.inputEvent&&n.inputEvent.target},dragEnd:function(t,n){this.endEvent(t);var e=t.state.target,r=n.inputEvent,i=n.inputTarget,o=!t.isMoveableElement(i)&&t.controlBox.getElement().contains(i);if((!t.props.preventClickDefault&&!n.isDrag||o)&&this.unset(t),r&&i&&!n.isDrag&&!t.isMoveableElement(i)&&!o){var a=e.contains(i);ki(t,"onClick",Bi(t,n,{isDouble:n.isDouble,inputTarget:i,isTarget:e===i,containsTarget:a}))}},dragGroupEnd:function(t,n){this.endEvent(t);var e=n.inputEvent,r=n.inputTarget;if(e&&r&&!n.isDrag&&!t.isMoveableElement(r)&&n.datas.inputTarget!==r){var i=t.props.targets,o=i.indexOf(r),a=o>-1,s=!1;-1===o&&(s=(o=P(i,(function(t){return t.contains(r)})))>-1),ki(t,"onClickGroup",Bi(t,n,{isDouble:n.isDouble,targets:i,inputTarget:r,targetIndex:o,isTarget:a,containsTarget:s}))}},dragControlEnd:function(t,n){this.dragEnd(t,n)},dragGroupControlEnd:function(t,n){this.dragEnd(t,n)},endEvent:function(t){var n=this;z((function(){n.unset(t)}))},unset:function(t){L(window,"click",t.onPreventClick,!0)}});function Uo(t){var n=t.originalDatas.draggable;return n||(t.originalDatas.draggable={},n=t.originalDatas.draggable),Qn(Qn({},t),{datas:n})}var $o=ne("edgeDraggable",{dragControlCondition:function(t,n){if(!t.props.edgeDraggable||!n.inputEvent)return!1;var e=n.inputEvent.target;return W(e,Jr("direction"))&&W(e,Jr("line"))},dragControlStart:function(t,n){return Pr.dragStart(t,Uo(n))},dragControl:function(t,n){return Pr.drag(t,Uo(n))},dragControlEnd:function(t,n){return Pr.dragEnd(t,Uo(n))},dragGroupControlCondition:function(t,n){if(!t.props.edgeDraggable||!n.inputEvent)return!1;var e=n.inputEvent.target;return W(e,Jr("direction"))&&W(e,Jr("line"))},dragGroupControlStart:function(t,n){return Pr.dragGroupStart(t,Uo(n))},dragGroupControl:function(t,n){return Pr.dragGroup(t,Uo(n))},dragGroupControlEnd:function(t,n){return Pr.dragGroupEnd(t,Uo(n))},unset:function(t){return Pr.unset(t)}}),Zo={name:"individualGroupable",props:{individualGroupable:Boolean},events:{}},Ko=[jo,ho,Or,Ji,Pr,$o,ze,Qi,to,ro,po,vo,lo,ko,To,Io,Ho,Zo,Vo,co,No],Jo=Ko.reduce((function(t,n){return Qn(Qn({},t),"events"in n?n.events:{})}),{}),Qo=Ko.reduce((function(t,n){return Qn(Qn({},t),n.props)}),{}),ta=Hi(Jo),na=Object.keys(ta),ea=Object.keys(Qo);function ra(t,n){return Math.max.apply(Math,t.map((function(t){var e=t[0],r=t[1],i=t[2],o=t[3];return Math.max(e[n],r[n],i[n],o[n])})))}function ia(t,n){return Math.min.apply(Math,t.map((function(t){var e=t[0],r=t[1],i=t[2],o=t[3];return Math.min(e[n],r[n],i[n],o[n])})))}var oa=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.differ=new dn,n.moveables=[],n.transformOrigin="50% 50%",n}Jn(n,t);var e=n.prototype;return e.checkUpdate=function(){this.updateAbles()},e.updateRect=function(t,n,e){if(void 0===e&&(e=!0),this.controlBox){this.moveables.forEach((function(n){n.updateRect(t,!1,!1)}));var r=this.state,i=this.props,o=r.target||i.target;(!n||""!==t&&i.updateGroup)&&(this.rotation=i.defaultGroupRotate,this.transformOrigin=i.defaultGroupOrigin||"50% 50%",this.scale=[1,1]);var a=this.rotation,s=this.scale,u=function(t,n){if(!t.length)return[0,0,0,0];var e=t.map((function(t){return _i(t.state)})),r=fe,i=fe,o=0,a=0,s=Y(n,1e-7);if(s%90){var u=s/180*Math.PI,c=Math.tan(u),l=-1/c,f=[pe,fe],p=[pe,fe];e.forEach((function(t){t.forEach((function(t){var n=t[1]-c*t[0],e=t[1]-l*t[0];f[0]=Math.max(f[0],n),f[1]=Math.min(f[1],n),p[0]=Math.max(p[0],e),p[1]=Math.min(p[1],e)}))})),f.forEach((function(t){p.forEach((function(n){var e=(n-t)/(c-l),o=c*e+t;r=Math.min(r,e),i=Math.min(i,o)}))}));var d=e.map((function(t){var n=t[0],e=t[1],r=t[2],i=t[3];return[Jt(n,-u),Jt(e,-u),Jt(r,-u),Jt(i,-u)]}));o=ra(d,0)-ia(d,0),a=ra(d,1)-ia(d,1)}else if(r=ia(e,0),i=ia(e,1),o=ra(e,0)-r,a=ra(e,1)-i,s%180){var h=o;o=a,a=h}return[r,i,o,a]}(this.moveables,a),c=u[0],l=u[1],f=u[2],p=u[3],d="rotate(".concat(a,"deg) scale(").concat(s[0]>=0?1:-1,", ").concat(s[1]>=0?1:-1,")");o.style.cssText+="left:0px;top:0px; transform-origin: ".concat(this.transformOrigin,"; width:").concat(f,"px; height:").concat(p,"px;")+"transform:".concat(d),r.width=f,r.height=p;var h=this.getContainer(),v=Di(this.controlBox.getElement(),o,this.controlBox.getElement(),this.getContainer(),this.props.rootContainer||h),g=[v.left,v.top],m=_i(v),b=m[0],x=m[1],y=m[2],E=m[3],S=mn([b,x,y,E]),M=[S.minX,S.minY];v.pos1=Lt(b,M),v.pos2=Lt(x,M),v.pos3=Lt(y,M),v.pos4=Lt(E,M),v.left=c-v.left+M[0],v.top=l-v.top+M[1],v.origin=Lt(qt(g,v.origin),M),v.beforeOrigin=Lt(qt(g,v.beforeOrigin),M),v.originalBeforeOrigin=qt(g,v.originalBeforeOrigin);var w=v.targetClientRect,C=s[0]*s[1]>0?1:-1;w.top+=v.top-r.top,w.left+=v.left-r.left,o.style.transform="translate(".concat(-M[0],"px, ").concat(-M[1],"px) ").concat(d),this.updateState(Qn(Qn({},v),{direction:C,beforeDirection:C}),e)}},e.getRect=function(){return Qn(Qn({},t.prototype.getRect.call(this)),{children:this.moveables.map((function(t){return t.getRect()}))})},e.triggerEvent=function(n,e,r){if(r||n.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,n,e);this._emitter.trigger(n,e)},e.updateAbles=function(){t.prototype.updateAbles.call(this,te(te([],this.props.ables,!0),[Ho],!1),"Group")},e._updateTargets=function(){t.prototype._updateTargets.call(this),this._prevTarget=this.props.dragTarget||this.areaElement},e._updateEvents=function(){var t=this.state,n=this.props,e=this._prevTarget,r=n.dragTarget||this.areaElement;e!==r&&(zi(this,"targetGesto"),zi(this,"controlGesto"),t.target=null),t.target||(t.target=this.areaElement,this.controlBox.getElement().style.display="block"),t.target&&(this.targetGesto||(this.targetGesto=Xo(this,r,"Group")),this.controlGesto||(this.controlGesto=Wo(this,this.controlBox.getElement(),"controlAbles","GroupControl")));var i=!Ii(t.container,n.container);i&&(t.container=n.container);var o=this.differ.update(n.targets),a=o.added,s=o.changed,u=o.removed;(i||a.length||s.length||u.length)&&this.updateRect()},e._updateObserver=function(){},n.defaultProps=Qn(Qn({},Lo.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),n}(Lo),aa=function(t){function r(){var n=null!==t&&t.apply(this,arguments)||this;return n.moveables=[],n}Jn(r,t);var i=r.prototype;return i.render=function(){var t=this,r=this.props,i=r.cspNonce,o=r.cssStyled,a=r.targets;return it(o,{cspNonce:i,ref:n(this,"controlBox"),className:Jr("control-box")},a.map((function(n,r){return it(Lo,Qn({key:"moveable"+r,ref:e(t,"moveables",r)},t.props,{target:n,wrapperMoveable:t}))})))},i.componentDidUpdate=function(){},i.updateRect=function(t,n,e){void 0===e&&(e=!0),this.moveables.forEach((function(r){r.updateRect(t,n,e)}))},i.getRect=function(){return Qn(Qn({},t.prototype.getRect.call(this)),{children:this.moveables.map((function(t){return t.getRect()}))})},i.request=function(){return{request:function(){return this},requestEnd:function(){return this}}},i.dragStart=function(){return this},i.hitTest=function(){return 0},i.isInside=function(){return!1},i.isDragging=function(){return!1},i.updateRenderPoses=function(){},i.checkUpdate=function(){},i.triggerEvent=function(){},i.updateAbles=function(){},i._updateEvents=function(){},i._updateObserver=function(){},r}(Lo),sa=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Jn(n,t),n.defaultAbles=Ko,n}(function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.refTargets=[],n.selectorMap={},n}Jn(e,t);var r,i,o=e.prototype;return e.makeStyled=function(){var t={};this.getTotalAbles().forEach((function(n){var e=n.css;e&&e.forEach((function(n){t[n]=!0}))}));var n,e=G(t).join("\n");this.defaultStyled=Un("div",(n=ue,(ce+e).replace(/([^}{]*){/gm,(function(t,e){return e.replace(/\.([^{,\s\d.]+)/g,"."+n+"$1")+"{"}))))},e.getTotalAbles=function(){return te([ho,Ho,Zo,co],this.defaultAbles,!0)},o.render=function(){var t=this.constructor;t.defaultStyled||t.makeStyled();var e=this.props,r=e.ables,i=e.props,o=function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]])}return e}(e,["ables","props"]),a=function(t,n){var e=[];return t.forEach((function(t){t&&(m(t)?n[t]&&e.push.apply(e,n[t]):e.push(t))})),e}(this._updateRefs(!0),this.selectorMap),s=a.length>1,u=te(te([],t.getTotalAbles(),!0),r||[],!0),c=Qn(Qn(Qn({},o),i||{}),{ables:u,cssStyled:t.defaultStyled,customStyledMap:t.customStyledMap});return s?o.individualGroupable?it(aa,Qn({key:"individual-group",ref:n(this,"moveable")},c,{target:null,targets:a})):it(oa,Qn({key:"group",ref:n(this,"moveable")},c,{target:null,targets:a})):it(Lo,Qn({key:"single",ref:n(this,"moveable")},c,{target:a[0]}))},o.componentDidMount=function(){this._updateRefs()},o.componentDidUpdate=function(){this._updateRefs()},o.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},o.getManager=function(){return this.moveable},o._updateRefs=function(t){var n=this.refTargets,e=Ui(this.props.target||this.props.targets),r="undefined"!=typeof document,i=n.length!==e.length||n.some((function(t,n){var r=e[n];return!(!t&&!r)&&t!==r})),o=this.selectorMap,a={};return this.refTargets.forEach((function(t){m(t)&&(o[t]?a[t]=o[t]:r&&(i=!0,a[t]=[].slice.call(document.querySelectorAll(t))))})),this.refTargets=e,this.selectorMap=a,!t&&i&&this.forceUpdate(),e},e.defaultAbles=[],e.customStyledMap={},e.defaultStyled=null,function(t,n,e,r){var i,o=arguments.length,a=o<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,n,e,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(n,e,a):i(n,e))||a);o>3&&a&&Object.defineProperty(n,e,a)}([(r=ge,void 0===i&&(i={}),function(t,n){r.forEach((function(e){var r=i[e]||e;r in t||(t[r]=function(){for(var t,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=(t=this[n])[e].apply(t,r);return o===this[n]?this:o})}))})],e.prototype,"moveable",void 0),e}(vt)),ua=function(t,n){return(ua=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};function ca(t,n){function e(){this.constructor=t}ua(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}var la=function(){return la=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t},la.apply(this,arguments)};var fa=function(t){function e(n){var e=t.call(this,n)||this;return e.state={},e.state=e.props,e}return ca(e,t),e.prototype.render=function(){return t=it(sa,la({ref:n(this,"moveable")},this.state)),e=this.state.parentElement,it(gt,{element:t,container:e});var t,e},e}(ht),pa=ea,da=ge,ha=na,va=function(){return va=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t},va.apply(this,arguments)};var ga=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return ca(n,t),n}(function(t){function e(e,r){void 0===r&&(r={});var i=t.call(this)||this;i.tempElement=document.createElement("div");var o=la({},r),a={};ha.forEach((function(t){var n;a[(n="on ".concat(t),n.replace(/[\s-_]([a-z])/g,(function(t,n){return n.toUpperCase()})))]=function(n){return i.trigger(t,n)}})),yt(it(fa,la({ref:n(i,"innerMoveable"),parentElement:e},o,a)),i.tempElement);var s=o.target;return g(s)&&s.length>1&&i.updateRect(),i}ca(e,t);var i=e.prototype;return i.setState=function(t,n){this.innerMoveable.setState(t,n)},i.forceUpdate=function(t){this.innerMoveable.forceUpdate(t)},i.dragStart=function(t){this.innerMoveable.$_timer&&this.forceUpdate(),this.getMoveable().dragStart(t)},i.destroy=function(){yt(null,this.tempElement),this.off(),this.tempElement=null,this.innerMoveable=null},i.getMoveable=function(){return this.innerMoveable.moveable},e=function(t,n,e,r){var i,o=arguments.length,a=o<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,n,e,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(n,e,a):i(n,e))||a);return o>3&&a&&Object.defineProperty(n,e,a),a}([r(da,(function(t,n){t[n]||(t[n]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=this.getMoveable();if(r&&r[n])return r[n].apply(r,t)})})),r(pa,(function(t,n){Object.defineProperty(t,n,{get:function(){return this.getMoveable().props[n]},set:function(t){var e;this.setState(((e={})[n]=t,e))},enumerable:!0,configurable:!0})}))],e),e}(function(){function t(){this._events={}}var n=t.prototype;return n.on=function(t,n){if(v(t))for(var e in t)this.on(e,t[e]);else this._addEvent(t,n,{});return this},n.off=function(t,n){if(t)if(v(t))for(var e in t)this.off(e);else if(n){var r=this._events[t];if(r){var i=P(r,(function(t){return t.listener===n}));i>-1&&r.splice(i,1)}}else this._events[t]=[];else this._events={};return this},n.once=function(t,n){var e=this;return n&&this._addEvent(t,n,{once:!0}),new Promise((function(n){e._addEvent(t,n,{once:!0})}))},n.emit=function(t,n){var e=this;void 0===n&&(n={});var r=this._events[t];if(!t||!r)return!0;var i=!1;return n.eventType=t,n.stop=function(){i=!0},n.currentTarget=this,function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;var r=Array(t),i=0;for(n=0;n<e;n++)for(var o=arguments[n],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}(r).forEach((function(r){r.listener(n),r.once&&e.off(t,r.listener)})),!i},n.trigger=function(t,n){return void 0===n&&(n={}),this.emit(t,n)},n._addEvent=function(t,n,e){var r=this._events;r[t]=r[t]||[],r[t].push(va({listener:n},e))},t}()));export{ga as M};
